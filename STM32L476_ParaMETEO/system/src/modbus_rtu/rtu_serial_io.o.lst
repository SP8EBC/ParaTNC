   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"rtu_serial_io.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.rtu_serial_callback,"ax",%progbits
  18              		.align	1
  19              		.global	rtu_serial_callback
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	rtu_serial_callback:
  26              	.LFB404:
  27              		.file 1 "../system/src/modbus_rtu/rtu_serial_io.c"
   1:../system/src/modbus_rtu/rtu_serial_io.c **** /*
   2:../system/src/modbus_rtu/rtu_serial_io.c ****  * rtu_serial_io.c
   3:../system/src/modbus_rtu/rtu_serial_io.c ****  *
   4:../system/src/modbus_rtu/rtu_serial_io.c ****  *  Created on: 27.08.2020
   5:../system/src/modbus_rtu/rtu_serial_io.c ****  *      Author: mateusz
   6:../system/src/modbus_rtu/rtu_serial_io.c ****  */
   7:../system/src/modbus_rtu/rtu_serial_io.c **** 
   8:../system/src/modbus_rtu/rtu_serial_io.c **** #include "modbus_rtu/rtu_configuration.h"
   9:../system/src/modbus_rtu/rtu_serial_io.c **** #include "modbus_rtu/rtu_serial_io.h"
  10:../system/src/modbus_rtu/rtu_serial_io.c **** #include "modbus_rtu/rtu_crc.h"
  11:../system/src/modbus_rtu/rtu_serial_io.c **** #include "modbus_rtu/rtu_parser.h"
  12:../system/src/modbus_rtu/rtu_serial_io.c **** #include "modbus_rtu/rtu_return_values.h"
  13:../system/src/modbus_rtu/rtu_serial_io.c **** #include "modbus_rtu/rtu_register_data_t.h"
  14:../system/src/modbus_rtu/rtu_serial_io.c **** #include "modbus_rtu/rtu_request.h"
  15:../system/src/modbus_rtu/rtu_serial_io.c **** 
  16:../system/src/modbus_rtu/rtu_serial_io.c **** #include "drivers/serial.h"
  17:../system/src/modbus_rtu/rtu_serial_io.c **** 
  18:../system/src/modbus_rtu/rtu_serial_io.c **** #include "main.h"
  19:../system/src/modbus_rtu/rtu_serial_io.c **** #include "rte_wx.h"
  20:../system/src/modbus_rtu/rtu_serial_io.c **** #include "rte_main.h"
  21:../system/src/modbus_rtu/rtu_serial_io.c **** #include "rte_rtu.h"
  22:../system/src/modbus_rtu/rtu_serial_io.c **** 
  23:../system/src/modbus_rtu/rtu_serial_io.c **** #include <string.h>
  24:../system/src/modbus_rtu/rtu_serial_io.c **** #include <stdio.h>
  25:../system/src/modbus_rtu/rtu_serial_io.c **** 
  26:../system/src/modbus_rtu/rtu_serial_io.c **** #define INTERFRAME_SP	20
  27:../system/src/modbus_rtu/rtu_serial_io.c **** 
  28:../system/src/modbus_rtu/rtu_serial_io.c **** 
  29:../system/src/modbus_rtu/rtu_serial_io.c **** #ifndef _RTU_SLAVE_LENGHT_1
  30:../system/src/modbus_rtu/rtu_serial_io.c **** 	#define _RTU_SLAVE_LENGHT_1 0x1
  31:../system/src/modbus_rtu/rtu_serial_io.c **** #endif
  32:../system/src/modbus_rtu/rtu_serial_io.c **** 
  33:../system/src/modbus_rtu/rtu_serial_io.c **** #ifndef _RTU_SLAVE_LENGHT_2
  34:../system/src/modbus_rtu/rtu_serial_io.c **** 	#define _RTU_SLAVE_LENGHT_2 0x1
  35:../system/src/modbus_rtu/rtu_serial_io.c **** #endif
  36:../system/src/modbus_rtu/rtu_serial_io.c **** 
  37:../system/src/modbus_rtu/rtu_serial_io.c **** #ifndef _RTU_SLAVE_LENGHT_3
  38:../system/src/modbus_rtu/rtu_serial_io.c **** 	#define _RTU_SLAVE_LENGHT_3 0x1
  39:../system/src/modbus_rtu/rtu_serial_io.c **** #endif
  40:../system/src/modbus_rtu/rtu_serial_io.c **** 
  41:../system/src/modbus_rtu/rtu_serial_io.c **** #ifndef _RTU_SLAVE_LENGHT_4
  42:../system/src/modbus_rtu/rtu_serial_io.c **** 	#define _RTU_SLAVE_LENGHT_4 0x1
  43:../system/src/modbus_rtu/rtu_serial_io.c **** #endif
  44:../system/src/modbus_rtu/rtu_serial_io.c **** 
  45:../system/src/modbus_rtu/rtu_serial_io.c **** #ifndef _RTU_SLAVE_LENGHT_5
  46:../system/src/modbus_rtu/rtu_serial_io.c **** 	#define _RTU_SLAVE_LENGHT_5 0x1
  47:../system/src/modbus_rtu/rtu_serial_io.c **** #endif
  48:../system/src/modbus_rtu/rtu_serial_io.c **** 
  49:../system/src/modbus_rtu/rtu_serial_io.c **** #ifndef _RTU_SLAVE_LENGHT_6
  50:../system/src/modbus_rtu/rtu_serial_io.c **** 	#define _RTU_SLAVE_LENGHT_6 0x1
  51:../system/src/modbus_rtu/rtu_serial_io.c **** #endif
  52:../system/src/modbus_rtu/rtu_serial_io.c **** 
  53:../system/src/modbus_rtu/rtu_serial_io.c **** typedef enum rtu_pool_state {
  54:../system/src/modbus_rtu/rtu_serial_io.c **** 	RTU_POOL_IDLE,
  55:../system/src/modbus_rtu/rtu_serial_io.c **** 	RTU_POOL_TRANSMITTING,
  56:../system/src/modbus_rtu/rtu_serial_io.c **** 	RTU_POOL_RECEIVING,
  57:../system/src/modbus_rtu/rtu_serial_io.c **** 	RTU_POOL_WAIT_AFTER_RECEIVE,
  58:../system/src/modbus_rtu/rtu_serial_io.c **** 	RTU_POOL_RECEIVE_ERROR,
  59:../system/src/modbus_rtu/rtu_serial_io.c **** 	RTU_POOL_STOP
  60:../system/src/modbus_rtu/rtu_serial_io.c **** } rtu_pool_state_t;
  61:../system/src/modbus_rtu/rtu_serial_io.c **** 
  62:../system/src/modbus_rtu/rtu_serial_io.c **** rtu_pool_state_t rtu_pool_state = RTU_POOL_STOP;
  63:../system/src/modbus_rtu/rtu_serial_io.c **** 
  64:../system/src/modbus_rtu/rtu_serial_io.c **** /**
  65:../system/src/modbus_rtu/rtu_serial_io.c ****  * Set to one to switch I/O operations to blocking mode
  66:../system/src/modbus_rtu/rtu_serial_io.c ****  */
  67:../system/src/modbus_rtu/rtu_serial_io.c **** uint8_t rtu_blocking_io = 0;
  68:../system/src/modbus_rtu/rtu_serial_io.c **** 
  69:../system/src/modbus_rtu/rtu_serial_io.c **** /**
  70:../system/src/modbus_rtu/rtu_serial_io.c ****  * Timestamp of last received modbus RTU response with good CRC
  71:../system/src/modbus_rtu/rtu_serial_io.c ****  */
  72:../system/src/modbus_rtu/rtu_serial_io.c **** uint32_t rtu_time_of_last_successfull_comm = 0;
  73:../system/src/modbus_rtu/rtu_serial_io.c **** 
  74:../system/src/modbus_rtu/rtu_serial_io.c **** /**
  75:../system/src/modbus_rtu/rtu_serial_io.c ****  * This variable latches the value of 'rtu_time_of_last_successfull_comm' across
  76:../system/src/modbus_rtu/rtu_serial_io.c ****  * consecutive messages with an error status. If the value is the same as during
  77:../system/src/modbus_rtu/rtu_serial_io.c ****  * previous transmission the controller is restarted
  78:../system/src/modbus_rtu/rtu_serial_io.c ****  */
  79:../system/src/modbus_rtu/rtu_serial_io.c **** uint32_t rtu_time_of_last_succ_comm_at_previous_error_status = 0;
  80:../system/src/modbus_rtu/rtu_serial_io.c **** 
  81:../system/src/modbus_rtu/rtu_serial_io.c **** /**
  82:../system/src/modbus_rtu/rtu_serial_io.c ****  * CRC value after the last call to rtu_serial_callback
  83:../system/src/modbus_rtu/rtu_serial_io.c ****  */
  84:../system/src/modbus_rtu/rtu_serial_io.c **** uint16_t rtu_serial_previous_crc = 0xFFFF;
  85:../system/src/modbus_rtu/rtu_serial_io.c **** 
  86:../system/src/modbus_rtu/rtu_serial_io.c **** /**
  87:../system/src/modbus_rtu/rtu_serial_io.c ****  * Cleared by 'rtu_serial_callback' when first byte from range 0x1..0xF7 is received
  88:../system/src/modbus_rtu/rtu_serial_io.c ****  */
  89:../system/src/modbus_rtu/rtu_serial_io.c **** uint8_t rtu_waiting_for_slave_addr = 0x1;
  90:../system/src/modbus_rtu/rtu_serial_io.c **** 
  91:../system/src/modbus_rtu/rtu_serial_io.c **** volatile rtu_pool_queue_t* rtu_used_queue;
  92:../system/src/modbus_rtu/rtu_serial_io.c **** 
  93:../system/src/modbus_rtu/rtu_serial_io.c **** volatile srl_context_t* rtu_used_serial_context;
  94:../system/src/modbus_rtu/rtu_serial_io.c **** 
  95:../system/src/modbus_rtu/rtu_serial_io.c **** volatile uint8_t rtu_current_03_slave_address;
  96:../system/src/modbus_rtu/rtu_serial_io.c **** 
  97:../system/src/modbus_rtu/rtu_serial_io.c **** volatile uint16_t rtu_current_03_base_register;
  98:../system/src/modbus_rtu/rtu_serial_io.c **** 
  99:../system/src/modbus_rtu/rtu_serial_io.c **** volatile uint8_t rtu_current_03_number_of_registers;
 100:../system/src/modbus_rtu/rtu_serial_io.c **** 
 101:../system/src/modbus_rtu/rtu_serial_io.c **** /**
 102:../system/src/modbus_rtu/rtu_serial_io.c ****  * The callback for stream CRC calculation
 103:../system/src/modbus_rtu/rtu_serial_io.c ****  */
 104:../system/src/modbus_rtu/rtu_serial_io.c **** uint8_t rtu_serial_callback(uint8_t current_data, const uint8_t * const rx_buffer, uint16_t rx_byte
  28              		.loc 1 104 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  34 0000 10B4     		push	{r4}
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 4, -4
  37              	.LVL1:
 105:../system/src/modbus_rtu/rtu_serial_io.c **** 
 106:../system/src/modbus_rtu/rtu_serial_io.c **** 	uint8_t retval = 0;
 107:../system/src/modbus_rtu/rtu_serial_io.c **** 
 108:../system/src/modbus_rtu/rtu_serial_io.c **** 	uint16_t new_crc = 0;
 109:../system/src/modbus_rtu/rtu_serial_io.c **** 
 110:../system/src/modbus_rtu/rtu_serial_io.c **** 	// check if the callback still waits for first 'valid' byte to be received from RTU slave
 111:../system/src/modbus_rtu/rtu_serial_io.c **** 	if (rtu_waiting_for_slave_addr == 0x1) {
  38              		.loc 1 111 0
  39 0002 154A     		ldr	r2, .L13
  40              	.LVL2:
  41 0004 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
  42 0006 012A     		cmp	r2, #1
  43 0008 07D0     		beq	.L11
  44              	.L2:
 112:../system/src/modbus_rtu/rtu_serial_io.c **** 
 113:../system/src/modbus_rtu/rtu_serial_io.c **** 		// check if the byte which was received from the slave is valid address
 114:../system/src/modbus_rtu/rtu_serial_io.c **** 		if (current_data >= 0x01 && current_data <= 0xF7) {
 115:../system/src/modbus_rtu/rtu_serial_io.c **** 			// clear this flag to start CRC calculation and data receiving
 116:../system/src/modbus_rtu/rtu_serial_io.c **** 			rtu_waiting_for_slave_addr = 0;
 117:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 118:../system/src/modbus_rtu/rtu_serial_io.c **** 		else {
 119:../system/src/modbus_rtu/rtu_serial_io.c **** 			// RTU slave cannot respond with the broadcast address (0x00), also 0xF8..0xFF
 120:../system/src/modbus_rtu/rtu_serial_io.c **** 			// are not valid RTU address
 121:../system/src/modbus_rtu/rtu_serial_io.c **** 			;
 122:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 123:../system/src/modbus_rtu/rtu_serial_io.c **** 	}
 124:../system/src/modbus_rtu/rtu_serial_io.c **** 
 125:../system/src/modbus_rtu/rtu_serial_io.c **** 	// the second 'if' clause checks if the slave response has began
 126:../system/src/modbus_rtu/rtu_serial_io.c **** 	if (rtu_waiting_for_slave_addr == 0x0) {
  45              		.loc 1 126 0
  46 000a 134A     		ldr	r2, .L13
  47 000c 1478     		ldrb	r4, [r2]	@ zero_extendqisi2
  48 000e E4B9     		cbnz	r4, .L8
 127:../system/src/modbus_rtu/rtu_serial_io.c **** 
 128:../system/src/modbus_rtu/rtu_serial_io.c **** 		// calculate new crc
 129:../system/src/modbus_rtu/rtu_serial_io.c **** 		new_crc = rtu_crc_stream(rtu_serial_previous_crc, current_data);
  49              		.loc 1 129 0
  50 0010 124B     		ldr	r3, .L13+4
  51 0012 1B88     		ldrh	r3, [r3]
  52              	.LVL3:
  53              	.LBB16:
  54              	.LBB17:
  55              		.file 2 "../system/include/modbus_rtu/rtu_crc.h"
   1:../system/include/modbus_rtu/rtu_crc.h **** /*
   2:../system/include/modbus_rtu/rtu_crc.h ****  * rtu_crc.h
   3:../system/include/modbus_rtu/rtu_crc.h ****  *
   4:../system/include/modbus_rtu/rtu_crc.h ****  *  Created on: 18.09.2020
   5:../system/include/modbus_rtu/rtu_crc.h ****  *      Author: mateusz
   6:../system/include/modbus_rtu/rtu_crc.h ****  */
   7:../system/include/modbus_rtu/rtu_crc.h **** 
   8:../system/include/modbus_rtu/rtu_crc.h **** #ifndef INCLUDE_MODBUS_RTU_RTU_CRC_H_
   9:../system/include/modbus_rtu/rtu_crc.h **** #define INCLUDE_MODBUS_RTU_RTU_CRC_H_
  10:../system/include/modbus_rtu/rtu_crc.h **** 
  11:../system/include/modbus_rtu/rtu_crc.h **** #include <stdint.h>
  12:../system/include/modbus_rtu/rtu_crc.h **** 
  13:../system/include/modbus_rtu/rtu_crc.h **** inline uint16_t rtu_crc_stream(uint16_t previous_crc, uint8_t current_data) {
  14:../system/include/modbus_rtu/rtu_crc.h **** 	int i;
  15:../system/include/modbus_rtu/rtu_crc.h **** 
  16:../system/include/modbus_rtu/rtu_crc.h **** 	previous_crc ^= (uint16_t)current_data;
  56              		.loc 2 16 0
  57 0014 4340     		eors	r3, r3, r0
  58              	.LVL4:
  17:../system/include/modbus_rtu/rtu_crc.h **** 	for (i = 0; i < 8; ++i) {
  59              		.loc 2 17 0
  60 0016 0022     		movs	r2, #0
  61 0018 09E0     		b	.L4
  62              	.LVL5:
  63              	.L11:
  64              	.LBE17:
  65              	.LBE16:
 114:../system/src/modbus_rtu/rtu_serial_io.c **** 			// clear this flag to start CRC calculation and data receiving
  66              		.loc 1 114 0
  67 001a 431E     		subs	r3, r0, #1
  68 001c DBB2     		uxtb	r3, r3
  69 001e F62B     		cmp	r3, #246
  70 0020 F3D8     		bhi	.L2
 116:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
  71              		.loc 1 116 0
  72 0022 0D4B     		ldr	r3, .L13
  73 0024 0022     		movs	r2, #0
  74 0026 1A70     		strb	r2, [r3]
  75 0028 EFE7     		b	.L2
  76              	.LVL6:
  77              	.L5:
  78              	.LBB19:
  79              	.LBB18:
  18:../system/include/modbus_rtu/rtu_crc.h **** 		if (previous_crc & 1) {
  19:../system/include/modbus_rtu/rtu_crc.h **** 			previous_crc = (previous_crc >> 1);
  20:../system/include/modbus_rtu/rtu_crc.h **** 			previous_crc = (previous_crc) ^ 0xA001;
  21:../system/include/modbus_rtu/rtu_crc.h **** 		}
  22:../system/include/modbus_rtu/rtu_crc.h **** 		else
  23:../system/include/modbus_rtu/rtu_crc.h **** 			previous_crc = (previous_crc >> 1);
  80              		.loc 2 23 0
  81 002a 5B08     		lsrs	r3, r3, #1
  82              	.LVL7:
  83              	.L6:
  17:../system/include/modbus_rtu/rtu_crc.h **** 		if (previous_crc & 1) {
  84              		.loc 2 17 0
  85 002c 0132     		adds	r2, r2, #1
  86              	.LVL8:
  87              	.L4:
  88 002e 072A     		cmp	r2, #7
  89 0030 07DC     		bgt	.L12
  18:../system/include/modbus_rtu/rtu_crc.h **** 		if (previous_crc & 1) {
  90              		.loc 2 18 0
  91 0032 13F0010F 		tst	r3, #1
  92 0036 F8D0     		beq	.L5
  93              	.LVL9:
  20:../system/include/modbus_rtu/rtu_crc.h **** 		}
  94              		.loc 2 20 0
  95 0038 4AF20101 		movw	r1, #40961
  96 003c 81EA5303 		eor	r3, r1, r3, lsr #1
  97              	.LVL10:
  98 0040 F4E7     		b	.L6
  99              	.L12:
 100              	.LVL11:
 101              	.LBE18:
 102              	.LBE19:
 130:../system/src/modbus_rtu/rtu_serial_io.c **** 
 131:../system/src/modbus_rtu/rtu_serial_io.c **** 		// if the new CRC value equals 0x0000 it means that this was MSB
 132:../system/src/modbus_rtu/rtu_serial_io.c **** 		// of CRC from correctly received Modbus-RTU frame
 133:../system/src/modbus_rtu/rtu_serial_io.c **** 		if (new_crc == 0) {
 103              		.loc 1 133 0
 104 0042 3BB1     		cbz	r3, .L9
 134:../system/src/modbus_rtu/rtu_serial_io.c **** 			// return '1' to terminate the transmission
 135:../system/src/modbus_rtu/rtu_serial_io.c **** 			retval = 1;
 136:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 137:../system/src/modbus_rtu/rtu_serial_io.c **** 		else {
 138:../system/src/modbus_rtu/rtu_serial_io.c **** 			rtu_serial_previous_crc = new_crc;
 105              		.loc 1 138 0
 106 0044 054A     		ldr	r2, .L13+4
 107 0046 1380     		strh	r3, [r2]	@ movhi
 108 0048 00E0     		b	.L3
 109              	.LVL12:
 110              	.L8:
 106:../system/src/modbus_rtu/rtu_serial_io.c **** 
 111              		.loc 1 106 0
 112 004a 0024     		movs	r4, #0
 113              	.LVL13:
 114              	.L3:
 139:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 140:../system/src/modbus_rtu/rtu_serial_io.c **** 	}
 141:../system/src/modbus_rtu/rtu_serial_io.c **** 
 142:../system/src/modbus_rtu/rtu_serial_io.c **** 	return retval;
 143:../system/src/modbus_rtu/rtu_serial_io.c **** }
 115              		.loc 1 143 0
 116 004c 2046     		mov	r0, r4
 117              	.LVL14:
 118 004e 5DF8044B 		ldr	r4, [sp], #4
 119              		.cfi_remember_state
 120              		.cfi_restore 4
 121              		.cfi_def_cfa_offset 0
 122              	.LVL15:
 123 0052 7047     		bx	lr
 124              	.LVL16:
 125              	.L9:
 126              		.cfi_restore_state
 135:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 127              		.loc 1 135 0
 128 0054 0124     		movs	r4, #1
 129 0056 F9E7     		b	.L3
 130              	.L14:
 131              		.align	2
 132              	.L13:
 133 0058 00000000 		.word	.LANCHOR0
 134 005c 00000000 		.word	.LANCHOR1
 135              		.cfi_endproc
 136              	.LFE404:
 138              		.section	.text.rtu_serial_init,"ax",%progbits
 139              		.align	1
 140              		.global	rtu_serial_init
 141              		.syntax unified
 142              		.thumb
 143              		.thumb_func
 144              		.fpu fpv4-sp-d16
 146              	rtu_serial_init:
 147              	.LFB405:
 144:../system/src/modbus_rtu/rtu_serial_io.c **** 
 145:../system/src/modbus_rtu/rtu_serial_io.c **** int32_t rtu_serial_init(rtu_pool_queue_t* queue, uint8_t io_mode, srl_context_t* serial_context, co
 148              		.loc 1 145 0
 149              		.cfi_startproc
 150              		@ args = 0, pretend = 0, frame = 0
 151              		@ frame_needed = 0, uses_anonymous_args = 0
 152              	.LVL17:
 153 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 154              		.cfi_def_cfa_offset 24
 155              		.cfi_offset 3, -24
 156              		.cfi_offset 4, -20
 157              		.cfi_offset 5, -16
 158              		.cfi_offset 6, -12
 159              		.cfi_offset 7, -8
 160              		.cfi_offset 14, -4
 161 0002 0546     		mov	r5, r0
 162 0004 0F46     		mov	r7, r1
 163 0006 1646     		mov	r6, r2
 164 0008 1C46     		mov	r4, r3
 165              	.LVL18:
 146:../system/src/modbus_rtu/rtu_serial_io.c **** 
 147:../system/src/modbus_rtu/rtu_serial_io.c **** 	int32_t retval = MODBUS_RET_UNINITIALIZED;
 148:../system/src/modbus_rtu/rtu_serial_io.c **** 
 149:../system/src/modbus_rtu/rtu_serial_io.c **** 	// zeroing the content of the structure
 150:../system/src/modbus_rtu/rtu_serial_io.c **** 	memset(queue, 0x00, sizeof(rtu_pool_queue_t));
 166              		.loc 1 150 0
 167 000a 4422     		movs	r2, #68
 168              	.LVL19:
 169 000c 0021     		movs	r1, #0
 170              	.LVL20:
 171 000e FFF7FEFF 		bl	memset
 172              	.LVL21:
 151:../system/src/modbus_rtu/rtu_serial_io.c **** 
 152:../system/src/modbus_rtu/rtu_serial_io.c **** 	rtu_blocking_io = io_mode;
 173              		.loc 1 152 0
 174 0012 284B     		ldr	r3, .L17
 175 0014 1F70     		strb	r7, [r3]
 153:../system/src/modbus_rtu/rtu_serial_io.c **** 
 154:../system/src/modbus_rtu/rtu_serial_io.c **** 	rtu_used_queue = queue;
 176              		.loc 1 154 0
 177 0016 284B     		ldr	r3, .L17+4
 178 0018 1D60     		str	r5, [r3]
 155:../system/src/modbus_rtu/rtu_serial_io.c **** 
 156:../system/src/modbus_rtu/rtu_serial_io.c **** 	rtu_used_serial_context = serial_context;
 179              		.loc 1 156 0
 180 001a 284B     		ldr	r3, .L17+8
 181 001c 1E60     		str	r6, [r3]
 157:../system/src/modbus_rtu/rtu_serial_io.c **** 
 158:../system/src/modbus_rtu/rtu_serial_io.c **** //#ifdef _MODBUS_RTU
 159:../system/src/modbus_rtu/rtu_serial_io.c **** 
 160:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_id[0] = config->slave_1_function;
 182              		.loc 1 160 0
 183 001e 237B     		ldrb	r3, [r4, #12]	@ zero_extendqisi2
 184 0020 6B70     		strb	r3, [r5, #1]
 161:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_parameter[0] = &rte_wx_modbus_rtu_f1;
 185              		.loc 1 161 0
 186 0022 274B     		ldr	r3, .L17+12
 187 0024 AB60     		str	r3, [r5, #8]
 162:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f1.slave_address = config->slave_1_bus_address;
 188              		.loc 1 162 0
 189 0026 E27A     		ldrb	r2, [r4, #11]	@ zero_extendqisi2
 190 0028 1A80     		strh	r2, [r3]	@ movhi
 163:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f1.base_address = config->slave_1_register_address;
 191              		.loc 1 163 0
 192 002a E289     		ldrh	r2, [r4, #14]
 193 002c 9A80     		strh	r2, [r3, #4]	@ movhi
 164:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f1.number_of_registers = config->slave_1_lenght;
 194              		.loc 1 164 0
 195 002e 228A     		ldrh	r2, [r4, #16]
 196 0030 9A70     		strb	r2, [r3, #2]
 165:../system/src/modbus_rtu/rtu_serial_io.c **** 
 166:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_id[1] =config->slave_2_function;;
 197              		.loc 1 166 0
 198 0032 237E     		ldrb	r3, [r4, #24]	@ zero_extendqisi2
 199 0034 AB70     		strb	r3, [r5, #2]
 167:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_parameter[1] = &rte_wx_modbus_rtu_f2;
 200              		.loc 1 167 0
 201 0036 234B     		ldr	r3, .L17+16
 202 0038 EB60     		str	r3, [r5, #12]
 168:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f2.slave_address = config->slave_2_bus_address;
 203              		.loc 1 168 0
 204 003a E27D     		ldrb	r2, [r4, #23]	@ zero_extendqisi2
 205 003c 1A80     		strh	r2, [r3]	@ movhi
 169:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f2.base_address = config->slave_2_register_address;
 206              		.loc 1 169 0
 207 003e 628B     		ldrh	r2, [r4, #26]
 208 0040 9A80     		strh	r2, [r3, #4]	@ movhi
 170:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f2.number_of_registers = config->slave_2_lenght;
 209              		.loc 1 170 0
 210 0042 A28B     		ldrh	r2, [r4, #28]
 211 0044 9A70     		strb	r2, [r3, #2]
 171:../system/src/modbus_rtu/rtu_serial_io.c **** 
 172:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_id[2] =config->slave_3_function;;
 212              		.loc 1 172 0
 213 0046 94F82430 		ldrb	r3, [r4, #36]	@ zero_extendqisi2
 214 004a EB70     		strb	r3, [r5, #3]
 173:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_parameter[2] = &rte_wx_modbus_rtu_f3;
 215              		.loc 1 173 0
 216 004c 1E4B     		ldr	r3, .L17+20
 217 004e 2B61     		str	r3, [r5, #16]
 174:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f3.slave_address = config->slave_3_bus_address;
 218              		.loc 1 174 0
 219 0050 94F82320 		ldrb	r2, [r4, #35]	@ zero_extendqisi2
 220 0054 1A80     		strh	r2, [r3]	@ movhi
 175:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f3.base_address = config->slave_3_register_address;
 221              		.loc 1 175 0
 222 0056 E28C     		ldrh	r2, [r4, #38]
 223 0058 9A80     		strh	r2, [r3, #4]	@ movhi
 176:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f3.number_of_registers = config->slave_3_lenght;
 224              		.loc 1 176 0
 225 005a 228D     		ldrh	r2, [r4, #40]
 226 005c 9A70     		strb	r2, [r3, #2]
 177:../system/src/modbus_rtu/rtu_serial_io.c **** 
 178:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_id[3] =config->slave_4_function;;
 227              		.loc 1 178 0
 228 005e 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 229 0062 2B71     		strb	r3, [r5, #4]
 179:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_parameter[3] = &rte_wx_modbus_rtu_f4;
 230              		.loc 1 179 0
 231 0064 194B     		ldr	r3, .L17+24
 232 0066 6B61     		str	r3, [r5, #20]
 180:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f4.slave_address = config->slave_4_bus_address;
 233              		.loc 1 180 0
 234 0068 94F82F20 		ldrb	r2, [r4, #47]	@ zero_extendqisi2
 235 006c 1A80     		strh	r2, [r3]	@ movhi
 181:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f4.base_address = config->slave_4_register_address;
 236              		.loc 1 181 0
 237 006e 628E     		ldrh	r2, [r4, #50]
 238 0070 9A80     		strh	r2, [r3, #4]	@ movhi
 182:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f4.number_of_registers = config->slave_4_lenght;
 239              		.loc 1 182 0
 240 0072 A28E     		ldrh	r2, [r4, #52]
 241 0074 9A70     		strb	r2, [r3, #2]
 183:../system/src/modbus_rtu/rtu_serial_io.c **** 
 184:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_id[4] =config->slave_5_function;;
 242              		.loc 1 184 0
 243 0076 94F83C30 		ldrb	r3, [r4, #60]	@ zero_extendqisi2
 244 007a 6B71     		strb	r3, [r5, #5]
 185:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_parameter[4] = &rte_wx_modbus_rtu_f5;
 245              		.loc 1 185 0
 246 007c 144B     		ldr	r3, .L17+28
 247 007e AB61     		str	r3, [r5, #24]
 186:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f5.slave_address = config->slave_5_bus_address;
 248              		.loc 1 186 0
 249 0080 94F83B20 		ldrb	r2, [r4, #59]	@ zero_extendqisi2
 250 0084 1A80     		strh	r2, [r3]	@ movhi
 187:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f5.base_address = config->slave_5_register_address;
 251              		.loc 1 187 0
 252 0086 E28F     		ldrh	r2, [r4, #62]
 253 0088 9A80     		strh	r2, [r3, #4]	@ movhi
 188:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f5.number_of_registers = config->slave_5_lenght;
 254              		.loc 1 188 0
 255 008a B4F84020 		ldrh	r2, [r4, #64]
 256 008e 9A70     		strb	r2, [r3, #2]
 189:../system/src/modbus_rtu/rtu_serial_io.c **** 
 190:../system/src/modbus_rtu/rtu_serial_io.c **** 
 191:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_id[5] =config->slave_6_function;;
 257              		.loc 1 191 0
 258 0090 94F84830 		ldrb	r3, [r4, #72]	@ zero_extendqisi2
 259 0094 AB71     		strb	r3, [r5, #6]
 192:../system/src/modbus_rtu/rtu_serial_io.c **** 	queue->function_parameter[5] = &rte_wx_modbus_rtu_f6;
 260              		.loc 1 192 0
 261 0096 0F4B     		ldr	r3, .L17+32
 262 0098 EB61     		str	r3, [r5, #28]
 193:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f6.slave_address = config->slave_6_bus_address;
 263              		.loc 1 193 0
 264 009a 94F84720 		ldrb	r2, [r4, #71]	@ zero_extendqisi2
 265 009e 1A80     		strh	r2, [r3]	@ movhi
 194:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f6.base_address = config->slave_6_register_address;
 266              		.loc 1 194 0
 267 00a0 B4F84A20 		ldrh	r2, [r4, #74]
 268 00a4 9A80     		strh	r2, [r3, #4]	@ movhi
 195:../system/src/modbus_rtu/rtu_serial_io.c **** 	rte_wx_modbus_rtu_f6.number_of_registers = config->slave_6_lenght;
 269              		.loc 1 195 0
 270 00a6 B4F84C20 		ldrh	r2, [r4, #76]
 271 00aa 9A70     		strb	r2, [r3, #2]
 196:../system/src/modbus_rtu/rtu_serial_io.c **** 
 197:../system/src/modbus_rtu/rtu_serial_io.c **** 
 198:../system/src/modbus_rtu/rtu_serial_io.c **** //#endif
 199:../system/src/modbus_rtu/rtu_serial_io.c **** 
 200:../system/src/modbus_rtu/rtu_serial_io.c **** 	return retval;
 201:../system/src/modbus_rtu/rtu_serial_io.c **** 
 202:../system/src/modbus_rtu/rtu_serial_io.c **** }
 272              		.loc 1 202 0
 273 00ac 4FF0FF30 		mov	r0, #-1
 274 00b0 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 275              	.LVL22:
 276              	.L18:
 277 00b2 00BF     		.align	2
 278              	.L17:
 279 00b4 00000000 		.word	.LANCHOR2
 280 00b8 00000000 		.word	rtu_used_queue
 281 00bc 00000000 		.word	rtu_used_serial_context
 282 00c0 00000000 		.word	rte_wx_modbus_rtu_f1
 283 00c4 00000000 		.word	rte_wx_modbus_rtu_f2
 284 00c8 00000000 		.word	rte_wx_modbus_rtu_f3
 285 00cc 00000000 		.word	rte_wx_modbus_rtu_f4
 286 00d0 00000000 		.word	rte_wx_modbus_rtu_f5
 287 00d4 00000000 		.word	rte_wx_modbus_rtu_f6
 288              		.cfi_endproc
 289              	.LFE405:
 291              		.section	.text.rtu_serial_blocking_io,"ax",%progbits
 292              		.align	1
 293              		.global	rtu_serial_blocking_io
 294              		.syntax unified
 295              		.thumb
 296              		.thumb_func
 297              		.fpu fpv4-sp-d16
 299              	rtu_serial_blocking_io:
 300              	.LFB407:
 203:../system/src/modbus_rtu/rtu_serial_io.c **** 
 204:../system/src/modbus_rtu/rtu_serial_io.c **** int32_t rtu_serial_pool(void) {
 205:../system/src/modbus_rtu/rtu_serial_io.c **** 
 206:../system/src/modbus_rtu/rtu_serial_io.c **** 	int32_t retval = MODBUS_RET_UNINITIALIZED;
 207:../system/src/modbus_rtu/rtu_serial_io.c **** //#ifdef _MODBUS_RTU
 208:../system/src/modbus_rtu/rtu_serial_io.c **** 	int32_t result = MODBUS_RET_UNINITIALIZED;
 209:../system/src/modbus_rtu/rtu_serial_io.c **** 
 210:../system/src/modbus_rtu/rtu_serial_io.c **** 	uint8_t output_data_lenght = 0;
 211:../system/src/modbus_rtu/rtu_serial_io.c **** 
 212:../system/src/modbus_rtu/rtu_serial_io.c **** 	rtu_register_data_t* ptr_func_03;
 213:../system/src/modbus_rtu/rtu_serial_io.c **** 
 214:../system/src/modbus_rtu/rtu_serial_io.c **** 	// if there were any serial I/O error
 215:../system/src/modbus_rtu/rtu_serial_io.c **** 	if (rte_rtu_number_of_serial_io_errors > 0) {
 216:../system/src/modbus_rtu/rtu_serial_io.c **** 
 217:../system/src/modbus_rtu/rtu_serial_io.c **** 		// check how many serial I/O erros have been detected so far
 218:../system/src/modbus_rtu/rtu_serial_io.c **** 		if ((rte_rtu_number_of_serial_io_errors % RTU_NUMBER_OF_ERRORS_TO_TRIG_STATUS) == 0) {
 219:../system/src/modbus_rtu/rtu_serial_io.c **** 			// set the status trigger
 220:../system/src/modbus_rtu/rtu_serial_io.c **** 			rte_main_trigger_modbus_status = 1;
 221:../system/src/modbus_rtu/rtu_serial_io.c **** 
 222:../system/src/modbus_rtu/rtu_serial_io.c **** 			// increment the error counter artificially to protect sending status in the loop
 223:../system/src/modbus_rtu/rtu_serial_io.c **** 			rte_rtu_number_of_serial_io_errors++;
 224:../system/src/modbus_rtu/rtu_serial_io.c **** 
 225:../system/src/modbus_rtu/rtu_serial_io.c **** 			// stupid workaround. If there is a lot of I/O errors reset the controller
 226:../system/src/modbus_rtu/rtu_serial_io.c **** 
 227:../system/src/modbus_rtu/rtu_serial_io.c **** 			if (rte_rtu_number_of_serial_io_errors >= (0xFF - RTU_NUMBER_OF_ERRORS_TO_TRIG_STATUS))
 228:../system/src/modbus_rtu/rtu_serial_io.c **** 			{
 229:../system/src/modbus_rtu/rtu_serial_io.c **** 				rte_main_reboot_req = 1;
 230:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 231:../system/src/modbus_rtu/rtu_serial_io.c **** 
 232:../system/src/modbus_rtu/rtu_serial_io.c **** 			// latch the current value of last successfull communication
 233:../system/src/modbus_rtu/rtu_serial_io.c **** 			rtu_time_of_last_succ_comm_at_previous_error_status = rtu_time_of_last_successfull_comm;
 234:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 235:../system/src/modbus_rtu/rtu_serial_io.c **** 	}
 236:../system/src/modbus_rtu/rtu_serial_io.c **** 
 237:../system/src/modbus_rtu/rtu_serial_io.c **** 	if (rtu_used_queue->it >= RTU_POOL_QUEUE_LENGHT) {
 238:../system/src/modbus_rtu/rtu_serial_io.c **** 		rtu_used_queue->it = 0;
 239:../system/src/modbus_rtu/rtu_serial_io.c **** 
 240:../system/src/modbus_rtu/rtu_serial_io.c **** 		// all queued modbus functions have been serviced
 241:../system/src/modbus_rtu/rtu_serial_io.c **** 		rtu_pool_state = RTU_POOL_STOP;
 242:../system/src/modbus_rtu/rtu_serial_io.c **** 	}
 243:../system/src/modbus_rtu/rtu_serial_io.c **** 
 244:../system/src/modbus_rtu/rtu_serial_io.c **** 	switch (rtu_pool_state) {
 245:../system/src/modbus_rtu/rtu_serial_io.c **** 		case RTU_POOL_IDLE: {
 246:../system/src/modbus_rtu/rtu_serial_io.c **** 
 247:../system/src/modbus_rtu/rtu_serial_io.c **** 			// initialize the serial port.
 248:../system/src/modbus_rtu/rtu_serial_io.c **** 			srl_init(	rtu_used_serial_context,
 249:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_used_serial_context->port,
 250:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_used_serial_context->srl_rx_buf_pointer,
 251:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_used_serial_context->srl_rx_buf_ln,
 252:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_used_serial_context->srl_tx_buf_pointer,
 253:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_used_serial_context->srl_tx_buf_ln,
 254:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_used_serial_context->port_baurate,
 255:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_used_serial_context->port_stopbits);
 256:../system/src/modbus_rtu/rtu_serial_io.c **** 
 257:../system/src/modbus_rtu/rtu_serial_io.c **** 			// Enabling the timeout for Modbus-RTU.
 258:../system/src/modbus_rtu/rtu_serial_io.c **** 			// This timeout starts after first received byte and triggers if
 259:../system/src/modbus_rtu/rtu_serial_io.c **** 			// the slave will hang up and stop the transmission before the end of the frame
 260:../system/src/modbus_rtu/rtu_serial_io.c **** 			// It doesn't need to be called each time but this is the only function which takes
 261:../system/src/modbus_rtu/rtu_serial_io.c **** 			// the pointer to serial context
 262:../system/src/modbus_rtu/rtu_serial_io.c **** 			srl_switch_timeout(rtu_used_serial_context, 1, 0);
 263:../system/src/modbus_rtu/rtu_serial_io.c **** 
 264:../system/src/modbus_rtu/rtu_serial_io.c **** 			srl_switch_tx_delay(rtu_used_serial_context, 1);
 265:../system/src/modbus_rtu/rtu_serial_io.c **** 
 266:../system/src/modbus_rtu/rtu_serial_io.c **** 			// check the function it at current queue position
 267:../system/src/modbus_rtu/rtu_serial_io.c **** 			if (rtu_used_queue->function_id[rtu_used_queue->it] == 0x03) {
 268:../system/src/modbus_rtu/rtu_serial_io.c **** 				// read holding registers
 269:../system/src/modbus_rtu/rtu_serial_io.c **** 				ptr_func_03 = ((rtu_register_data_t*)rtu_used_queue->function_parameter[rtu_used_queue->it]);
 270:../system/src/modbus_rtu/rtu_serial_io.c **** 
 271:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_current_03_slave_address = ptr_func_03->slave_address;
 272:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_current_03_base_register = ptr_func_03->base_address;
 273:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_current_03_number_of_registers = ptr_func_03->number_of_registers;
 274:../system/src/modbus_rtu/rtu_serial_io.c **** 
 275:../system/src/modbus_rtu/rtu_serial_io.c **** 				// generate request content
 276:../system/src/modbus_rtu/rtu_serial_io.c **** 				result = rtu_request_03_04_registers(
 277:../system/src/modbus_rtu/rtu_serial_io.c **** 						1,
 278:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_used_serial_context->srl_tx_buf_pointer,
 279:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_used_serial_context->srl_tx_buf_ln,
 280:../system/src/modbus_rtu/rtu_serial_io.c **** 						&output_data_lenght,
 281:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_current_03_slave_address,
 282:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_current_03_base_register,
 283:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_current_03_number_of_registers);
 284:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 285:../system/src/modbus_rtu/rtu_serial_io.c **** 			else if (rtu_used_queue->function_id[rtu_used_queue->it] == 0x04) {
 286:../system/src/modbus_rtu/rtu_serial_io.c **** 				// read input registers
 287:../system/src/modbus_rtu/rtu_serial_io.c **** 
 288:../system/src/modbus_rtu/rtu_serial_io.c **** 				// generate request content
 289:../system/src/modbus_rtu/rtu_serial_io.c **** 				result = rtu_request_03_04_registers(
 290:../system/src/modbus_rtu/rtu_serial_io.c **** 						0,
 291:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_used_serial_context->srl_tx_buf_pointer,
 292:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_used_serial_context->srl_tx_buf_ln,
 293:../system/src/modbus_rtu/rtu_serial_io.c **** 						&output_data_lenght,
 294:../system/src/modbus_rtu/rtu_serial_io.c **** 						((rtu_register_data_t*)rtu_used_queue->function_parameter[rtu_used_queue->it])->slave_address
 295:../system/src/modbus_rtu/rtu_serial_io.c **** 						((rtu_register_data_t*)rtu_used_queue->function_parameter[rtu_used_queue->it])->base_address,
 296:../system/src/modbus_rtu/rtu_serial_io.c **** 						((rtu_register_data_t*)rtu_used_queue->function_parameter[rtu_used_queue->it])->number_of_reg
 297:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 298:../system/src/modbus_rtu/rtu_serial_io.c **** 			else {
 299:../system/src/modbus_rtu/rtu_serial_io.c **** 				// any other unsupported or wrong function id. It will also stop at the last element
 300:../system/src/modbus_rtu/rtu_serial_io.c **** 				// on the last element of the queue
 301:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_pool_state = RTU_POOL_STOP;
 302:../system/src/modbus_rtu/rtu_serial_io.c **** 
 303:../system/src/modbus_rtu/rtu_serial_io.c **** 				// rewind the iterator back to the begining
 304:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_used_queue->it = 0;
 305:../system/src/modbus_rtu/rtu_serial_io.c **** 
 306:../system/src/modbus_rtu/rtu_serial_io.c **** 				retval = MODBUS_RET_WRONG_FUNCTION;
 307:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 308:../system/src/modbus_rtu/rtu_serial_io.c **** 
 309:../system/src/modbus_rtu/rtu_serial_io.c **** 
 310:../system/src/modbus_rtu/rtu_serial_io.c **** 			// if request has been generated correctly
 311:../system/src/modbus_rtu/rtu_serial_io.c **** 			if (result == MODBUS_RET_OK) {
 312:../system/src/modbus_rtu/rtu_serial_io.c **** 
 313:../system/src/modbus_rtu/rtu_serial_io.c **** 				// check if block I/O mode shall be used for the communication
 314:../system/src/modbus_rtu/rtu_serial_io.c **** 				if (rtu_blocking_io) {
 315:../system/src/modbus_rtu/rtu_serial_io.c **** 					// call the function which will process the same stuff than
 316:../system/src/modbus_rtu/rtu_serial_io.c **** 					// RTU_POOL_IDLE (from transmitting), RTU_POOL_TRANSMITTING
 317:../system/src/modbus_rtu/rtu_serial_io.c **** 					// and partially RTU_POOL_RECEIVING
 318:../system/src/modbus_rtu/rtu_serial_io.c **** 					result = rtu_serial_blocking_io(rtu_used_serial_context, output_data_lenght);
 319:../system/src/modbus_rtu/rtu_serial_io.c **** 
 320:../system/src/modbus_rtu/rtu_serial_io.c **** 					if (result == MODBUS_RET_OK) {
 321:../system/src/modbus_rtu/rtu_serial_io.c **** 						// if transmission and reception was successful switch to the
 322:../system/src/modbus_rtu/rtu_serial_io.c **** 						// receiving state. The 'serial_context->srl_rx_state' will be
 323:../system/src/modbus_rtu/rtu_serial_io.c **** 						// alredy set to 'SRL_RX_DONE'
 324:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_pool_state = RTU_POOL_RECEIVING;
 325:../system/src/modbus_rtu/rtu_serial_io.c **** 					}
 326:../system/src/modbus_rtu/rtu_serial_io.c **** 					else {
 327:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_pool_state = RTU_POOL_RECEIVE_ERROR;
 328:../system/src/modbus_rtu/rtu_serial_io.c **** 					}
 329:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 330:../system/src/modbus_rtu/rtu_serial_io.c **** 				else {
 331:../system/src/modbus_rtu/rtu_serial_io.c **** 					// trigger the transmission itself
 332:../system/src/modbus_rtu/rtu_serial_io.c **** 					result = srl_start_tx(rtu_used_serial_context, output_data_lenght);
 333:../system/src/modbus_rtu/rtu_serial_io.c **** 
 334:../system/src/modbus_rtu/rtu_serial_io.c **** 					// reset the CRC value to default
 335:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_serial_previous_crc = 0xFFFF;
 336:../system/src/modbus_rtu/rtu_serial_io.c **** 
 337:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_waiting_for_slave_addr = 1;
 338:../system/src/modbus_rtu/rtu_serial_io.c **** 
 339:../system/src/modbus_rtu/rtu_serial_io.c **** 					// if serial transmission has been starter
 340:../system/src/modbus_rtu/rtu_serial_io.c **** 					if (result == SRL_OK) {
 341:../system/src/modbus_rtu/rtu_serial_io.c **** 						// proceed to the next state (transmitting)
 342:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_pool_state = RTU_POOL_TRANSMITTING;
 343:../system/src/modbus_rtu/rtu_serial_io.c **** 
 344:../system/src/modbus_rtu/rtu_serial_io.c **** 						retval = MODBUS_RET_OK;
 345:../system/src/modbus_rtu/rtu_serial_io.c **** 					}
 346:../system/src/modbus_rtu/rtu_serial_io.c **** 					else {
 347:../system/src/modbus_rtu/rtu_serial_io.c **** 						// if not do nothing and try in next pooler call
 348:../system/src/modbus_rtu/rtu_serial_io.c **** 						;
 349:../system/src/modbus_rtu/rtu_serial_io.c **** 					}
 350:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 351:../system/src/modbus_rtu/rtu_serial_io.c **** 
 352:../system/src/modbus_rtu/rtu_serial_io.c **** 
 353:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 354:../system/src/modbus_rtu/rtu_serial_io.c **** 			else {
 355:../system/src/modbus_rtu/rtu_serial_io.c **** 				retval = MODBUS_RET_REQUEST_GEN_ERR;
 356:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 357:../system/src/modbus_rtu/rtu_serial_io.c **** 
 358:../system/src/modbus_rtu/rtu_serial_io.c **** 			break;
 359:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 360:../system/src/modbus_rtu/rtu_serial_io.c **** 		case RTU_POOL_TRANSMITTING: {
 361:../system/src/modbus_rtu/rtu_serial_io.c **** 
 362:../system/src/modbus_rtu/rtu_serial_io.c **** 			// if transmission is still pending
 363:../system/src/modbus_rtu/rtu_serial_io.c **** 			if (rtu_used_serial_context->srl_tx_state == SRL_TXING || rtu_used_serial_context->srl_tx_state 
 364:../system/src/modbus_rtu/rtu_serial_io.c **** 				// wait until it will finish
 365:../system/src/modbus_rtu/rtu_serial_io.c **** 				;
 366:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 367:../system/src/modbus_rtu/rtu_serial_io.c **** 			else {
 368:../system/src/modbus_rtu/rtu_serial_io.c **** 				// trigger reception
 369:../system/src/modbus_rtu/rtu_serial_io.c **** 				srl_receive_data_with_callback(rtu_used_serial_context, rtu_serial_callback);
 370:../system/src/modbus_rtu/rtu_serial_io.c **** 
 371:../system/src/modbus_rtu/rtu_serial_io.c **** 				// enable the timeout in case the RTU slave won't respond
 372:../system/src/modbus_rtu/rtu_serial_io.c **** 				// at all or there is no slaves connected to RS485 bus
 373:../system/src/modbus_rtu/rtu_serial_io.c **** 				srl_switch_timeout_for_waiting(rtu_used_serial_context, 1);
 374:../system/src/modbus_rtu/rtu_serial_io.c **** 
 375:../system/src/modbus_rtu/rtu_serial_io.c **** 				// switch the state
 376:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_pool_state = RTU_POOL_RECEIVING;
 377:../system/src/modbus_rtu/rtu_serial_io.c **** 
 378:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 379:../system/src/modbus_rtu/rtu_serial_io.c **** 
 380:../system/src/modbus_rtu/rtu_serial_io.c **** 			retval = MODBUS_RET_OK;
 381:../system/src/modbus_rtu/rtu_serial_io.c **** 
 382:../system/src/modbus_rtu/rtu_serial_io.c **** 			break;
 383:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 384:../system/src/modbus_rtu/rtu_serial_io.c **** 		case RTU_POOL_RECEIVING: {
 385:../system/src/modbus_rtu/rtu_serial_io.c **** 
 386:../system/src/modbus_rtu/rtu_serial_io.c **** 			// if data reception still took place
 387:../system/src/modbus_rtu/rtu_serial_io.c **** 			if (rtu_used_serial_context->srl_rx_state == SRL_WAITING_TO_RX || rtu_used_serial_context->srl_r
 388:../system/src/modbus_rtu/rtu_serial_io.c **** 				// wait
 389:../system/src/modbus_rtu/rtu_serial_io.c **** 				;
 390:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 391:../system/src/modbus_rtu/rtu_serial_io.c **** 			else if (rtu_used_serial_context->srl_rx_state == SRL_RX_DONE) {
 392:../system/src/modbus_rtu/rtu_serial_io.c **** 				// parse the response from RTU slave // here there is a problem with changing slave address
 393:../system/src/modbus_rtu/rtu_serial_io.c **** 				if (rtu_used_queue->function_id[rtu_used_queue->it] == 0x03 || rtu_used_queue->function_id[rtu_
 394:../system/src/modbus_rtu/rtu_serial_io.c **** 					result = rtu_parser_03_04_registers(
 395:../system/src/modbus_rtu/rtu_serial_io.c **** 							rtu_used_serial_context->srl_rx_buf_pointer,
 396:../system/src/modbus_rtu/rtu_serial_io.c **** 							rtu_used_serial_context->srl_rx_bytes_counter,
 397:../system/src/modbus_rtu/rtu_serial_io.c **** 							((rtu_register_data_t*)rtu_used_queue->function_parameter[rtu_used_queue->it]),
 398:../system/src/modbus_rtu/rtu_serial_io.c **** 							&rte_rtu_last_modbus_exception);
 399:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 400:../system/src/modbus_rtu/rtu_serial_io.c **** 				else {
 401:../system/src/modbus_rtu/rtu_serial_io.c **** 					retval = MODBUS_RET_WRONG_FUNCTION;
 402:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 403:../system/src/modbus_rtu/rtu_serial_io.c **** 
 404:../system/src/modbus_rtu/rtu_serial_io.c **** 				// check parsing result
 405:../system/src/modbus_rtu/rtu_serial_io.c **** 				if (result == MODBUS_RET_OK) {
 406:../system/src/modbus_rtu/rtu_serial_io.c **** 					// store the current time
 407:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_used_queue->last_successfull_call_to_function[rtu_used_queue->it] = main_get_master_time()
 408:../system/src/modbus_rtu/rtu_serial_io.c **** 
 409:../system/src/modbus_rtu/rtu_serial_io.c **** 					// switch the state to inter-frame silence period
 410:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_pool_state = RTU_POOL_WAIT_AFTER_RECEIVE;
 411:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 412:../system/src/modbus_rtu/rtu_serial_io.c **** 				else if (result == MODBUS_RET_GOT_EXCEPTION) {
 413:../system/src/modbus_rtu/rtu_serial_io.c **** 					// in case of an excetpion store the current timestamp
 414:../system/src/modbus_rtu/rtu_serial_io.c **** 					rte_rtu_last_modbus_exception_timestamp = main_get_master_time();
 415:../system/src/modbus_rtu/rtu_serial_io.c **** 
 416:../system/src/modbus_rtu/rtu_serial_io.c **** 					// switch the state to inter-frame silence period
 417:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_pool_state = RTU_POOL_WAIT_AFTER_RECEIVE;
 418:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 419:../system/src/modbus_rtu/rtu_serial_io.c **** 				else {
 420:../system/src/modbus_rtu/rtu_serial_io.c **** 					// Receive error state will switch to the next function
 421:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_pool_state = RTU_POOL_RECEIVE_ERROR;
 422:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 423:../system/src/modbus_rtu/rtu_serial_io.c **** 
 424:../system/src/modbus_rtu/rtu_serial_io.c **** 				// get current time to start the inter-frame delay
 425:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_time_of_last_successfull_comm = main_get_master_time();
 426:../system/src/modbus_rtu/rtu_serial_io.c **** 
 427:../system/src/modbus_rtu/rtu_serial_io.c **** 				rte_rtu_number_of_successfull_serial_comm++;
 428:../system/src/modbus_rtu/rtu_serial_io.c **** 
 429:../system/src/modbus_rtu/rtu_serial_io.c **** 				// Close the serial port. This is a part of the stupid workaround of the problem
 430:../system/src/modbus_rtu/rtu_serial_io.c **** 				// with a serial port which leads to receiving a lot of idle frames of unknown origin
 431:../system/src/modbus_rtu/rtu_serial_io.c **** 				// and corrupting some part of data at the begining of some Modbus-RTU frames
 432:../system/src/modbus_rtu/rtu_serial_io.c **** 				srl_close(rtu_used_serial_context);
 433:../system/src/modbus_rtu/rtu_serial_io.c **** 
 434:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 435:../system/src/modbus_rtu/rtu_serial_io.c **** 
 436:../system/src/modbus_rtu/rtu_serial_io.c **** 			// in case of any error during data reception or the serial driver have fallen into unknown & un
 437:../system/src/modbus_rtu/rtu_serial_io.c **** 			// state
 438:../system/src/modbus_rtu/rtu_serial_io.c **** 			else {
 439:../system/src/modbus_rtu/rtu_serial_io.c **** 
 440:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_pool_state = RTU_POOL_RECEIVE_ERROR;
 441:../system/src/modbus_rtu/rtu_serial_io.c **** 
 442:../system/src/modbus_rtu/rtu_serial_io.c **** 				srl_close(rtu_used_serial_context);
 443:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 444:../system/src/modbus_rtu/rtu_serial_io.c **** 
 445:../system/src/modbus_rtu/rtu_serial_io.c **** 			break;
 446:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 447:../system/src/modbus_rtu/rtu_serial_io.c **** 		case RTU_POOL_WAIT_AFTER_RECEIVE: {
 448:../system/src/modbus_rtu/rtu_serial_io.c **** 
 449:../system/src/modbus_rtu/rtu_serial_io.c **** 			// check if required interframe silence period elapsed
 450:../system/src/modbus_rtu/rtu_serial_io.c **** 			if (main_get_master_time() - rtu_time_of_last_successfull_comm > INTERFRAME_SP) {
 451:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_pool_state = RTU_POOL_IDLE;
 452:../system/src/modbus_rtu/rtu_serial_io.c **** 
 453:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_used_queue->it++;
 454:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 455:../system/src/modbus_rtu/rtu_serial_io.c **** 			break;
 456:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 457:../system/src/modbus_rtu/rtu_serial_io.c **** 		case RTU_POOL_RECEIVE_ERROR: {
 458:../system/src/modbus_rtu/rtu_serial_io.c **** 			// if the response from the slave was corrupted or any other serial I/O error
 459:../system/src/modbus_rtu/rtu_serial_io.c **** 			// occured switch to the next function in the queue
 460:../system/src/modbus_rtu/rtu_serial_io.c **** 			rtu_pool_state = RTU_POOL_IDLE;
 461:../system/src/modbus_rtu/rtu_serial_io.c **** 
 462:../system/src/modbus_rtu/rtu_serial_io.c **** 			// increasing the global counter of io errors
 463:../system/src/modbus_rtu/rtu_serial_io.c **** 			rte_rtu_number_of_serial_io_errors++;
 464:../system/src/modbus_rtu/rtu_serial_io.c **** 
 465:../system/src/modbus_rtu/rtu_serial_io.c **** 			rte_rtu_last_modbus_rx_error_timestamp = main_get_master_time();
 466:../system/src/modbus_rtu/rtu_serial_io.c **** 
 467:../system/src/modbus_rtu/rtu_serial_io.c **** 			// icrease the error counter for this queue element
 468:../system/src/modbus_rtu/rtu_serial_io.c **** 			rtu_used_queue->number_of_errors[rtu_used_queue->it] = rtu_used_queue->number_of_errors[rtu_used
 469:../system/src/modbus_rtu/rtu_serial_io.c **** 
 470:../system/src/modbus_rtu/rtu_serial_io.c **** 			// move to the next function queued
 471:../system/src/modbus_rtu/rtu_serial_io.c **** 			rtu_used_queue->it++;
 472:../system/src/modbus_rtu/rtu_serial_io.c **** 
 473:../system/src/modbus_rtu/rtu_serial_io.c **** 			retval = MODBUS_RET_OK;
 474:../system/src/modbus_rtu/rtu_serial_io.c **** 
 475:../system/src/modbus_rtu/rtu_serial_io.c **** 			break;
 476:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 477:../system/src/modbus_rtu/rtu_serial_io.c **** 		case RTU_POOL_STOP: {
 478:../system/src/modbus_rtu/rtu_serial_io.c **** 			break;
 479:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 480:../system/src/modbus_rtu/rtu_serial_io.c **** 		default: {
 481:../system/src/modbus_rtu/rtu_serial_io.c **** 			rtu_pool_state = RTU_POOL_STOP;
 482:../system/src/modbus_rtu/rtu_serial_io.c **** 			break;
 483:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 484:../system/src/modbus_rtu/rtu_serial_io.c **** 	}
 485:../system/src/modbus_rtu/rtu_serial_io.c **** //#endif
 486:../system/src/modbus_rtu/rtu_serial_io.c **** 	return retval;
 487:../system/src/modbus_rtu/rtu_serial_io.c **** }
 488:../system/src/modbus_rtu/rtu_serial_io.c **** 
 489:../system/src/modbus_rtu/rtu_serial_io.c **** int32_t rtu_serial_blocking_io(srl_context_t* serial_context, uint8_t query_ln) {
 301              		.loc 1 489 0
 302              		.cfi_startproc
 303              		@ args = 0, pretend = 0, frame = 8
 304              		@ frame_needed = 0, uses_anonymous_args = 0
 305              	.LVL23:
 306 0000 10B5     		push	{r4, lr}
 307              		.cfi_def_cfa_offset 8
 308              		.cfi_offset 4, -8
 309              		.cfi_offset 14, -4
 310 0002 82B0     		sub	sp, sp, #8
 311              		.cfi_def_cfa_offset 16
 312 0004 0446     		mov	r4, r0
 313              	.LVL24:
 490:../system/src/modbus_rtu/rtu_serial_io.c **** 
 491:../system/src/modbus_rtu/rtu_serial_io.c **** 	int32_t retval = MODBUS_RET_UNINITIALIZED;
 492:../system/src/modbus_rtu/rtu_serial_io.c **** 
 493:../system/src/modbus_rtu/rtu_serial_io.c **** 	uint8_t serial_result = SRL_UNINITIALIZED;
 314              		.loc 1 493 0
 315 0006 7F23     		movs	r3, #127
 316 0008 8DF80730 		strb	r3, [sp, #7]
 494:../system/src/modbus_rtu/rtu_serial_io.c **** 
 495:../system/src/modbus_rtu/rtu_serial_io.c **** 	// reset the CRC value to default
 496:../system/src/modbus_rtu/rtu_serial_io.c **** 	rtu_serial_previous_crc = 0xFFFF;
 317              		.loc 1 496 0
 318 000c 164B     		ldr	r3, .L25
 319 000e 4FF6FF72 		movw	r2, #65535
 320 0012 1A80     		strh	r2, [r3]	@ movhi
 497:../system/src/modbus_rtu/rtu_serial_io.c **** 
 498:../system/src/modbus_rtu/rtu_serial_io.c **** 	rtu_waiting_for_slave_addr = 1;
 321              		.loc 1 498 0
 322 0014 154B     		ldr	r3, .L25+4
 323 0016 0122     		movs	r2, #1
 324 0018 1A70     		strb	r2, [r3]
 499:../system/src/modbus_rtu/rtu_serial_io.c **** 
 500:../system/src/modbus_rtu/rtu_serial_io.c **** 	// sending data
 501:../system/src/modbus_rtu/rtu_serial_io.c **** 	serial_result = srl_start_tx(serial_context, query_ln);
 325              		.loc 1 501 0
 326 001a FFF7FEFF 		bl	srl_start_tx
 327              	.LVL25:
 328 001e 8DF80700 		strb	r0, [sp, #7]
 502:../system/src/modbus_rtu/rtu_serial_io.c **** 
 503:../system/src/modbus_rtu/rtu_serial_io.c **** 	// if tx has been triggered successfully
 504:../system/src/modbus_rtu/rtu_serial_io.c **** 	if (serial_result == SRL_OK) {
 329              		.loc 1 504 0
 330 0022 C0B9     		cbnz	r0, .L21
 505:../system/src/modbus_rtu/rtu_serial_io.c **** 
 506:../system/src/modbus_rtu/rtu_serial_io.c **** 		// wait for transmission to complete
 507:../system/src/modbus_rtu/rtu_serial_io.c **** 		srl_wait_for_tx_completion(serial_context);
 331              		.loc 1 507 0
 332 0024 2046     		mov	r0, r4
 333 0026 FFF7FEFF 		bl	srl_wait_for_tx_completion
 334              	.LVL26:
 508:../system/src/modbus_rtu/rtu_serial_io.c **** 
 509:../system/src/modbus_rtu/rtu_serial_io.c **** 		// trigger reception
 510:../system/src/modbus_rtu/rtu_serial_io.c **** 		serial_result = srl_receive_data_with_callback(serial_context, rtu_serial_callback);
 335              		.loc 1 510 0
 336 002a 1149     		ldr	r1, .L25+8
 337 002c 2046     		mov	r0, r4
 338 002e FFF7FEFF 		bl	srl_receive_data_with_callback
 339              	.LVL27:
 340 0032 8DF80700 		strb	r0, [sp, #7]
 511:../system/src/modbus_rtu/rtu_serial_io.c **** 
 512:../system/src/modbus_rtu/rtu_serial_io.c **** 		if (serial_result == SRL_OK) {
 341              		.loc 1 512 0
 342 0036 88B9     		cbnz	r0, .L22
 513:../system/src/modbus_rtu/rtu_serial_io.c **** 
 514:../system/src/modbus_rtu/rtu_serial_io.c **** 			// enable the timeout in case the RTU slave won't respond
 515:../system/src/modbus_rtu/rtu_serial_io.c **** 			// at all or there is no slaves connected to RS485 bus
 516:../system/src/modbus_rtu/rtu_serial_io.c **** 			srl_switch_timeout_for_waiting(serial_context, 1);
 343              		.loc 1 516 0
 344 0038 0121     		movs	r1, #1
 345 003a 2046     		mov	r0, r4
 346 003c FFF7FEFF 		bl	srl_switch_timeout_for_waiting
 347              	.LVL28:
 517:../system/src/modbus_rtu/rtu_serial_io.c **** 
 518:../system/src/modbus_rtu/rtu_serial_io.c **** 			// wait for the slave response
 519:../system/src/modbus_rtu/rtu_serial_io.c **** 			srl_wait_for_rx_completion_or_timeout(serial_context, &serial_result);
 348              		.loc 1 519 0
 349 0040 0DF10701 		add	r1, sp, #7
 350 0044 2046     		mov	r0, r4
 351 0046 FFF7FEFF 		bl	srl_wait_for_rx_completion_or_timeout
 352              	.LVL29:
 520:../system/src/modbus_rtu/rtu_serial_io.c **** 
 521:../system/src/modbus_rtu/rtu_serial_io.c **** 			if (serial_result == SRL_OK) {
 353              		.loc 1 521 0
 354 004a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 355 004e 43B9     		cbnz	r3, .L23
 522:../system/src/modbus_rtu/rtu_serial_io.c **** 				retval = MODBUS_RET_OK;
 356              		.loc 1 522 0
 357 0050 0020     		movs	r0, #0
 358              	.LVL30:
 359              	.L19:
 523:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 524:../system/src/modbus_rtu/rtu_serial_io.c **** 			else {
 525:../system/src/modbus_rtu/rtu_serial_io.c **** 				retval = MODBUS_RET_GOT_EXCEPTION;
 526:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 527:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 528:../system/src/modbus_rtu/rtu_serial_io.c **** 
 529:../system/src/modbus_rtu/rtu_serial_io.c **** 	}
 530:../system/src/modbus_rtu/rtu_serial_io.c **** 
 531:../system/src/modbus_rtu/rtu_serial_io.c **** 	return retval;
 532:../system/src/modbus_rtu/rtu_serial_io.c **** }
 360              		.loc 1 532 0
 361 0052 02B0     		add	sp, sp, #8
 362              		.cfi_remember_state
 363              		.cfi_def_cfa_offset 8
 364              		@ sp needed
 365 0054 10BD     		pop	{r4, pc}
 366              	.LVL31:
 367              	.L21:
 368              		.cfi_restore_state
 491:../system/src/modbus_rtu/rtu_serial_io.c **** 
 369              		.loc 1 491 0
 370 0056 4FF0FF30 		mov	r0, #-1
 371 005a FAE7     		b	.L19
 372              	.L22:
 373 005c 4FF0FF30 		mov	r0, #-1
 374 0060 F7E7     		b	.L19
 375              	.L23:
 525:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 376              		.loc 1 525 0
 377 0062 0420     		movs	r0, #4
 378              	.LVL32:
 531:../system/src/modbus_rtu/rtu_serial_io.c **** }
 379              		.loc 1 531 0
 380 0064 F5E7     		b	.L19
 381              	.L26:
 382 0066 00BF     		.align	2
 383              	.L25:
 384 0068 00000000 		.word	.LANCHOR1
 385 006c 00000000 		.word	.LANCHOR0
 386 0070 00000000 		.word	rtu_serial_callback
 387              		.cfi_endproc
 388              	.LFE407:
 390              		.section	.text.rtu_serial_pool,"ax",%progbits
 391              		.align	1
 392              		.global	rtu_serial_pool
 393              		.syntax unified
 394              		.thumb
 395              		.thumb_func
 396              		.fpu fpv4-sp-d16
 398              	rtu_serial_pool:
 399              	.LFB406:
 204:../system/src/modbus_rtu/rtu_serial_io.c **** 
 400              		.loc 1 204 0
 401              		.cfi_startproc
 402              		@ args = 0, pretend = 0, frame = 8
 403              		@ frame_needed = 0, uses_anonymous_args = 0
 404 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 405              		.cfi_def_cfa_offset 20
 406              		.cfi_offset 4, -20
 407              		.cfi_offset 5, -16
 408              		.cfi_offset 6, -12
 409              		.cfi_offset 7, -8
 410              		.cfi_offset 14, -4
 411 0002 87B0     		sub	sp, sp, #28
 412              		.cfi_def_cfa_offset 48
 413              	.LVL33:
 210:../system/src/modbus_rtu/rtu_serial_io.c **** 
 414              		.loc 1 210 0
 415 0004 0023     		movs	r3, #0
 416 0006 8DF81730 		strb	r3, [sp, #23]
 215:../system/src/modbus_rtu/rtu_serial_io.c **** 
 417              		.loc 1 215 0
 418 000a A14B     		ldr	r3, .L65
 419 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 420 000e 8BB1     		cbz	r3, .L28
 218:../system/src/modbus_rtu/rtu_serial_io.c **** 			// set the status trigger
 421              		.loc 1 218 0
 422 0010 13F01F0F 		tst	r3, #31
 423 0014 0ED1     		bne	.L28
 220:../system/src/modbus_rtu/rtu_serial_io.c **** 
 424              		.loc 1 220 0
 425 0016 9F4A     		ldr	r2, .L65+4
 426 0018 0121     		movs	r1, #1
 427 001a 1170     		strb	r1, [r2]
 223:../system/src/modbus_rtu/rtu_serial_io.c **** 
 428              		.loc 1 223 0
 429 001c 0B44     		add	r3, r3, r1
 430 001e DBB2     		uxtb	r3, r3
 431 0020 9B4A     		ldr	r2, .L65
 432 0022 1370     		strb	r3, [r2]
 227:../system/src/modbus_rtu/rtu_serial_io.c **** 			{
 433              		.loc 1 227 0
 434 0024 DE2B     		cmp	r3, #222
 435 0026 01D9     		bls	.L29
 229:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 436              		.loc 1 229 0
 437 0028 9B4B     		ldr	r3, .L65+8
 438 002a 1970     		strb	r1, [r3]
 439              	.L29:
 233:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 440              		.loc 1 233 0
 441 002c 9B4B     		ldr	r3, .L65+12
 442 002e 1A68     		ldr	r2, [r3]
 443 0030 9B4B     		ldr	r3, .L65+16
 444 0032 1A60     		str	r2, [r3]
 445              	.L28:
 237:../system/src/modbus_rtu/rtu_serial_io.c **** 		rtu_used_queue->it = 0;
 446              		.loc 1 237 0
 447 0034 9B4B     		ldr	r3, .L65+20
 448 0036 1A68     		ldr	r2, [r3]
 449 0038 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 450 003a 5BB2     		sxtb	r3, r3
 451 003c 052B     		cmp	r3, #5
 452 003e 04DD     		ble	.L30
 238:../system/src/modbus_rtu/rtu_serial_io.c **** 
 453              		.loc 1 238 0
 454 0040 0023     		movs	r3, #0
 455 0042 1370     		strb	r3, [r2]
 241:../system/src/modbus_rtu/rtu_serial_io.c **** 	}
 456              		.loc 1 241 0
 457 0044 984B     		ldr	r3, .L65+24
 458 0046 0522     		movs	r2, #5
 459 0048 1A70     		strb	r2, [r3]
 460              	.L30:
 244:../system/src/modbus_rtu/rtu_serial_io.c **** 		case RTU_POOL_IDLE: {
 461              		.loc 1 244 0
 462 004a 974B     		ldr	r3, .L65+24
 463 004c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 464 004e 052B     		cmp	r3, #5
 465 0050 00F28681 		bhi	.L31
 466 0054 DFE813F0 		tbh	[pc, r3, lsl #1]
 467              	.L33:
 468 0058 0600     		.2byte	(.L32-.L33)/2
 469 005a A300     		.2byte	(.L34-.L33)/2
 470 005c BF00     		.2byte	(.L35-.L33)/2
 471 005e 5101     		.2byte	(.L36-.L33)/2
 472 0060 6501     		.2byte	(.L37-.L33)/2
 473 0062 8A01     		.2byte	(.L49-.L33)/2
 474              		.p2align 1
 475              	.L32:
 248:../system/src/modbus_rtu/rtu_serial_io.c **** 					rtu_used_serial_context->port,
 476              		.loc 1 248 0
 477 0064 914C     		ldr	r4, .L65+28
 478 0066 2068     		ldr	r0, [r4]
 479 0068 0168     		ldr	r1, [r0]
 480 006a 8269     		ldr	r2, [r0, #24]
 481 006c 838B     		ldrh	r3, [r0, #28]
 482 006e 4569     		ldr	r5, [r0, #20]
 483 0070 C68B     		ldrh	r6, [r0, #30]
 484 0072 4768     		ldr	r7, [r0, #4]
 485 0074 90F808C0 		ldrb	ip, [r0, #8]	@ zero_extendqisi2
 486 0078 CDF80CC0 		str	ip, [sp, #12]
 487 007c 0297     		str	r7, [sp, #8]
 488 007e 0196     		str	r6, [sp, #4]
 489 0080 0095     		str	r5, [sp]
 490 0082 FFF7FEFF 		bl	srl_init
 491              	.LVL34:
 262:../system/src/modbus_rtu/rtu_serial_io.c **** 
 492              		.loc 1 262 0
 493 0086 0022     		movs	r2, #0
 494 0088 0121     		movs	r1, #1
 495 008a 2068     		ldr	r0, [r4]
 496 008c FFF7FEFF 		bl	srl_switch_timeout
 497              	.LVL35:
 264:../system/src/modbus_rtu/rtu_serial_io.c **** 
 498              		.loc 1 264 0
 499 0090 0121     		movs	r1, #1
 500 0092 2068     		ldr	r0, [r4]
 501 0094 FFF7FEFF 		bl	srl_switch_tx_delay
 502              	.LVL36:
 267:../system/src/modbus_rtu/rtu_serial_io.c **** 				// read holding registers
 503              		.loc 1 267 0
 504 0098 824B     		ldr	r3, .L65+20
 505 009a 1B68     		ldr	r3, [r3]
 506 009c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 507 009e 43FA82F2 		sxtab	r2, r3, r2
 508 00a2 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 509 00a4 D2B2     		uxtb	r2, r2
 510 00a6 032A     		cmp	r2, #3
 511 00a8 0DD0     		beq	.L61
 285:../system/src/modbus_rtu/rtu_serial_io.c **** 				// read input registers
 512              		.loc 1 285 0
 513 00aa 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 514 00ac 43FA82F2 		sxtab	r2, r3, r2
 515 00b0 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 516 00b2 D2B2     		uxtb	r2, r2
 517 00b4 042A     		cmp	r2, #4
 518 00b6 26D0     		beq	.L62
 301:../system/src/modbus_rtu/rtu_serial_io.c **** 
 519              		.loc 1 301 0
 520 00b8 7B4A     		ldr	r2, .L65+24
 521 00ba 0521     		movs	r1, #5
 522 00bc 1170     		strb	r1, [r2]
 304:../system/src/modbus_rtu/rtu_serial_io.c **** 
 523              		.loc 1 304 0
 524 00be 0022     		movs	r2, #0
 525 00c0 1A70     		strb	r2, [r3]
 526              	.LVL37:
 355:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 527              		.loc 1 355 0
 528 00c2 0324     		movs	r4, #3
 529 00c4 54E1     		b	.L27
 530              	.LVL38:
 531              	.L61:
 269:../system/src/modbus_rtu/rtu_serial_io.c **** 
 532              		.loc 1 269 0
 533 00c6 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 534 00c8 52B2     		sxtb	r2, r2
 535 00ca 0232     		adds	r2, r2, #2
 536 00cc 53F82230 		ldr	r3, [r3, r2, lsl #2]
 537              	.LVL39:
 271:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_current_03_base_register = ptr_func_03->base_address;
 538              		.loc 1 271 0
 539 00d0 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 540 00d2 774C     		ldr	r4, .L65+32
 541 00d4 2270     		strb	r2, [r4]
 272:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_current_03_number_of_registers = ptr_func_03->number_of_registers;
 542              		.loc 1 272 0
 543 00d6 9A88     		ldrh	r2, [r3, #4]
 544 00d8 7648     		ldr	r0, .L65+36
 545 00da 0280     		strh	r2, [r0]	@ movhi
 273:../system/src/modbus_rtu/rtu_serial_io.c **** 
 546              		.loc 1 273 0
 547 00dc 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 548 00de 764B     		ldr	r3, .L65+40
 549              	.LVL40:
 550 00e0 1A70     		strb	r2, [r3]
 278:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_used_serial_context->srl_tx_buf_ln,
 551              		.loc 1 278 0
 552 00e2 724A     		ldr	r2, .L65+28
 553 00e4 1268     		ldr	r2, [r2]
 276:../system/src/modbus_rtu/rtu_serial_io.c **** 						1,
 554              		.loc 1 276 0
 555 00e6 5169     		ldr	r1, [r2, #20]
 279:../system/src/modbus_rtu/rtu_serial_io.c **** 						&output_data_lenght,
 556              		.loc 1 279 0
 557 00e8 D28B     		ldrh	r2, [r2, #30]
 276:../system/src/modbus_rtu/rtu_serial_io.c **** 						1,
 558              		.loc 1 276 0
 559 00ea 2478     		ldrb	r4, [r4]	@ zero_extendqisi2
 560 00ec 0088     		ldrh	r0, [r0]
 561 00ee 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 562 00f0 0293     		str	r3, [sp, #8]
 563 00f2 0190     		str	r0, [sp, #4]
 564 00f4 0094     		str	r4, [sp]
 565 00f6 0DF11703 		add	r3, sp, #23
 566 00fa D2B2     		uxtb	r2, r2
 567 00fc 0120     		movs	r0, #1
 568 00fe FFF7FEFF 		bl	rtu_request_03_04_registers
 569              	.LVL41:
 570 0102 0446     		mov	r4, r0
 571              	.LVL42:
 572 0104 1FE0     		b	.L40
 573              	.LVL43:
 574              	.L62:
 291:../system/src/modbus_rtu/rtu_serial_io.c **** 						rtu_used_serial_context->srl_tx_buf_ln,
 575              		.loc 1 291 0
 576 0106 694A     		ldr	r2, .L65+28
 577 0108 1268     		ldr	r2, [r2]
 289:../system/src/modbus_rtu/rtu_serial_io.c **** 						0,
 578              		.loc 1 289 0
 579 010a 5169     		ldr	r1, [r2, #20]
 292:../system/src/modbus_rtu/rtu_serial_io.c **** 						&output_data_lenght,
 580              		.loc 1 292 0
 581 010c D28B     		ldrh	r2, [r2, #30]
 294:../system/src/modbus_rtu/rtu_serial_io.c **** 						((rtu_register_data_t*)rtu_used_queue->function_parameter[rtu_used_queue->it])->base_address,
 582              		.loc 1 294 0
 583 010e 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 584 0110 40B2     		sxtb	r0, r0
 585 0112 0230     		adds	r0, r0, #2
 586 0114 53F82000 		ldr	r0, [r3, r0, lsl #2]
 289:../system/src/modbus_rtu/rtu_serial_io.c **** 						0,
 587              		.loc 1 289 0
 588 0118 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
 295:../system/src/modbus_rtu/rtu_serial_io.c **** 						((rtu_register_data_t*)rtu_used_queue->function_parameter[rtu_used_queue->it])->number_of_reg
 589              		.loc 1 295 0
 590 011a 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 591 011c 40B2     		sxtb	r0, r0
 592 011e 0230     		adds	r0, r0, #2
 593 0120 53F82000 		ldr	r0, [r3, r0, lsl #2]
 289:../system/src/modbus_rtu/rtu_serial_io.c **** 						0,
 594              		.loc 1 289 0
 595 0124 8588     		ldrh	r5, [r0, #4]
 296:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 596              		.loc 1 296 0
 597 0126 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 598 0128 40B2     		sxtb	r0, r0
 599 012a 0230     		adds	r0, r0, #2
 600 012c 53F82030 		ldr	r3, [r3, r0, lsl #2]
 289:../system/src/modbus_rtu/rtu_serial_io.c **** 						0,
 601              		.loc 1 289 0
 602 0130 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 603 0132 0293     		str	r3, [sp, #8]
 604 0134 0195     		str	r5, [sp, #4]
 605 0136 0094     		str	r4, [sp]
 606 0138 0DF11703 		add	r3, sp, #23
 607 013c D2B2     		uxtb	r2, r2
 608 013e 0020     		movs	r0, #0
 609 0140 FFF7FEFF 		bl	rtu_request_03_04_registers
 610              	.LVL44:
 611 0144 0446     		mov	r4, r0
 612              	.LVL45:
 613              	.L40:
 311:../system/src/modbus_rtu/rtu_serial_io.c **** 
 614              		.loc 1 311 0
 615 0146 002C     		cmp	r4, #0
 616 0148 40F01581 		bne	.L50
 314:../system/src/modbus_rtu/rtu_serial_io.c **** 					// call the function which will process the same stuff than
 617              		.loc 1 314 0
 618 014c 5B4B     		ldr	r3, .L65+44
 619 014e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 620 0150 93B1     		cbz	r3, .L42
 318:../system/src/modbus_rtu/rtu_serial_io.c **** 
 621              		.loc 1 318 0
 622 0152 9DF81710 		ldrb	r1, [sp, #23]	@ zero_extendqisi2
 623 0156 554B     		ldr	r3, .L65+28
 624 0158 1868     		ldr	r0, [r3]
 625              	.LVL46:
 626 015a FFF7FEFF 		bl	rtu_serial_blocking_io
 627              	.LVL47:
 320:../system/src/modbus_rtu/rtu_serial_io.c **** 						// if transmission and reception was successful switch to the
 628              		.loc 1 320 0
 629 015e 28B9     		cbnz	r0, .L43
 324:../system/src/modbus_rtu/rtu_serial_io.c **** 					}
 630              		.loc 1 324 0
 631 0160 514B     		ldr	r3, .L65+24
 632 0162 0222     		movs	r2, #2
 633 0164 1A70     		strb	r2, [r3]
 634 0166 4FF0FF34 		mov	r4, #-1
 635 016a 01E1     		b	.L27
 636              	.L43:
 327:../system/src/modbus_rtu/rtu_serial_io.c **** 					}
 637              		.loc 1 327 0
 638 016c 4E4B     		ldr	r3, .L65+24
 639 016e 0422     		movs	r2, #4
 640 0170 1A70     		strb	r2, [r3]
 641 0172 4FF0FF34 		mov	r4, #-1
 642 0176 FBE0     		b	.L27
 643              	.L42:
 332:../system/src/modbus_rtu/rtu_serial_io.c **** 
 644              		.loc 1 332 0
 645 0178 9DF81710 		ldrb	r1, [sp, #23]	@ zero_extendqisi2
 646 017c 4B4B     		ldr	r3, .L65+28
 647 017e 1868     		ldr	r0, [r3]
 648              	.LVL48:
 649 0180 FFF7FEFF 		bl	srl_start_tx
 650              	.LVL49:
 335:../system/src/modbus_rtu/rtu_serial_io.c **** 
 651              		.loc 1 335 0
 652 0184 4E4B     		ldr	r3, .L65+48
 653 0186 4FF6FF72 		movw	r2, #65535
 654 018a 1A80     		strh	r2, [r3]	@ movhi
 337:../system/src/modbus_rtu/rtu_serial_io.c **** 
 655              		.loc 1 337 0
 656 018c 4D4B     		ldr	r3, .L65+52
 657 018e 0122     		movs	r2, #1
 658 0190 1A70     		strb	r2, [r3]
 340:../system/src/modbus_rtu/rtu_serial_io.c **** 						// proceed to the next state (transmitting)
 659              		.loc 1 340 0
 660 0192 0028     		cmp	r0, #0
 661 0194 40F0F180 		bne	.L51
 342:../system/src/modbus_rtu/rtu_serial_io.c **** 
 662              		.loc 1 342 0
 663 0198 434B     		ldr	r3, .L65+24
 664 019a 1A70     		strb	r2, [r3]
 665              	.LVL50:
 666 019c E8E0     		b	.L27
 667              	.LVL51:
 668              	.L34:
 363:../system/src/modbus_rtu/rtu_serial_io.c **** 				// wait until it will finish
 669              		.loc 1 363 0
 670 019e 434B     		ldr	r3, .L65+28
 671 01a0 1868     		ldr	r0, [r3]
 672 01a2 90F84530 		ldrb	r3, [r0, #69]	@ zero_extendqisi2
 673 01a6 DBB2     		uxtb	r3, r3
 674 01a8 032B     		cmp	r3, #3
 675 01aa 00F0E980 		beq	.L52
 363:../system/src/modbus_rtu/rtu_serial_io.c **** 				// wait until it will finish
 676              		.loc 1 363 0 is_stmt 0 discriminator 1
 677 01ae 90F84530 		ldrb	r3, [r0, #69]	@ zero_extendqisi2
 678 01b2 DBB2     		uxtb	r3, r3
 679 01b4 022B     		cmp	r3, #2
 680 01b6 01D1     		bne	.L63
 380:../system/src/modbus_rtu/rtu_serial_io.c **** 
 681              		.loc 1 380 0 is_stmt 1
 682 01b8 0024     		movs	r4, #0
 683 01ba D9E0     		b	.L27
 684              	.L63:
 369:../system/src/modbus_rtu/rtu_serial_io.c **** 
 685              		.loc 1 369 0
 686 01bc 4249     		ldr	r1, .L65+56
 687 01be FFF7FEFF 		bl	srl_receive_data_with_callback
 688              	.LVL52:
 373:../system/src/modbus_rtu/rtu_serial_io.c **** 
 689              		.loc 1 373 0
 690 01c2 0121     		movs	r1, #1
 691 01c4 394B     		ldr	r3, .L65+28
 692 01c6 1868     		ldr	r0, [r3]
 693 01c8 FFF7FEFF 		bl	srl_switch_timeout_for_waiting
 694              	.LVL53:
 376:../system/src/modbus_rtu/rtu_serial_io.c **** 
 695              		.loc 1 376 0
 696 01cc 364B     		ldr	r3, .L65+24
 697 01ce 0222     		movs	r2, #2
 698 01d0 1A70     		strb	r2, [r3]
 380:../system/src/modbus_rtu/rtu_serial_io.c **** 
 699              		.loc 1 380 0
 700 01d2 0024     		movs	r4, #0
 701 01d4 CCE0     		b	.L27
 702              	.L35:
 387:../system/src/modbus_rtu/rtu_serial_io.c **** 				// wait
 703              		.loc 1 387 0
 704 01d6 354B     		ldr	r3, .L65+28
 705 01d8 1B68     		ldr	r3, [r3]
 706 01da 93F84420 		ldrb	r2, [r3, #68]	@ zero_extendqisi2
 707 01de D2B2     		uxtb	r2, r2
 708 01e0 022A     		cmp	r2, #2
 709 01e2 00F0CF80 		beq	.L54
 387:../system/src/modbus_rtu/rtu_serial_io.c **** 				// wait
 710              		.loc 1 387 0 is_stmt 0 discriminator 1
 711 01e6 93F84420 		ldrb	r2, [r3, #68]	@ zero_extendqisi2
 712 01ea D2B2     		uxtb	r2, r2
 713 01ec 032A     		cmp	r2, #3
 714 01ee 00F0CC80 		beq	.L55
 387:../system/src/modbus_rtu/rtu_serial_io.c **** 				// wait
 715              		.loc 1 387 0 discriminator 2
 716 01f2 93F84420 		ldrb	r2, [r3, #68]	@ zero_extendqisi2
 717 01f6 D2B2     		uxtb	r2, r2
 718 01f8 012A     		cmp	r2, #1
 719 01fa 00F0C980 		beq	.L56
 391:../system/src/modbus_rtu/rtu_serial_io.c **** 				// parse the response from RTU slave // here there is a problem with changing slave address
 720              		.loc 1 391 0 is_stmt 1
 721 01fe 93F84420 		ldrb	r2, [r3, #68]	@ zero_extendqisi2
 722 0202 D2B2     		uxtb	r2, r2
 723 0204 042A     		cmp	r2, #4
 724 0206 6FD1     		bne	.L44
 393:../system/src/modbus_rtu/rtu_serial_io.c **** 					result = rtu_parser_03_04_registers(
 725              		.loc 1 393 0
 726 0208 264A     		ldr	r2, .L65+20
 727 020a 1268     		ldr	r2, [r2]
 728 020c 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 729 020e 42FA81F1 		sxtab	r1, r2, r1
 730 0212 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
 731 0214 C9B2     		uxtb	r1, r1
 732 0216 0329     		cmp	r1, #3
 733 0218 1BD0     		beq	.L45
 393:../system/src/modbus_rtu/rtu_serial_io.c **** 					result = rtu_parser_03_04_registers(
 734              		.loc 1 393 0 is_stmt 0 discriminator 1
 735 021a 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 736 021c 42FA81F1 		sxtab	r1, r2, r1
 737 0220 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
 738 0222 C9B2     		uxtb	r1, r1
 739 0224 0429     		cmp	r1, #4
 740 0226 14D0     		beq	.L45
 208:../system/src/modbus_rtu/rtu_serial_io.c **** 
 741              		.loc 1 208 0 is_stmt 1
 742 0228 4FF0FF33 		mov	r3, #-1
 401:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 743              		.loc 1 401 0
 744 022c 0224     		movs	r4, #2
 745              	.LVL54:
 746              	.L46:
 412:../system/src/modbus_rtu/rtu_serial_io.c **** 					// in case of an excetpion store the current timestamp
 747              		.loc 1 412 0
 748 022e 042B     		cmp	r3, #4
 749 0230 52D0     		beq	.L64
 421:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 750              		.loc 1 421 0
 751 0232 1D4B     		ldr	r3, .L65+24
 752 0234 0422     		movs	r2, #4
 753 0236 1A70     		strb	r2, [r3]
 754              	.L47:
 755              	.LBB20:
 756              	.LBB21:
 757              		.file 3 "../include/main.h"
   1:../include/main.h **** #ifndef MAIN_H_
   2:../include/main.h **** #define MAIN_H_
   3:../include/main.h **** 
   4:../include/main.h **** #include "aprs/ax25.h"
   5:../include/main.h **** #include "drivers/serial.h"
   6:../include/main.h **** #include "config_data.h"
   7:../include/main.h **** 
   8:../include/main.h **** #define SW_VER "EA00"
   9:../include/main.h **** #define SW_DATE "30062021"
  10:../include/main.h **** 
  11:../include/main.h **** #define SYSTICK_TICKS_PER_SECONDS 100
  12:../include/main.h **** #define SYSTICK_TICKS_PERIOD 10
  13:../include/main.h **** 
  14:../include/main.h **** //#define INTERNAL_WATCHDOG
  15:../include/main.h **** #define EXTERNAL_WATCHDOG
  16:../include/main.h **** 
  17:../include/main.h **** #define PWR_SWITCH_BOTH
  18:../include/main.h **** 
  19:../include/main.h **** #define OWN_APRS_MSG_LN 	160
  20:../include/main.h **** 
  21:../include/main.h **** extern uint32_t master_time;
  22:../include/main.h **** 
  23:../include/main.h **** extern const config_data_mode_t * main_config_data_mode;
  24:../include/main.h **** extern const config_data_basic_t * main_config_data_basic;
  25:../include/main.h **** extern const config_data_wx_sources_t * main_config_data_wx_sources;
  26:../include/main.h **** extern const config_data_umb_t * main_config_data_umb;
  27:../include/main.h **** extern const config_data_rtu_t * main_config_data_rtu;
  28:../include/main.h **** 
  29:../include/main.h **** extern int32_t main_wx_sensors_pool_timer;
  30:../include/main.h **** extern int32_t main_one_minute_pool_timer;
  31:../include/main.h **** extern int32_t main_one_second_pool_timer;
  32:../include/main.h **** extern int32_t main_two_second_pool_timer;
  33:../include/main.h **** extern int32_t main_ten_second_pool_timer;
  34:../include/main.h **** 
  35:../include/main.h **** extern AX25Ctx main_ax25;
  36:../include/main.h **** extern Afsk main_afsk;
  37:../include/main.h **** 
  38:../include/main.h **** extern AX25Call main_own_path[3];
  39:../include/main.h **** extern uint8_t main_own_path_ln;
  40:../include/main.h **** extern uint8_t main_own_aprs_msg_len;
  41:../include/main.h **** extern char main_own_aprs_msg[OWN_APRS_MSG_LN];
  42:../include/main.h **** 
  43:../include/main.h **** extern char main_string_latitude[9];
  44:../include/main.h **** extern char main_string_longitude[9];
  45:../include/main.h **** 
  46:../include/main.h **** extern char main_symbol_f;
  47:../include/main.h **** extern char main_symbol_s;
  48:../include/main.h **** 
  49:../include/main.h **** extern srl_context_t* main_kiss_srl_ctx_ptr;
  50:../include/main.h **** extern srl_context_t* main_wx_srl_ctx_ptr;
  51:../include/main.h **** 
  52:../include/main.h **** extern  uint8_t main_kiss_enabled;
  53:../include/main.h **** 
  54:../include/main.h **** extern char after_tx_lock;
  55:../include/main.h **** 
  56:../include/main.h **** extern unsigned short rx10m, tx10m, digi10m, digidrop10m, kiss10m;
  57:../include/main.h **** 
  58:../include/main.h **** uint16_t main_get_adc_sample(void);
  59:../include/main.h **** 
  60:../include/main.h **** void main_service_cpu_load_ticks(void);
  61:../include/main.h **** 
  62:../include/main.h **** inline uint32_t main_get_master_time(void) {
  63:../include/main.h **** 	return master_time;
 758              		.loc 3 63 0
 759 0238 244B     		ldr	r3, .L65+60
 760 023a 1A68     		ldr	r2, [r3]
 761              	.LBE21:
 762              	.LBE20:
 425:../system/src/modbus_rtu/rtu_serial_io.c **** 
 763              		.loc 1 425 0
 764 023c 174B     		ldr	r3, .L65+12
 765 023e 1A60     		str	r2, [r3]
 427:../system/src/modbus_rtu/rtu_serial_io.c **** 
 766              		.loc 1 427 0
 767 0240 234A     		ldr	r2, .L65+64
 768 0242 1388     		ldrh	r3, [r2]
 769 0244 0133     		adds	r3, r3, #1
 770 0246 1380     		strh	r3, [r2]	@ movhi
 432:../system/src/modbus_rtu/rtu_serial_io.c **** 
 771              		.loc 1 432 0
 772 0248 184B     		ldr	r3, .L65+28
 773 024a 1868     		ldr	r0, [r3]
 774 024c FFF7FEFF 		bl	srl_close
 775              	.LVL55:
 776 0250 8EE0     		b	.L27
 777              	.LVL56:
 778              	.L45:
 394:../system/src/modbus_rtu/rtu_serial_io.c **** 							rtu_used_serial_context->srl_rx_buf_pointer,
 779              		.loc 1 394 0
 780 0252 9869     		ldr	r0, [r3, #24]
 781 0254 198C     		ldrh	r1, [r3, #32]
 397:../system/src/modbus_rtu/rtu_serial_io.c **** 							&rte_rtu_last_modbus_exception);
 782              		.loc 1 397 0
 783 0256 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 784 0258 5BB2     		sxtb	r3, r3
 785 025a 0233     		adds	r3, r3, #2
 786 025c 52F82320 		ldr	r2, [r2, r3, lsl #2]
 394:../system/src/modbus_rtu/rtu_serial_io.c **** 							rtu_used_serial_context->srl_rx_buf_pointer,
 787              		.loc 1 394 0
 788 0260 1C4B     		ldr	r3, .L65+68
 789 0262 FFF7FEFF 		bl	rtu_parser_03_04_registers
 790              	.LVL57:
 405:../system/src/modbus_rtu/rtu_serial_io.c **** 					// store the current time
 791              		.loc 1 405 0
 792 0266 0346     		mov	r3, r0
 793 0268 70B9     		cbnz	r0, .L58
 407:../system/src/modbus_rtu/rtu_serial_io.c **** 
 794              		.loc 1 407 0
 795 026a 0E4B     		ldr	r3, .L65+20
 796 026c 1A68     		ldr	r2, [r3]
 797 026e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 798 0270 5BB2     		sxtb	r3, r3
 799              	.LBB22:
 800              	.LBB23:
 801              		.loc 3 63 0
 802 0272 1649     		ldr	r1, .L65+60
 803 0274 0968     		ldr	r1, [r1]
 804              	.LBE23:
 805              	.LBE22:
 407:../system/src/modbus_rtu/rtu_serial_io.c **** 
 806              		.loc 1 407 0
 807 0276 0833     		adds	r3, r3, #8
 808 0278 42F82310 		str	r1, [r2, r3, lsl #2]
 410:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 809              		.loc 1 410 0
 810 027c 0A4B     		ldr	r3, .L65+24
 811 027e 0322     		movs	r2, #3
 812 0280 1A70     		strb	r2, [r3]
 206:../system/src/modbus_rtu/rtu_serial_io.c **** //#ifdef _MODBUS_RTU
 813              		.loc 1 206 0
 814 0282 4FF0FF34 		mov	r4, #-1
 815 0286 D7E7     		b	.L47
 816              	.L58:
 817 0288 4FF0FF34 		mov	r4, #-1
 818 028c CFE7     		b	.L46
 819              	.L66:
 820 028e 00BF     		.align	2
 821              	.L65:
 822 0290 00000000 		.word	rte_rtu_number_of_serial_io_errors
 823 0294 00000000 		.word	rte_main_trigger_modbus_status
 824 0298 00000000 		.word	rte_main_reboot_req
 825 029c 00000000 		.word	.LANCHOR4
 826 02a0 00000000 		.word	.LANCHOR3
 827 02a4 00000000 		.word	rtu_used_queue
 828 02a8 00000000 		.word	.LANCHOR5
 829 02ac 00000000 		.word	rtu_used_serial_context
 830 02b0 00000000 		.word	rtu_current_03_slave_address
 831 02b4 00000000 		.word	rtu_current_03_base_register
 832 02b8 00000000 		.word	rtu_current_03_number_of_registers
 833 02bc 00000000 		.word	.LANCHOR2
 834 02c0 00000000 		.word	.LANCHOR1
 835 02c4 00000000 		.word	.LANCHOR0
 836 02c8 00000000 		.word	rtu_serial_callback
 837 02cc 00000000 		.word	master_time
 838 02d0 00000000 		.word	rte_rtu_number_of_successfull_serial_comm
 839 02d4 00000000 		.word	rte_rtu_last_modbus_exception
 840              	.LVL58:
 841              	.L64:
 842              	.LBB24:
 843              	.LBB25:
 844              		.loc 3 63 0
 845 02d8 304B     		ldr	r3, .L67
 846 02da 1A68     		ldr	r2, [r3]
 847              	.LBE25:
 848              	.LBE24:
 414:../system/src/modbus_rtu/rtu_serial_io.c **** 
 849              		.loc 1 414 0
 850 02dc 304B     		ldr	r3, .L67+4
 851 02de 1A60     		str	r2, [r3]
 417:../system/src/modbus_rtu/rtu_serial_io.c **** 				}
 852              		.loc 1 417 0
 853 02e0 304B     		ldr	r3, .L67+8
 854 02e2 0322     		movs	r2, #3
 855 02e4 1A70     		strb	r2, [r3]
 856 02e6 A7E7     		b	.L47
 857              	.LVL59:
 858              	.L44:
 440:../system/src/modbus_rtu/rtu_serial_io.c **** 
 859              		.loc 1 440 0
 860 02e8 2E4A     		ldr	r2, .L67+8
 861 02ea 0421     		movs	r1, #4
 862 02ec 1170     		strb	r1, [r2]
 442:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 863              		.loc 1 442 0
 864 02ee 1846     		mov	r0, r3
 865 02f0 FFF7FEFF 		bl	srl_close
 866              	.LVL60:
 206:../system/src/modbus_rtu/rtu_serial_io.c **** //#ifdef _MODBUS_RTU
 867              		.loc 1 206 0
 868 02f4 4FF0FF34 		mov	r4, #-1
 869 02f8 3AE0     		b	.L27
 870              	.L36:
 871              	.LBB26:
 872              	.LBB27:
 873              		.loc 3 63 0
 874 02fa 284B     		ldr	r3, .L67
 875 02fc 1B68     		ldr	r3, [r3]
 876              	.LBE27:
 877              	.LBE26:
 450:../system/src/modbus_rtu/rtu_serial_io.c **** 				rtu_pool_state = RTU_POOL_IDLE;
 878              		.loc 1 450 0
 879 02fe 2A4A     		ldr	r2, .L67+12
 880 0300 1268     		ldr	r2, [r2]
 881 0302 9B1A     		subs	r3, r3, r2
 882 0304 142B     		cmp	r3, #20
 883 0306 46D9     		bls	.L59
 451:../system/src/modbus_rtu/rtu_serial_io.c **** 
 884              		.loc 1 451 0
 885 0308 264B     		ldr	r3, .L67+8
 886 030a 0022     		movs	r2, #0
 887 030c 1A70     		strb	r2, [r3]
 453:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 888              		.loc 1 453 0
 889 030e 274B     		ldr	r3, .L67+16
 890 0310 1A68     		ldr	r2, [r3]
 891 0312 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 892 0314 5BB2     		sxtb	r3, r3
 893 0316 0133     		adds	r3, r3, #1
 894 0318 5BB2     		sxtb	r3, r3
 895 031a 1370     		strb	r3, [r2]
 206:../system/src/modbus_rtu/rtu_serial_io.c **** //#ifdef _MODBUS_RTU
 896              		.loc 1 206 0
 897 031c 4FF0FF34 		mov	r4, #-1
 898 0320 26E0     		b	.L27
 899              	.L37:
 460:../system/src/modbus_rtu/rtu_serial_io.c **** 
 900              		.loc 1 460 0
 901 0322 0024     		movs	r4, #0
 902 0324 1F4B     		ldr	r3, .L67+8
 903 0326 1C70     		strb	r4, [r3]
 463:../system/src/modbus_rtu/rtu_serial_io.c **** 
 904              		.loc 1 463 0
 905 0328 214A     		ldr	r2, .L67+20
 906 032a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 907 032c 0133     		adds	r3, r3, #1
 908 032e 1370     		strb	r3, [r2]
 909              	.LBB28:
 910              	.LBB29:
 911              		.loc 3 63 0
 912 0330 1A4B     		ldr	r3, .L67
 913 0332 1A68     		ldr	r2, [r3]
 914              	.LBE29:
 915              	.LBE28:
 465:../system/src/modbus_rtu/rtu_serial_io.c **** 
 916              		.loc 1 465 0
 917 0334 1F4B     		ldr	r3, .L67+24
 918 0336 1A60     		str	r2, [r3]
 468:../system/src/modbus_rtu/rtu_serial_io.c **** 
 919              		.loc 1 468 0
 920 0338 1C4B     		ldr	r3, .L67+16
 921 033a 1A68     		ldr	r2, [r3]
 922 033c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 923 033e 5BB2     		sxtb	r3, r3
 924 0340 1C33     		adds	r3, r3, #28
 925 0342 32F81310 		ldrh	r1, [r2, r3, lsl #1]
 926 0346 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 927 0348 5BB2     		sxtb	r3, r3
 928 034a 0131     		adds	r1, r1, #1
 929 034c 89B2     		uxth	r1, r1
 930 034e 1C33     		adds	r3, r3, #28
 931 0350 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 471:../system/src/modbus_rtu/rtu_serial_io.c **** 
 932              		.loc 1 471 0
 933 0354 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 934 0356 5BB2     		sxtb	r3, r3
 935 0358 0133     		adds	r3, r3, #1
 936 035a 5BB2     		sxtb	r3, r3
 937 035c 1370     		strb	r3, [r2]
 938              	.LVL61:
 475:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 939              		.loc 1 475 0
 940 035e 07E0     		b	.L27
 941              	.LVL62:
 942              	.L31:
 481:../system/src/modbus_rtu/rtu_serial_io.c **** 			break;
 943              		.loc 1 481 0
 944 0360 104B     		ldr	r3, .L67+8
 945 0362 0522     		movs	r2, #5
 946 0364 1A70     		strb	r2, [r3]
 206:../system/src/modbus_rtu/rtu_serial_io.c **** //#ifdef _MODBUS_RTU
 947              		.loc 1 206 0
 948 0366 4FF0FF34 		mov	r4, #-1
 482:../system/src/modbus_rtu/rtu_serial_io.c **** 		}
 949              		.loc 1 482 0
 950 036a 01E0     		b	.L27
 951              	.L49:
 206:../system/src/modbus_rtu/rtu_serial_io.c **** //#ifdef _MODBUS_RTU
 952              		.loc 1 206 0
 953 036c 4FF0FF34 		mov	r4, #-1
 954              	.LVL63:
 955              	.L27:
 487:../system/src/modbus_rtu/rtu_serial_io.c **** 
 956              		.loc 1 487 0
 957 0370 2046     		mov	r0, r4
 958 0372 07B0     		add	sp, sp, #28
 959              		.cfi_remember_state
 960              		.cfi_def_cfa_offset 20
 961              		@ sp needed
 962 0374 F0BD     		pop	{r4, r5, r6, r7, pc}
 963              	.LVL64:
 964              	.L50:
 965              		.cfi_restore_state
 355:../system/src/modbus_rtu/rtu_serial_io.c **** 			}
 966              		.loc 1 355 0
 967 0376 0324     		movs	r4, #3
 968 0378 FAE7     		b	.L27
 969              	.LVL65:
 970              	.L51:
 971 037a 4FF0FF34 		mov	r4, #-1
 972 037e F7E7     		b	.L27
 973              	.LVL66:
 974              	.L52:
 380:../system/src/modbus_rtu/rtu_serial_io.c **** 
 975              		.loc 1 380 0
 976 0380 0024     		movs	r4, #0
 977 0382 F5E7     		b	.L27
 978              	.L54:
 206:../system/src/modbus_rtu/rtu_serial_io.c **** //#ifdef _MODBUS_RTU
 979              		.loc 1 206 0
 980 0384 4FF0FF34 		mov	r4, #-1
 981 0388 F2E7     		b	.L27
 982              	.L55:
 983 038a 4FF0FF34 		mov	r4, #-1
 984 038e EFE7     		b	.L27
 985              	.L56:
 986 0390 4FF0FF34 		mov	r4, #-1
 987 0394 ECE7     		b	.L27
 988              	.L59:
 989 0396 4FF0FF34 		mov	r4, #-1
 486:../system/src/modbus_rtu/rtu_serial_io.c **** }
 990              		.loc 1 486 0
 991 039a E9E7     		b	.L27
 992              	.L68:
 993              		.align	2
 994              	.L67:
 995 039c 00000000 		.word	master_time
 996 03a0 00000000 		.word	rte_rtu_last_modbus_exception_timestamp
 997 03a4 00000000 		.word	.LANCHOR5
 998 03a8 00000000 		.word	.LANCHOR4
 999 03ac 00000000 		.word	rtu_used_queue
 1000 03b0 00000000 		.word	rte_rtu_number_of_serial_io_errors
 1001 03b4 00000000 		.word	rte_rtu_last_modbus_rx_error_timestamp
 1002              		.cfi_endproc
 1003              	.LFE406:
 1005              		.section	.text.rtu_serial_start,"ax",%progbits
 1006              		.align	1
 1007              		.global	rtu_serial_start
 1008              		.syntax unified
 1009              		.thumb
 1010              		.thumb_func
 1011              		.fpu fpv4-sp-d16
 1013              	rtu_serial_start:
 1014              	.LFB408:
 533:../system/src/modbus_rtu/rtu_serial_io.c **** 
 534:../system/src/modbus_rtu/rtu_serial_io.c **** int32_t rtu_serial_start(void) {
 1015              		.loc 1 534 0
 1016              		.cfi_startproc
 1017              		@ args = 0, pretend = 0, frame = 0
 1018              		@ frame_needed = 0, uses_anonymous_args = 0
 1019              		@ link register save eliminated.
 1020              	.LVL67:
 535:../system/src/modbus_rtu/rtu_serial_io.c **** 
 536:../system/src/modbus_rtu/rtu_serial_io.c **** 	int32_t retval = MODBUS_RET_UNINITIALIZED;
 537:../system/src/modbus_rtu/rtu_serial_io.c **** 
 538:../system/src/modbus_rtu/rtu_serial_io.c **** 	rtu_pool_state = RTU_POOL_IDLE;
 1021              		.loc 1 538 0
 1022 0000 024B     		ldr	r3, .L70
 1023 0002 0022     		movs	r2, #0
 1024 0004 1A70     		strb	r2, [r3]
 539:../system/src/modbus_rtu/rtu_serial_io.c **** 
 540:../system/src/modbus_rtu/rtu_serial_io.c **** 	return retval;
 541:../system/src/modbus_rtu/rtu_serial_io.c **** }
 1025              		.loc 1 541 0
 1026 0006 4FF0FF30 		mov	r0, #-1
 1027 000a 7047     		bx	lr
 1028              	.L71:
 1029              		.align	2
 1030              	.L70:
 1031 000c 00000000 		.word	.LANCHOR5
 1032              		.cfi_endproc
 1033              	.LFE408:
 1035              		.section	.text.rtu_serial_get_status_string,"ax",%progbits
 1036              		.align	1
 1037              		.global	rtu_serial_get_status_string
 1038              		.syntax unified
 1039              		.thumb
 1040              		.thumb_func
 1041              		.fpu fpv4-sp-d16
 1043              	rtu_serial_get_status_string:
 1044              	.LFB409:
 542:../system/src/modbus_rtu/rtu_serial_io.c **** 
 543:../system/src/modbus_rtu/rtu_serial_io.c **** int32_t rtu_serial_get_status_string(rtu_pool_queue_t* queue, srl_context_t* srl_ctx, char* out, ui
 1045              		.loc 1 543 0
 1046              		.cfi_startproc
 1047              		@ args = 4, pretend = 0, frame = 0
 1048              		@ frame_needed = 0, uses_anonymous_args = 0
 1049              	.LVL68:
 1050 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1051              		.cfi_def_cfa_offset 20
 1052              		.cfi_offset 4, -20
 1053              		.cfi_offset 5, -16
 1054              		.cfi_offset 6, -12
 1055              		.cfi_offset 7, -8
 1056              		.cfi_offset 14, -4
 1057 0002 89B0     		sub	sp, sp, #36
 1058              		.cfi_def_cfa_offset 56
 1059 0004 0C46     		mov	r4, r1
 1060 0006 1546     		mov	r5, r2
 1061 0008 1E46     		mov	r6, r3
 1062              	.LVL69:
 544:../system/src/modbus_rtu/rtu_serial_io.c **** 
 545:../system/src/modbus_rtu/rtu_serial_io.c **** 	int32_t retval = MODBUS_RET_UNINITIALIZED;
 546:../system/src/modbus_rtu/rtu_serial_io.c **** 	int string_ln = 0;
 547:../system/src/modbus_rtu/rtu_serial_io.c **** 
 548:../system/src/modbus_rtu/rtu_serial_io.c **** 	memset(out, 0x00, out_buffer_ln);
 1063              		.loc 1 548 0
 1064 000a 1A46     		mov	r2, r3
 1065              	.LVL70:
 1066 000c 0021     		movs	r1, #0
 1067              	.LVL71:
 1068 000e 2846     		mov	r0, r5
 1069              	.LVL72:
 1070 0010 FFF7FEFF 		bl	memset
 1071              	.LVL73:
 1072              	.LBB30:
 1073              	.LBB31:
 1074              		.loc 3 63 0
 1075 0014 0F4B     		ldr	r3, .L74
 1076 0016 1B68     		ldr	r3, [r3]
 1077              	.LBE31:
 1078              	.LBE30:
 549:../system/src/modbus_rtu/rtu_serial_io.c **** //#ifdef _MODBUS_RTU
 550:../system/src/modbus_rtu/rtu_serial_io.c **** 
 551:../system/src/modbus_rtu/rtu_serial_io.c **** 	string_ln = snprintf(out, out_buffer_ln, ">MT %lX, LRET %lX, LSCT %lX, NSSC %X, NSE %X, RXB %lX, R
 1079              		.loc 1 551 0
 1080 0018 0F4A     		ldr	r2, .L74+4
 1081 001a 1268     		ldr	r2, [r2]
 1082 001c 0092     		str	r2, [sp]
 1083 001e 0F49     		ldr	r1, .L74+8
 1084 0020 0A68     		ldr	r2, [r1]
 1085 0022 0192     		str	r2, [sp, #4]
 1086 0024 0E48     		ldr	r0, .L74+12
 1087 0026 0088     		ldrh	r0, [r0]
 1088 0028 0E4F     		ldr	r7, .L74+16
 1089 002a 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 1090 002c 276D     		ldr	r7, [r4, #80]
 552:../system/src/modbus_rtu/rtu_serial_io.c **** 												main_get_master_time(),
 553:../system/src/modbus_rtu/rtu_serial_io.c **** 												rte_rtu_last_modbus_rx_error_timestamp,
 554:../system/src/modbus_rtu/rtu_serial_io.c **** 												rtu_time_of_last_successfull_comm,
 555:../system/src/modbus_rtu/rtu_serial_io.c **** 												(int)rte_rtu_number_of_successfull_serial_comm,
 556:../system/src/modbus_rtu/rtu_serial_io.c **** 												(int)rte_rtu_number_of_serial_io_errors,
 557:../system/src/modbus_rtu/rtu_serial_io.c **** 												srl_ctx->total_rx_bytes,
 558:../system/src/modbus_rtu/rtu_serial_io.c **** 												srl_ctx->total_idle_counter,
 1091              		.loc 1 558 0
 1092 002e 94F84710 		ldrb	r1, [r4, #71]	@ zero_extendqisi2
 551:../system/src/modbus_rtu/rtu_serial_io.c **** 												main_get_master_time(),
 1093              		.loc 1 551 0
 1094 0032 646D     		ldr	r4, [r4, #84]
 1095              	.LVL74:
 1096 0034 0694     		str	r4, [sp, #24]
 1097 0036 0591     		str	r1, [sp, #20]
 1098 0038 0497     		str	r7, [sp, #16]
 1099 003a 0392     		str	r2, [sp, #12]
 1100 003c 0290     		str	r0, [sp, #8]
 1101 003e 0A4A     		ldr	r2, .L74+20
 1102 0040 3146     		mov	r1, r6
 1103 0042 2846     		mov	r0, r5
 1104 0044 FFF7FEFF 		bl	snprintf
 1105              	.LVL75:
 559:../system/src/modbus_rtu/rtu_serial_io.c **** 												srl_ctx->total_tx_bytes);
 560:../system/src/modbus_rtu/rtu_serial_io.c **** 
 561:../system/src/modbus_rtu/rtu_serial_io.c **** 	*generated_string_ln = (uint8_t) string_ln;
 1106              		.loc 1 561 0
 1107 0048 0E9B     		ldr	r3, [sp, #56]
 1108 004a 1870     		strb	r0, [r3]
 562:../system/src/modbus_rtu/rtu_serial_io.c **** //#endif
 563:../system/src/modbus_rtu/rtu_serial_io.c **** 	return retval;
 564:../system/src/modbus_rtu/rtu_serial_io.c **** }
 1109              		.loc 1 564 0
 1110 004c 4FF0FF30 		mov	r0, #-1
 1111              	.LVL76:
 1112 0050 09B0     		add	sp, sp, #36
 1113              		.cfi_def_cfa_offset 20
 1114              		@ sp needed
 1115 0052 F0BD     		pop	{r4, r5, r6, r7, pc}
 1116              	.LVL77:
 1117              	.L75:
 1118              		.align	2
 1119              	.L74:
 1120 0054 00000000 		.word	master_time
 1121 0058 00000000 		.word	rte_rtu_last_modbus_rx_error_timestamp
 1122 005c 00000000 		.word	.LANCHOR4
 1123 0060 00000000 		.word	rte_rtu_number_of_successfull_serial_comm
 1124 0064 00000000 		.word	rte_rtu_number_of_serial_io_errors
 1125 0068 00000000 		.word	.LC0
 1126              		.cfi_endproc
 1127              	.LFE409:
 1129              		.comm	rtu_current_03_number_of_registers,1,1
 1130              		.comm	rtu_current_03_base_register,2,2
 1131              		.comm	rtu_current_03_slave_address,1,1
 1132              		.comm	rtu_used_serial_context,4,4
 1133              		.comm	rtu_used_queue,4,4
 1134              		.global	rtu_waiting_for_slave_addr
 1135              		.global	rtu_serial_previous_crc
 1136              		.global	rtu_time_of_last_succ_comm_at_previous_error_status
 1137              		.global	rtu_time_of_last_successfull_comm
 1138              		.global	rtu_blocking_io
 1139              		.global	rtu_pool_state
 1140              		.section	.bss.rtu_blocking_io,"aw",%nobits
 1141              		.set	.LANCHOR2,. + 0
 1144              	rtu_blocking_io:
 1145 0000 00       		.space	1
 1146              		.section	.bss.rtu_time_of_last_succ_comm_at_previous_error_status,"aw",%nobits
 1147              		.align	2
 1148              		.set	.LANCHOR3,. + 0
 1151              	rtu_time_of_last_succ_comm_at_previous_error_status:
 1152 0000 00000000 		.space	4
 1153              		.section	.bss.rtu_time_of_last_successfull_comm,"aw",%nobits
 1154              		.align	2
 1155              		.set	.LANCHOR4,. + 0
 1158              	rtu_time_of_last_successfull_comm:
 1159 0000 00000000 		.space	4
 1160              		.section	.data.rtu_pool_state,"aw",%progbits
 1161              		.set	.LANCHOR5,. + 0
 1164              	rtu_pool_state:
 1165 0000 05       		.byte	5
 1166              		.section	.data.rtu_serial_previous_crc,"aw",%progbits
 1167              		.align	1
 1168              		.set	.LANCHOR1,. + 0
 1171              	rtu_serial_previous_crc:
 1172 0000 FFFF     		.short	-1
 1173              		.section	.data.rtu_waiting_for_slave_addr,"aw",%progbits
 1174              		.set	.LANCHOR0,. + 0
 1177              	rtu_waiting_for_slave_addr:
 1178 0000 01       		.byte	1
 1179              		.section	.rodata.rtu_serial_get_status_string.str1.4,"aMS",%progbits,1
 1180              		.align	2
 1181              	.LC0:
 1182 0000 3E4D5420 		.ascii	">MT %lX, LRET %lX, LSCT %lX, NSSC %X, NSE %X, RXB %"
 1182      256C582C 
 1182      204C5245 
 1182      5420256C 
 1182      582C204C 
 1183 0033 6C582C20 		.ascii	"lX, RXI %X, TXB %lX\000"
 1183      52584920 
 1183      25582C20 
 1183      54584220 
 1183      256C5800 
 1184              		.text
 1185              	.Letext0:
 1186              		.file 4 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/lib/gcc/arm-none-eabi/7.3.1/include/std
 1187              		.file 5 "../system/include/cmsis/stm32l4xx/core_cm4.h"
 1188              		.file 6 "../system/include/cmsis/stm32l4xx/device/system_stm32l4xx.h"
 1189              		.file 7 "../system/include/cmsis/stm32l4xx/device/stm32l471xx.h"
 1190              		.file 8 "../system/include/./drivers/serial.h"
 1191              		.file 9 "../system/include/./modbus_rtu/rtu_pool_queue_t.h"
 1192              		.file 10 "../include/config_data.h"
 1193              		.file 11 "../system/include/modbus_rtu/rtu_serial_io.h"
 1194              		.file 12 "../system/include/modbus_rtu/rtu_register_data_t.h"
 1195              		.file 13 "../system/include/modbus_rtu/rtu_exception_t.h"
 1196              		.file 14 "../system/include/aprs/cfifo.h"
 1197              		.file 15 "../system/include/aprs/afsk.h"
 1198              		.file 16 "../system/include/aprs/ax25.h"
 1199              		.file 17 "../system/include/drivers/dallas.h"
 1200              		.file 18 "../system/include/drivers/analog_anemometer.h"
 1201              		.file 19 "../system/include/davis_vantage/davis_loop_t.h"
 1202              		.file 20 "../system/include/umb_master/umb_frame_t.h"
 1203              		.file 21 "../system/include/umb_master/umb_state_t.h"
 1204              		.file 22 "../system/include/umb_master/umb_context_t.h"
 1205              		.file 23 "../system/include/umb_master/umb_qf_t.h"
 1206              		.file 24 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/lock.h"
 1207              		.file 25 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/_types.h"
 1208              		.file 26 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/lib/gcc/arm-none-eabi/7.3.1/include/st
 1209              		.file 27 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/reent.h"
 1210              		.file 28 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/math.h"
 1211              		.file 29 "../system/include/drivers/ms5611.h"
 1212              		.file 30 "../system/include/drivers/bme280.h"
 1213              		.file 31 "../include/rte_wx.h"
 1214              		.file 32 "../include/rte_main.h"
 1215              		.file 33 "../include/rte_rtu.h"
 1216              		.file 34 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/string.h"
 1217              		.file 35 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/stdio.h"
 1218              		.file 36 "../system/include/modbus_rtu/rtu_request.h"
 1219              		.file 37 "../system/include/modbus_rtu/rtu_parser.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 rtu_serial_io.c
     /tmp/ccs5Gpba.s:18     .text.rtu_serial_callback:0000000000000000 $t
     /tmp/ccs5Gpba.s:25     .text.rtu_serial_callback:0000000000000000 rtu_serial_callback
     /tmp/ccs5Gpba.s:133    .text.rtu_serial_callback:0000000000000058 $d
     /tmp/ccs5Gpba.s:139    .text.rtu_serial_init:0000000000000000 $t
     /tmp/ccs5Gpba.s:146    .text.rtu_serial_init:0000000000000000 rtu_serial_init
     /tmp/ccs5Gpba.s:279    .text.rtu_serial_init:00000000000000b4 $d
                            *COM*:0000000000000004 rtu_used_queue
                            *COM*:0000000000000004 rtu_used_serial_context
     /tmp/ccs5Gpba.s:292    .text.rtu_serial_blocking_io:0000000000000000 $t
     /tmp/ccs5Gpba.s:299    .text.rtu_serial_blocking_io:0000000000000000 rtu_serial_blocking_io
     /tmp/ccs5Gpba.s:384    .text.rtu_serial_blocking_io:0000000000000068 $d
     /tmp/ccs5Gpba.s:391    .text.rtu_serial_pool:0000000000000000 $t
     /tmp/ccs5Gpba.s:398    .text.rtu_serial_pool:0000000000000000 rtu_serial_pool
     /tmp/ccs5Gpba.s:468    .text.rtu_serial_pool:0000000000000058 $d
     /tmp/ccs5Gpba.s:474    .text.rtu_serial_pool:0000000000000064 $t
     /tmp/ccs5Gpba.s:822    .text.rtu_serial_pool:0000000000000290 $d
                            *COM*:0000000000000001 rtu_current_03_slave_address
                            *COM*:0000000000000002 rtu_current_03_base_register
                            *COM*:0000000000000001 rtu_current_03_number_of_registers
     /tmp/ccs5Gpba.s:845    .text.rtu_serial_pool:00000000000002d8 $t
     /tmp/ccs5Gpba.s:995    .text.rtu_serial_pool:000000000000039c $d
     /tmp/ccs5Gpba.s:1006   .text.rtu_serial_start:0000000000000000 $t
     /tmp/ccs5Gpba.s:1013   .text.rtu_serial_start:0000000000000000 rtu_serial_start
     /tmp/ccs5Gpba.s:1031   .text.rtu_serial_start:000000000000000c $d
     /tmp/ccs5Gpba.s:1036   .text.rtu_serial_get_status_string:0000000000000000 $t
     /tmp/ccs5Gpba.s:1043   .text.rtu_serial_get_status_string:0000000000000000 rtu_serial_get_status_string
     /tmp/ccs5Gpba.s:1120   .text.rtu_serial_get_status_string:0000000000000054 $d
     /tmp/ccs5Gpba.s:1177   .data.rtu_waiting_for_slave_addr:0000000000000000 rtu_waiting_for_slave_addr
     /tmp/ccs5Gpba.s:1171   .data.rtu_serial_previous_crc:0000000000000000 rtu_serial_previous_crc
     /tmp/ccs5Gpba.s:1151   .bss.rtu_time_of_last_succ_comm_at_previous_error_status:0000000000000000 rtu_time_of_last_succ_comm_at_previous_error_status
     /tmp/ccs5Gpba.s:1158   .bss.rtu_time_of_last_successfull_comm:0000000000000000 rtu_time_of_last_successfull_comm
     /tmp/ccs5Gpba.s:1144   .bss.rtu_blocking_io:0000000000000000 rtu_blocking_io
     /tmp/ccs5Gpba.s:1164   .data.rtu_pool_state:0000000000000000 rtu_pool_state
     /tmp/ccs5Gpba.s:1145   .bss.rtu_blocking_io:0000000000000000 $d
     /tmp/ccs5Gpba.s:1147   .bss.rtu_time_of_last_succ_comm_at_previous_error_status:0000000000000000 $d
     /tmp/ccs5Gpba.s:1154   .bss.rtu_time_of_last_successfull_comm:0000000000000000 $d
     /tmp/ccs5Gpba.s:1167   .data.rtu_serial_previous_crc:0000000000000000 $d
     /tmp/ccs5Gpba.s:1180   .rodata.rtu_serial_get_status_string.str1.4:0000000000000000 $d
                           .group:0000000000000000 wm4.0.95bc707da9dcffdc6c8c58936cbc8421
                           .group:0000000000000000 wm4.rtu_configuration.h.9.225559723a46d58da796e0ac6cb0b2ac
                           .group:0000000000000000 wm4.stdintgcc.h.29.6d480f4ba0f60596e88234283d42444f
                           .group:0000000000000000 wm4.stm32l4xx.h.39.54a1fe1e096c7852edd649652f013a11
                           .group:0000000000000000 wm4.stm32l471xx.h.35.e78ad65c513105dda311dc495ac74d04
                           .group:0000000000000000 wm4.cmsis_version.h.32.46e8eccfa2cfeaae11d008bb2823a3ed
                           .group:0000000000000000 wm4.core_cm4.h.66.e4ff136c4a17abc46741866f64f8e729
                           .group:0000000000000000 wm4.cmsis_gcc.h.26.b6144e50d34fc998dd4c2cfb6387cf91
                           .group:0000000000000000 wm4.core_cm4.h.174.fcddd62df80231752fa39eb9b61dadfe
                           .group:0000000000000000 wm4.mpu_armv7.h.32.4049752bb5792d4e15357775e9506cfc
                           .group:0000000000000000 wm4.stm32l471xx.h.423.ceac761476affad641a3347d7727acfd
                           .group:0000000000000000 wm4.stm32l4xx.h.197.fb1c68184133668ca24c44c29ba4361f
                           .group:0000000000000000 wm4.stm32l4xx_ll_usart.h.22.ec2beebcd146668c5b35749264d7b58a
                           .group:0000000000000000 wm4.serial.h.14.eed7cf013c382ed4598746b40f0e2523
                           .group:0000000000000000 wm4.config_data.h.9.6026a38cd2f39158a8fd50707ba1bf90
                           .group:0000000000000000 wm4.rtu_return_values.h.9.ebf5128ee53fb26e4da5d61aff7556b7
                           .group:0000000000000000 wm4.stdbool.h.29.07dce69c3b78884144b7f7bd19483461
                           .group:0000000000000000 wm4.macros.h.2.7a7a5ac48d4160b7481c806e80b68442
                           .group:0000000000000000 wm4.config.h.2.f5e96167cb26b0ce97c5e7513a95bc8b
                           .group:0000000000000000 wm4.afsk.h.17.cf8f922069680e152e1eddb76cd4cc82
                           .group:0000000000000000 wm4.ax25.h.18.077e42a4af9016476e34900472a8fe18
                           .group:0000000000000000 wm4.main.h.8.42cf439a5d154d59d134d46c01c2e721
                           .group:0000000000000000 wm4.station_config.h.9.d547169434a316afe56104ac612d2109
                           .group:0000000000000000 wm4.station_config_target_hw.h.9.a20e080416e80d1cff9c1b51cc464832
                           .group:0000000000000000 wm4.stm32l4xx_ll_gpio.h.22.6ea69d1eee1200f6e0d48e871aaa811d
                           .group:0000000000000000 wm4.dallas.h.28.4c25313e4181236c94847de9c84bd06e
                           .group:0000000000000000 wm4.analog_anemometer.h.9.8c21570f6fc3dcd7763ba4d0d5168e3c
                           .group:0000000000000000 wm4.umb_frame_t.h.9.05796095a57acd1575f07118cb6ab058
                           .group:0000000000000000 wm4.umb_defines.h.9.77e79b84cd2dd9a74204aaeb1ca9d6be
                           .group:0000000000000000 wm4._newlib_version.h.4.875b979a44719054cd750d0952ad3fd6
                           .group:0000000000000000 wm4.newlib.h.18.5e5ca3429233af402d406a202f1fc1ac
                           .group:0000000000000000 wm4.ieeefp.h.77.220d9cccac42cd58761758bee2df4ce6
                           .group:0000000000000000 wm4.features.h.22.fad1cec3bc7ff06488171438dbdcfd02
                           .group:0000000000000000 wm4.config.h.220.6cac6a9685cfce5e83c17784171638d9
                           .group:0000000000000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:0000000000000000 wm4.stddef.h.39.a38874c8f8a57e66301090908ec2a69f
                           .group:0000000000000000 wm4._default_types.h.6.959254cf5f09734ea7516c89e8bb21bd
                           .group:0000000000000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:0000000000000000 wm4._types.h.125.5cf8a495f1f7ef36777ad868a1e32068
                           .group:0000000000000000 wm4.stddef.h.161.5349cb105733e8777bfb0cf53c4e3f34
                           .group:0000000000000000 wm4._types.h.184.03611d4f6b5bec9997bcf4279eceba07
                           .group:0000000000000000 wm4.reent.h.17.90c2574d4acdcfce933db5cb09ff35fe
                           .group:0000000000000000 wm4.cdefs.h.47.7eec48e1bc15e3b0aff1089c232f5a9c
                           .group:0000000000000000 wm4.math.h.13.adb102f7bd7860b1f241e149d6914a1e
                           .group:0000000000000000 wm4.ms5611.h.13.84fbf6afa85557f675e3d85f1be6067c
                           .group:0000000000000000 wm4.bme280.h.9.aefe05f9329372f30337537cea488dce
                           .group:0000000000000000 wm4.rte_wx.h.30.cb80bd87f9fae81b43459954f1781e96
                           .group:0000000000000000 wm4.string.h.8.c4b8571ce60dff2817f43fec8b86aecd
                           .group:0000000000000000 wm4.stddef.h.161.19e15733342b50ead2919490b095303e
                           .group:0000000000000000 wm4.stdio.h.27.3fc80220048df77954e38daec3bb9670
                           .group:0000000000000000 wm4.stdarg.h.34.3a23a216c0c293b3d2ea2e89281481e6
                           .group:0000000000000000 wm4.types.h.40.e8c16e7ec36ba55f133d0616070e25fc
                           .group:0000000000000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:0000000000000000 wm4._endian.h.31.65a10590763c3dde1ac4a7f66d7d4891
                           .group:0000000000000000 wm4.endian.h.9.49f3a4695c1b61e8a0808de3c4a106cb
                           .group:0000000000000000 wm4._timeval.h.30.0e8bfd94e85db17dda3286ee81496fe6
                           .group:0000000000000000 wm4.timespec.h.41.d855182eb0e690443ab8651bcedca6e1
                           .group:0000000000000000 wm4.select.h.19.97ca6fd0c752a0f3b6719fd314d361e6
                           .group:0000000000000000 wm4.types.h.69.ed3eae3cf73030a737515151ebcab7a1
                           .group:0000000000000000 wm4.sched.h.22.c60982713a5c428609783c78f9c78d95
                           .group:0000000000000000 wm4._pthreadtypes.h.36.fcee9961c35163dde6267ef772ad1972
                           .group:0000000000000000 wm4.stdio.h.2.4aa87247282eca6c8f36f9de33d8df1a
                           .group:0000000000000000 wm4.stdio.h.81.932d0c162786b883f622b8d05c120c78

UNDEFINED SYMBOLS
memset
rte_wx_modbus_rtu_f1
rte_wx_modbus_rtu_f2
rte_wx_modbus_rtu_f3
rte_wx_modbus_rtu_f4
rte_wx_modbus_rtu_f5
rte_wx_modbus_rtu_f6
srl_start_tx
srl_wait_for_tx_completion
srl_receive_data_with_callback
srl_switch_timeout_for_waiting
srl_wait_for_rx_completion_or_timeout
srl_init
srl_switch_timeout
srl_switch_tx_delay
rtu_request_03_04_registers
srl_close
rtu_parser_03_04_registers
rte_rtu_number_of_serial_io_errors
rte_main_trigger_modbus_status
rte_main_reboot_req
master_time
rte_rtu_number_of_successfull_serial_comm
rte_rtu_last_modbus_exception
rte_rtu_last_modbus_exception_timestamp
rte_rtu_last_modbus_rx_error_timestamp
snprintf
