   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"davis.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.davis_init,"ax",%progbits
  16              		.align	1
  17              		.global	davis_init
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	davis_init:
  24              	.LFB71:
  25              		.file 1 "../system/src/davis_vantage/davis.c"
   1:../system/src/davis_vantage/davis.c **** /*
   2:../system/src/davis_vantage/davis.c ****  * davis_vantage.c
   3:../system/src/davis_vantage/davis.c ****  *
   4:../system/src/davis_vantage/davis.c ****  *  Created on: 06.08.2020
   5:../system/src/davis_vantage/davis.c ****  *      Author: mateusz
   6:../system/src/davis_vantage/davis.c ****  */
   7:../system/src/davis_vantage/davis.c **** 
   8:../system/src/davis_vantage/davis.c **** #include <davis_vantage/davis.h>
   9:../system/src/davis_vantage/davis.c **** #include <davis_vantage/davis_parsers.h>
  10:../system/src/davis_vantage/davis.c **** #include <davis_vantage/davis_query_state_t.h>
  11:../system/src/davis_vantage/davis.c **** #include <davis_vantage/davis_global_state_t.h>
  12:../system/src/davis_vantage/davis.c **** #include <davis_vantage/davis_qf_t.h>
  13:../system/src/davis_vantage/davis.c **** 
  14:../system/src/davis_vantage/davis.c **** #include <string.h>
  15:../system/src/davis_vantage/davis.c **** 
  16:../system/src/davis_vantage/davis.c **** #include "main.h"
  17:../system/src/davis_vantage/davis.c **** 
  18:../system/src/davis_vantage/davis.c **** #define DAVIS_ACK 0x06
  19:../system/src/davis_vantage/davis.c **** 
  20:../system/src/davis_vantage/davis.c **** #define LOOP_PACKET_LN 				100
  21:../system/src/davis_vantage/davis.c **** #define RX_CHECK_LN_WITH_ACK		32
  22:../system/src/davis_vantage/davis.c **** #define RX_CHECK_MIN_LN_WITH_ACK	16
  23:../system/src/davis_vantage/davis.c **** 
  24:../system/src/davis_vantage/davis.c **** #define DAVIS_QUERY_ABOUT_LOOP2
  25:../system/src/davis_vantage/davis.c **** 
  26:../system/src/davis_vantage/davis.c **** /**
  27:../system/src/davis_vantage/davis.c ****  * Serial port context to be used for communication
  28:../system/src/davis_vantage/davis.c ****  */
  29:../system/src/davis_vantage/davis.c **** srl_context_t* davis_serial_context;
  30:../system/src/davis_vantage/davis.c **** 
  31:../system/src/davis_vantage/davis.c **** /**
  32:../system/src/davis_vantage/davis.c ****  * The internal state during loop packet retrieval
  33:../system/src/davis_vantage/davis.c ****  */
  34:../system/src/davis_vantage/davis.c **** davis_query_state_t davis_loop_state;
  35:../system/src/davis_vantage/davis.c **** 
  36:../system/src/davis_vantage/davis.c **** /**
  37:../system/src/davis_vantage/davis.c ****  * Internal state during waking up the station base
  38:../system/src/davis_vantage/davis.c ****  */
  39:../system/src/davis_vantage/davis.c **** davis_query_state_t davis_wake_up_state;
  40:../system/src/davis_vantage/davis.c **** 
  41:../system/src/davis_vantage/davis.c **** /**
  42:../system/src/davis_vantage/davis.c ****  * Internal state during RXCHECK query
  43:../system/src/davis_vantage/davis.c ****  */
  44:../system/src/davis_vantage/davis.c **** davis_query_state_t davis_rx_check_state;
  45:../system/src/davis_vantage/davis.c **** 
  46:../system/src/davis_vantage/davis.c **** /**
  47:../system/src/davis_vantage/davis.c ****  * Global state of Davis Vantage communication
  48:../system/src/davis_vantage/davis.c ****  */
  49:../system/src/davis_vantage/davis.c **** dallas_global_state_t davis_global_state;
  50:../system/src/davis_vantage/davis.c **** 
  51:../system/src/davis_vantage/davis.c **** /**
  52:../system/src/davis_vantage/davis.c ****  *
  53:../system/src/davis_vantage/davis.c ****  */
  54:../system/src/davis_vantage/davis.c **** davis_qf_t davis_quality_factor;
  55:../system/src/davis_vantage/davis.c **** 
  56:../system/src/davis_vantage/davis.c **** /**
  57:../system/src/davis_vantage/davis.c ****  * Set to one if station was detected during bootup
  58:../system/src/davis_vantage/davis.c ****  */
  59:../system/src/davis_vantage/davis.c **** uint8_t davis_avaliable;
  60:../system/src/davis_vantage/davis.c **** 
  61:../system/src/davis_vantage/davis.c **** uint16_t davis_base_total_packet_received = 0;
  62:../system/src/davis_vantage/davis.c **** 
  63:../system/src/davis_vantage/davis.c **** uint16_t davis_base_total_packet_missed = 0;
  64:../system/src/davis_vantage/davis.c **** 
  65:../system/src/davis_vantage/davis.c **** uint16_t davis_base_resynchronizations = 0;
  66:../system/src/davis_vantage/davis.c **** 
  67:../system/src/davis_vantage/davis.c **** uint16_t davis_base_packets_in_the_row = 0;
  68:../system/src/davis_vantage/davis.c **** 
  69:../system/src/davis_vantage/davis.c **** uint16_t davis_base_crc_errors = 0;
  70:../system/src/davis_vantage/davis.c **** 
  71:../system/src/davis_vantage/davis.c **** uint32_t davis_last_good_loop = 0;
  72:../system/src/davis_vantage/davis.c **** 
  73:../system/src/davis_vantage/davis.c **** uint32_t davis_last_good_rxcheck = 0;
  74:../system/src/davis_vantage/davis.c **** 
  75:../system/src/davis_vantage/davis.c **** static const char line_feed = '\n';
  76:../system/src/davis_vantage/davis.c **** static const char line_feed_return[] = {'\n', '\r'};
  77:../system/src/davis_vantage/davis.c **** static const char lamps_off[] = "LAMPS 0\n";
  78:../system/src/davis_vantage/davis.c **** static const char lamps_on[] = "LAMPS 1\n";
  79:../system/src/davis_vantage/davis.c **** static const char leave_rx_screen[] = "RXTEST\n";	// it also resets
  80:../system/src/davis_vantage/davis.c **** static const char rx_check[] = "RXCHECK\n";
  81:../system/src/davis_vantage/davis.c **** #ifdef DAVIS_QUERY_ABOUT_LOOP2
  82:../system/src/davis_vantage/davis.c **** static const char loop_command[] = "LPS 2 1\n";
  83:../system/src/davis_vantage/davis.c **** #else
  84:../system/src/davis_vantage/davis.c **** static const char loop_command[] = "LOOP 1\n";
  85:../system/src/davis_vantage/davis.c **** #endif
  86:../system/src/davis_vantage/davis.c **** 
  87:../system/src/davis_vantage/davis.c **** 
  88:../system/src/davis_vantage/davis.c **** uint32_t davis_init(srl_context_t* srl_port) {
  26              		.loc 1 88 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 10B5     		push	{r4, lr}
  32              		.cfi_def_cfa_offset 8
  33              		.cfi_offset 4, -8
  34              		.cfi_offset 14, -4
  35              	.LVL1:
  89:../system/src/davis_vantage/davis.c **** 
  90:../system/src/davis_vantage/davis.c **** 	uint32_t retval = DAVIS_OK;
  91:../system/src/davis_vantage/davis.c **** 
  92:../system/src/davis_vantage/davis.c **** 	davis_serial_context = srl_port;
  36              		.loc 1 92 0
  37 0002 0B4B     		ldr	r3, .L3
  38 0004 1860     		str	r0, [r3]
  93:../system/src/davis_vantage/davis.c **** 
  94:../system/src/davis_vantage/davis.c **** 	davis_quality_factor = DAVIS_QF_UNINITIALIZED;
  39              		.loc 1 94 0
  40 0006 0024     		movs	r4, #0
  41 0008 0A4B     		ldr	r3, .L3+4
  42 000a 1C70     		strb	r4, [r3]
  95:../system/src/davis_vantage/davis.c **** 
  96:../system/src/davis_vantage/davis.c **** 	davis_loop_state = DAVIS_QUERY_IDLE;
  43              		.loc 1 96 0
  44 000c 0A4B     		ldr	r3, .L3+8
  45 000e 1C70     		strb	r4, [r3]
  97:../system/src/davis_vantage/davis.c **** 
  98:../system/src/davis_vantage/davis.c **** 	davis_wake_up_state = DAVIS_QUERY_IDLE;
  46              		.loc 1 98 0
  47 0010 0A4B     		ldr	r3, .L3+12
  48 0012 1C70     		strb	r4, [r3]
  99:../system/src/davis_vantage/davis.c **** 
 100:../system/src/davis_vantage/davis.c **** 	davis_rx_check_state = DAVIS_QUERY_IDLE;
  49              		.loc 1 100 0
  50 0014 0A4B     		ldr	r3, .L3+16
  51 0016 1C70     		strb	r4, [r3]
 101:../system/src/davis_vantage/davis.c **** 
 102:../system/src/davis_vantage/davis.c **** 	davis_global_state = DAVIS_GLOBAL_IDLE_OR_BLOCKING;
  52              		.loc 1 102 0
  53 0018 0A4B     		ldr	r3, .L3+20
  54 001a 1C70     		strb	r4, [r3]
 103:../system/src/davis_vantage/davis.c **** 
 104:../system/src/davis_vantage/davis.c **** 	davis_avaliable = 0;
  55              		.loc 1 104 0
  56 001c 0A4B     		ldr	r3, .L3+24
  57 001e 1C70     		strb	r4, [r3]
 105:../system/src/davis_vantage/davis.c **** 
 106:../system/src/davis_vantage/davis.c **** 	// set the timeout according to davis vantage documentation
 107:../system/src/davis_vantage/davis.c **** 	srl_switch_timeout(srl_port, 1, 1200);
  58              		.loc 1 107 0
  59 0020 4FF49662 		mov	r2, #1200
  60 0024 0121     		movs	r1, #1
  61 0026 FFF7FEFF 		bl	srl_switch_timeout
  62              	.LVL2:
 108:../system/src/davis_vantage/davis.c **** 
 109:../system/src/davis_vantage/davis.c **** 	return retval;
 110:../system/src/davis_vantage/davis.c **** }
  63              		.loc 1 110 0
  64 002a 2046     		mov	r0, r4
  65 002c 10BD     		pop	{r4, pc}
  66              	.L4:
  67 002e 00BF     		.align	2
  68              	.L3:
  69 0030 00000000 		.word	davis_serial_context
  70 0034 00000000 		.word	davis_quality_factor
  71 0038 00000000 		.word	davis_loop_state
  72 003c 00000000 		.word	davis_wake_up_state
  73 0040 00000000 		.word	davis_rx_check_state
  74 0044 00000000 		.word	davis_global_state
  75 0048 00000000 		.word	davis_avaliable
  76              		.cfi_endproc
  77              	.LFE71:
  79              		.section	.text.davis_wake_up,"ax",%progbits
  80              		.align	1
  81              		.global	davis_wake_up
  82              		.syntax unified
  83              		.thumb
  84              		.thumb_func
  85              		.fpu softvfp
  87              	davis_wake_up:
  88              	.LFB72:
 111:../system/src/davis_vantage/davis.c **** 
 112:../system/src/davis_vantage/davis.c **** /**
 113:../system/src/davis_vantage/davis.c ****  * This function may have blocking I/O
 114:../system/src/davis_vantage/davis.c ****  */
 115:../system/src/davis_vantage/davis.c **** uint32_t davis_wake_up(uint8_t is_io_blocking) {
  89              		.loc 1 115 0
  90              		.cfi_startproc
  91              		@ args = 0, pretend = 0, frame = 8
  92              		@ frame_needed = 0, uses_anonymous_args = 0
  93              	.LVL3:
  94 0000 30B5     		push	{r4, r5, lr}
  95              		.cfi_def_cfa_offset 12
  96              		.cfi_offset 4, -12
  97              		.cfi_offset 5, -8
  98              		.cfi_offset 14, -4
  99 0002 87B0     		sub	sp, sp, #28
 100              		.cfi_def_cfa_offset 40
 116:../system/src/davis_vantage/davis.c **** 
 117:../system/src/davis_vantage/davis.c **** 	uint32_t retval = DAVIS_OK;
 101              		.loc 1 117 0
 102 0004 0023     		movs	r3, #0
 103 0006 0593     		str	r3, [sp, #20]
 104              	.LVL4:
 118:../system/src/davis_vantage/davis.c **** 
 119:../system/src/davis_vantage/davis.c **** 	int comparation_result = -1;
 120:../system/src/davis_vantage/davis.c **** 
 121:../system/src/davis_vantage/davis.c **** 	if (davis_global_state == DAVIS_GLOBAL_IDLE_OR_BLOCKING || davis_global_state == DAVIS_GLOBAL_WAKE
 105              		.loc 1 121 0
 106 0008 684B     		ldr	r3, .L27
 107 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 108 000c 33B1     		cbz	r3, .L6
 109              		.loc 1 121 0 is_stmt 0 discriminator 1
 110 000e 032B     		cmp	r3, #3
 111 0010 04D0     		beq	.L6
 122:../system/src/davis_vantage/davis.c **** 
 123:../system/src/davis_vantage/davis.c **** 		// switch the internal state
 124:../system/src/davis_vantage/davis.c **** 		davis_global_state = DAVIS_GLOBAL_WAKE_UP;
 125:../system/src/davis_vantage/davis.c **** 
 126:../system/src/davis_vantage/davis.c **** 		// sending the new line to wake up the console
 127:../system/src/davis_vantage/davis.c **** 		srl_send_data(davis_serial_context, (uint8_t*)&line_feed, 1, 1, 0);
 128:../system/src/davis_vantage/davis.c **** 
 129:../system/src/davis_vantage/davis.c **** 		// check if a user want to have blocking I/O
 130:../system/src/davis_vantage/davis.c **** 		if (is_io_blocking == 1) {
 131:../system/src/davis_vantage/davis.c **** 			// if yes wait for transmission completion and then wait for response
 132:../system/src/davis_vantage/davis.c **** 			srl_wait_for_tx_completion(davis_serial_context);
 133:../system/src/davis_vantage/davis.c **** 
 134:../system/src/davis_vantage/davis.c **** 			// start waiting for console response
 135:../system/src/davis_vantage/davis.c **** 			srl_receive_data_with_instant_timeout(davis_serial_context, 2, 0, 0, 0, 0, 0);
 136:../system/src/davis_vantage/davis.c **** 
 137:../system/src/davis_vantage/davis.c **** 			// wait for station response or for timeout
 138:../system/src/davis_vantage/davis.c **** 			srl_wait_for_rx_completion_or_timeout(davis_serial_context, ((uint8_t*)&retval));
 139:../system/src/davis_vantage/davis.c **** 
 140:../system/src/davis_vantage/davis.c **** 			// if response has been received
 141:../system/src/davis_vantage/davis.c **** 			if (retval == SRL_OK) {
 142:../system/src/davis_vantage/davis.c **** 				//
 143:../system/src/davis_vantage/davis.c **** 				retval = DAVIS_OK;
 144:../system/src/davis_vantage/davis.c **** 
 145:../system/src/davis_vantage/davis.c **** 				// set the quality factor appropriate to signalize that the station
 146:../system/src/davis_vantage/davis.c **** 				// is avaliable
 147:../system/src/davis_vantage/davis.c **** 				davis_quality_factor = DAVIS_QF_FULL;
 148:../system/src/davis_vantage/davis.c **** 
 149:../system/src/davis_vantage/davis.c **** 				davis_avaliable = 1;
 150:../system/src/davis_vantage/davis.c **** 			}
 151:../system/src/davis_vantage/davis.c **** 			else {
 152:../system/src/davis_vantage/davis.c **** 				// send the wake up command one more time
 153:../system/src/davis_vantage/davis.c **** 
 154:../system/src/davis_vantage/davis.c **** 				// sending the new line to wake up the console
 155:../system/src/davis_vantage/davis.c **** 				srl_send_data(davis_serial_context, (uint8_t*)&line_feed, 1, 1, 0);
 156:../system/src/davis_vantage/davis.c **** 
 157:../system/src/davis_vantage/davis.c **** 				// if yes wait for transmission completion and then wait for response
 158:../system/src/davis_vantage/davis.c **** 				srl_wait_for_tx_completion(davis_serial_context);
 159:../system/src/davis_vantage/davis.c **** 
 160:../system/src/davis_vantage/davis.c **** 				// start waiting for console response
 161:../system/src/davis_vantage/davis.c **** 				srl_receive_data(davis_serial_context, 2, 0, 0, 0, 0, 0);
 162:../system/src/davis_vantage/davis.c **** 
 163:../system/src/davis_vantage/davis.c **** 				// wait for station response or for timeout
 164:../system/src/davis_vantage/davis.c **** 				srl_wait_for_rx_completion_or_timeout(davis_serial_context, ((uint8_t*)&retval));
 165:../system/src/davis_vantage/davis.c **** 
 166:../system/src/davis_vantage/davis.c **** 				// if second attempt was successful
 167:../system/src/davis_vantage/davis.c **** 				if (retval == SRL_OK) {
 168:../system/src/davis_vantage/davis.c **** 					retval = DAVIS_OK;
 169:../system/src/davis_vantage/davis.c **** 
 170:../system/src/davis_vantage/davis.c **** 					// set the quality factor appropriate to signalize that the station
 171:../system/src/davis_vantage/davis.c **** 					// is avaliable
 172:../system/src/davis_vantage/davis.c **** 					davis_quality_factor = DAVIS_QF_FULL;
 173:../system/src/davis_vantage/davis.c **** 
 174:../system/src/davis_vantage/davis.c **** 					davis_avaliable = 1;
 175:../system/src/davis_vantage/davis.c **** 				}
 176:../system/src/davis_vantage/davis.c **** 				else {
 177:../system/src/davis_vantage/davis.c **** 					// if not the station is dead an
 178:../system/src/davis_vantage/davis.c **** 					davis_quality_factor = DAVIS_QF_NOT_AVALIABLE;
 179:../system/src/davis_vantage/davis.c **** 
 180:../system/src/davis_vantage/davis.c **** 					retval = DAVIS_NOT_AVALIABLE;
 181:../system/src/davis_vantage/davis.c **** 				}
 182:../system/src/davis_vantage/davis.c **** 
 183:../system/src/davis_vantage/davis.c **** 			}
 184:../system/src/davis_vantage/davis.c **** 
 185:../system/src/davis_vantage/davis.c **** 			// switch the internal state to release the station
 186:../system/src/davis_vantage/davis.c **** 			davis_global_state = DAVIS_GLOBAL_IDLE_OR_BLOCKING;
 187:../system/src/davis_vantage/davis.c **** 
 188:../system/src/davis_vantage/davis.c **** 		}
 189:../system/src/davis_vantage/davis.c **** 		else {
 190:../system/src/davis_vantage/davis.c **** 			// non blocking input/output
 191:../system/src/davis_vantage/davis.c **** 			switch (davis_wake_up_state) {
 192:../system/src/davis_vantage/davis.c **** 				case DAVIS_QUERY_IDLE: {
 193:../system/src/davis_vantage/davis.c **** 					// sending the new line to wake up the console
 194:../system/src/davis_vantage/davis.c **** 					srl_send_data(davis_serial_context, (uint8_t*)&line_feed, 1, 1, 0);
 195:../system/src/davis_vantage/davis.c **** 
 196:../system/src/davis_vantage/davis.c **** 					// switching the internal state
 197:../system/src/davis_vantage/davis.c **** 					davis_wake_up_state = DAVIS_QUERY_SENDING_QUERY;
 198:../system/src/davis_vantage/davis.c **** 
 199:../system/src/davis_vantage/davis.c **** 					// switch the internal state to block another poolers
 200:../system/src/davis_vantage/davis.c **** 					davis_global_state =  DAVIS_GLOBAL_WAKE_UP;
 201:../system/src/davis_vantage/davis.c **** 
 202:../system/src/davis_vantage/davis.c **** 					break;
 203:../system/src/davis_vantage/davis.c **** 				}
 204:../system/src/davis_vantage/davis.c **** 				case DAVIS_QUERY_SENDING_QUERY: {
 205:../system/src/davis_vantage/davis.c **** 					// check if wakeup has been sent
 206:../system/src/davis_vantage/davis.c **** 
 207:../system/src/davis_vantage/davis.c **** 					if (davis_serial_context->srl_tx_state == SRL_TX_IDLE) {
 208:../system/src/davis_vantage/davis.c **** 						// if transmission was successful trigger the reception
 209:../system/src/davis_vantage/davis.c **** 						srl_receive_data(davis_serial_context, 2, 0, 0, 0, 0, 0);
 210:../system/src/davis_vantage/davis.c **** 
 211:../system/src/davis_vantage/davis.c **** 						// switching the internal state
 212:../system/src/davis_vantage/davis.c **** 						davis_wake_up_state = DAVIS_QUERY_RECEIVING;
 213:../system/src/davis_vantage/davis.c **** 					}
 214:../system/src/davis_vantage/davis.c **** 
 215:../system/src/davis_vantage/davis.c **** 					if (davis_serial_context->srl_tx_state == SRL_TX_ERROR) {
 216:../system/src/davis_vantage/davis.c **** 						davis_wake_up_state = DAVIS_QUERY_ERROR;
 217:../system/src/davis_vantage/davis.c **** 
 218:../system/src/davis_vantage/davis.c **** 						davis_global_state =  DAVIS_GLOBAL_IDLE_OR_BLOCKING;
 219:../system/src/davis_vantage/davis.c **** 					}
 220:../system/src/davis_vantage/davis.c **** 
 221:../system/src/davis_vantage/davis.c **** 					break;
 222:../system/src/davis_vantage/davis.c **** 				}
 223:../system/src/davis_vantage/davis.c **** 				case DAVIS_QUERY_RECEIVING: {
 224:../system/src/davis_vantage/davis.c **** 					// check if receive has been successfull
 225:../system/src/davis_vantage/davis.c **** 
 226:../system/src/davis_vantage/davis.c **** 					if (davis_serial_context->srl_rx_state == SRL_RX_DONE) {
 227:../system/src/davis_vantage/davis.c **** 						// check the content of what was received from the davis
 228:../system/src/davis_vantage/davis.c **** 						comparation_result = memcmp(line_feed_return, srl_get_rx_buffer(davis_serial_context), 2);
 229:../system/src/davis_vantage/davis.c **** 
 230:../system/src/davis_vantage/davis.c **** 						if (comparation_result == 0) {
 231:../system/src/davis_vantage/davis.c **** 							// if the base of davis wx station responden with '\r\n' it measn that wake up was sucessful
 232:../system/src/davis_vantage/davis.c **** 							davis_wake_up_state = DAVIS_QUERY_OK;
 233:../system/src/davis_vantage/davis.c **** 						}
 234:../system/src/davis_vantage/davis.c **** 						else {
 235:../system/src/davis_vantage/davis.c **** 							davis_wake_up_state = DAVIS_QUERY_ERROR;
 236:../system/src/davis_vantage/davis.c **** 						}
 237:../system/src/davis_vantage/davis.c **** 
 238:../system/src/davis_vantage/davis.c **** 						davis_global_state =  DAVIS_GLOBAL_IDLE_OR_BLOCKING;
 239:../system/src/davis_vantage/davis.c **** 					}
 240:../system/src/davis_vantage/davis.c **** 
 241:../system/src/davis_vantage/davis.c **** 					if (davis_serial_context->srl_rx_state == SRL_RX_ERROR) {
 242:../system/src/davis_vantage/davis.c **** 						davis_wake_up_state = DAVIS_QUERY_ERROR;
 243:../system/src/davis_vantage/davis.c **** 
 244:../system/src/davis_vantage/davis.c **** 						davis_global_state =  DAVIS_GLOBAL_IDLE_OR_BLOCKING;
 245:../system/src/davis_vantage/davis.c **** 					}
 246:../system/src/davis_vantage/davis.c **** 
 247:../system/src/davis_vantage/davis.c **** 
 248:../system/src/davis_vantage/davis.c **** 					break;
 249:../system/src/davis_vantage/davis.c **** 				}
 250:../system/src/davis_vantage/davis.c **** 				case DAVIS_QUERY_OK: {
 251:../system/src/davis_vantage/davis.c **** 					davis_avaliable = 1;
 252:../system/src/davis_vantage/davis.c **** 					break;
 253:../system/src/davis_vantage/davis.c **** 				}
 254:../system/src/davis_vantage/davis.c **** 				case DAVIS_QUERY_ERROR: {
 255:../system/src/davis_vantage/davis.c **** 					davis_avaliable = 0;
 256:../system/src/davis_vantage/davis.c **** 					break;
 257:../system/src/davis_vantage/davis.c **** 				}
 258:../system/src/davis_vantage/davis.c **** 			}
 259:../system/src/davis_vantage/davis.c **** 		}
 260:../system/src/davis_vantage/davis.c **** 	}
 261:../system/src/davis_vantage/davis.c **** 	else {
 262:../system/src/davis_vantage/davis.c **** 		// if station is currently busy on another transmission return with an error
 263:../system/src/davis_vantage/davis.c **** 		retval = DAVIS_BUSY;
 112              		.loc 1 263 0 is_stmt 1
 113 0012 0423     		movs	r3, #4
 114 0014 0593     		str	r3, [sp, #20]
 115              	.LVL5:
 116              	.L12:
 264:../system/src/davis_vantage/davis.c **** 	}
 265:../system/src/davis_vantage/davis.c **** 
 266:../system/src/davis_vantage/davis.c **** 	return retval;
 267:../system/src/davis_vantage/davis.c **** }
 117              		.loc 1 267 0
 118 0016 0598     		ldr	r0, [sp, #20]
 119 0018 07B0     		add	sp, sp, #28
 120              		.cfi_remember_state
 121              		.cfi_def_cfa_offset 12
 122              		@ sp needed
 123 001a 30BD     		pop	{r4, r5, pc}
 124              	.LVL6:
 125              	.L6:
 126              		.cfi_restore_state
 127 001c 0446     		mov	r4, r0
 124:../system/src/davis_vantage/davis.c **** 
 128              		.loc 1 124 0
 129 001e 634B     		ldr	r3, .L27
 130 0020 0322     		movs	r2, #3
 131 0022 1A70     		strb	r2, [r3]
 127:../system/src/davis_vantage/davis.c **** 
 132              		.loc 1 127 0
 133 0024 624B     		ldr	r3, .L27+4
 134 0026 1868     		ldr	r0, [r3]
 135              	.LVL7:
 136 0028 0023     		movs	r3, #0
 137 002a 0093     		str	r3, [sp]
 138 002c 0123     		movs	r3, #1
 139 002e 1A46     		mov	r2, r3
 140 0030 6049     		ldr	r1, .L27+8
 141 0032 FFF7FEFF 		bl	srl_send_data
 142              	.LVL8:
 130:../system/src/davis_vantage/davis.c **** 			// if yes wait for transmission completion and then wait for response
 143              		.loc 1 130 0
 144 0036 012C     		cmp	r4, #1
 145 0038 12D0     		beq	.L24
 191:../system/src/davis_vantage/davis.c **** 				case DAVIS_QUERY_IDLE: {
 146              		.loc 1 191 0
 147 003a 5F4B     		ldr	r3, .L27+12
 148 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 149 003e 052B     		cmp	r3, #5
 150 0040 E9D8     		bhi	.L12
 151 0042 01A2     		adr	r2, .L14
 152 0044 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 153              		.p2align 2
 154              	.L14:
 155 0048 ED000000 		.word	.L13+1
 156 004c 0D010000 		.word	.L15+1
 157 0050 17000000 		.word	.L12+1
 158 0054 4D010000 		.word	.L16+1
 159 0058 9B010000 		.word	.L17+1
 160 005c A3010000 		.word	.L18+1
 161              		.p2align 1
 162              	.L24:
 132:../system/src/davis_vantage/davis.c **** 
 163              		.loc 1 132 0
 164 0060 534C     		ldr	r4, .L27+4
 165 0062 2068     		ldr	r0, [r4]
 166 0064 FFF7FEFF 		bl	srl_wait_for_tx_completion
 167              	.LVL9:
 135:../system/src/davis_vantage/davis.c **** 
 168              		.loc 1 135 0
 169 0068 0022     		movs	r2, #0
 170 006a 0292     		str	r2, [sp, #8]
 171 006c 0192     		str	r2, [sp, #4]
 172 006e 0092     		str	r2, [sp]
 173 0070 1346     		mov	r3, r2
 174 0072 0221     		movs	r1, #2
 175 0074 2068     		ldr	r0, [r4]
 176 0076 FFF7FEFF 		bl	srl_receive_data_with_instant_timeout
 177              	.LVL10:
 138:../system/src/davis_vantage/davis.c **** 
 178              		.loc 1 138 0
 179 007a 05A9     		add	r1, sp, #20
 180 007c 2068     		ldr	r0, [r4]
 181 007e FFF7FEFF 		bl	srl_wait_for_rx_completion_or_timeout
 182              	.LVL11:
 141:../system/src/davis_vantage/davis.c **** 				//
 183              		.loc 1 141 0
 184 0082 059B     		ldr	r3, [sp, #20]
 185 0084 53B9     		cbnz	r3, .L9
 143:../system/src/davis_vantage/davis.c **** 
 186              		.loc 1 143 0
 187 0086 0593     		str	r3, [sp, #20]
 147:../system/src/davis_vantage/davis.c **** 
 188              		.loc 1 147 0
 189 0088 4C4B     		ldr	r3, .L27+16
 190 008a 0522     		movs	r2, #5
 191 008c 1A70     		strb	r2, [r3]
 149:../system/src/davis_vantage/davis.c **** 			}
 192              		.loc 1 149 0
 193 008e 4C4B     		ldr	r3, .L27+20
 194 0090 0122     		movs	r2, #1
 195 0092 1A70     		strb	r2, [r3]
 196              	.L10:
 186:../system/src/davis_vantage/davis.c **** 
 197              		.loc 1 186 0
 198 0094 454B     		ldr	r3, .L27
 199 0096 0022     		movs	r2, #0
 200 0098 1A70     		strb	r2, [r3]
 201 009a BCE7     		b	.L12
 202              	.L9:
 155:../system/src/davis_vantage/davis.c **** 
 203              		.loc 1 155 0
 204 009c 444D     		ldr	r5, .L27+4
 205 009e 0024     		movs	r4, #0
 206 00a0 0094     		str	r4, [sp]
 207 00a2 0123     		movs	r3, #1
 208 00a4 1A46     		mov	r2, r3
 209 00a6 4349     		ldr	r1, .L27+8
 210 00a8 2868     		ldr	r0, [r5]
 211 00aa FFF7FEFF 		bl	srl_send_data
 212              	.LVL12:
 158:../system/src/davis_vantage/davis.c **** 
 213              		.loc 1 158 0
 214 00ae 2868     		ldr	r0, [r5]
 215 00b0 FFF7FEFF 		bl	srl_wait_for_tx_completion
 216              	.LVL13:
 161:../system/src/davis_vantage/davis.c **** 
 217              		.loc 1 161 0
 218 00b4 0294     		str	r4, [sp, #8]
 219 00b6 0194     		str	r4, [sp, #4]
 220 00b8 0094     		str	r4, [sp]
 221 00ba 2346     		mov	r3, r4
 222 00bc 2246     		mov	r2, r4
 223 00be 0221     		movs	r1, #2
 224 00c0 2868     		ldr	r0, [r5]
 225 00c2 FFF7FEFF 		bl	srl_receive_data
 226              	.LVL14:
 164:../system/src/davis_vantage/davis.c **** 
 227              		.loc 1 164 0
 228 00c6 05A9     		add	r1, sp, #20
 229 00c8 2868     		ldr	r0, [r5]
 230 00ca FFF7FEFF 		bl	srl_wait_for_rx_completion_or_timeout
 231              	.LVL15:
 167:../system/src/davis_vantage/davis.c **** 					retval = DAVIS_OK;
 232              		.loc 1 167 0
 233 00ce 059B     		ldr	r3, [sp, #20]
 234 00d0 3BB9     		cbnz	r3, .L11
 168:../system/src/davis_vantage/davis.c **** 
 235              		.loc 1 168 0
 236 00d2 0594     		str	r4, [sp, #20]
 172:../system/src/davis_vantage/davis.c **** 
 237              		.loc 1 172 0
 238 00d4 394B     		ldr	r3, .L27+16
 239 00d6 0522     		movs	r2, #5
 240 00d8 1A70     		strb	r2, [r3]
 174:../system/src/davis_vantage/davis.c **** 				}
 241              		.loc 1 174 0
 242 00da 394B     		ldr	r3, .L27+20
 243 00dc 0122     		movs	r2, #1
 244 00de 1A70     		strb	r2, [r3]
 245 00e0 D8E7     		b	.L10
 246              	.L11:
 178:../system/src/davis_vantage/davis.c **** 
 247              		.loc 1 178 0
 248 00e2 0123     		movs	r3, #1
 249 00e4 354A     		ldr	r2, .L27+16
 250 00e6 1370     		strb	r3, [r2]
 180:../system/src/davis_vantage/davis.c **** 				}
 251              		.loc 1 180 0
 252 00e8 0593     		str	r3, [sp, #20]
 253 00ea D3E7     		b	.L10
 254              	.L13:
 194:../system/src/davis_vantage/davis.c **** 
 255              		.loc 1 194 0
 256 00ec 304B     		ldr	r3, .L27+4
 257 00ee 1868     		ldr	r0, [r3]
 258 00f0 0023     		movs	r3, #0
 259 00f2 0093     		str	r3, [sp]
 260 00f4 0123     		movs	r3, #1
 261 00f6 1A46     		mov	r2, r3
 262 00f8 2E49     		ldr	r1, .L27+8
 263 00fa FFF7FEFF 		bl	srl_send_data
 264              	.LVL16:
 197:../system/src/davis_vantage/davis.c **** 
 265              		.loc 1 197 0
 266 00fe 2E4B     		ldr	r3, .L27+12
 267 0100 0122     		movs	r2, #1
 268 0102 1A70     		strb	r2, [r3]
 200:../system/src/davis_vantage/davis.c **** 
 269              		.loc 1 200 0
 270 0104 294B     		ldr	r3, .L27
 271 0106 0322     		movs	r2, #3
 272 0108 1A70     		strb	r2, [r3]
 202:../system/src/davis_vantage/davis.c **** 				}
 273              		.loc 1 202 0
 274 010a 84E7     		b	.L12
 275              	.L15:
 207:../system/src/davis_vantage/davis.c **** 						// if transmission was successful trigger the reception
 276              		.loc 1 207 0
 277 010c 284B     		ldr	r3, .L27+4
 278 010e 1868     		ldr	r0, [r3]
 279 0110 90F84530 		ldrb	r3, [r0, #69]	@ zero_extendqisi2
 280 0114 012B     		cmp	r3, #1
 281 0116 0DD0     		beq	.L25
 282              	.L19:
 215:../system/src/davis_vantage/davis.c **** 						davis_wake_up_state = DAVIS_QUERY_ERROR;
 283              		.loc 1 215 0
 284 0118 254B     		ldr	r3, .L27+4
 285 011a 1B68     		ldr	r3, [r3]
 286 011c 93F84530 		ldrb	r3, [r3, #69]	@ zero_extendqisi2
 287 0120 042B     		cmp	r3, #4
 288 0122 7FF478AF 		bne	.L12
 216:../system/src/davis_vantage/davis.c **** 
 289              		.loc 1 216 0
 290 0126 244B     		ldr	r3, .L27+12
 291 0128 0522     		movs	r2, #5
 292 012a 1A70     		strb	r2, [r3]
 218:../system/src/davis_vantage/davis.c **** 					}
 293              		.loc 1 218 0
 294 012c 1F4B     		ldr	r3, .L27
 295 012e 0022     		movs	r2, #0
 296 0130 1A70     		strb	r2, [r3]
 297 0132 70E7     		b	.L12
 298              	.L25:
 209:../system/src/davis_vantage/davis.c **** 
 299              		.loc 1 209 0
 300 0134 0022     		movs	r2, #0
 301 0136 0292     		str	r2, [sp, #8]
 302 0138 0192     		str	r2, [sp, #4]
 303 013a 0092     		str	r2, [sp]
 304 013c 1346     		mov	r3, r2
 305 013e 0221     		movs	r1, #2
 306 0140 FFF7FEFF 		bl	srl_receive_data
 307              	.LVL17:
 212:../system/src/davis_vantage/davis.c **** 					}
 308              		.loc 1 212 0
 309 0144 1C4B     		ldr	r3, .L27+12
 310 0146 0322     		movs	r2, #3
 311 0148 1A70     		strb	r2, [r3]
 312 014a E5E7     		b	.L19
 313              	.L16:
 226:../system/src/davis_vantage/davis.c **** 						// check the content of what was received from the davis
 314              		.loc 1 226 0
 315 014c 184B     		ldr	r3, .L27+4
 316 014e 1868     		ldr	r0, [r3]
 317 0150 90F84430 		ldrb	r3, [r0, #68]	@ zero_extendqisi2
 318 0154 042B     		cmp	r3, #4
 319 0156 0DD0     		beq	.L26
 320              	.LVL18:
 321              	.L20:
 241:../system/src/davis_vantage/davis.c **** 						davis_wake_up_state = DAVIS_QUERY_ERROR;
 322              		.loc 1 241 0
 323 0158 154B     		ldr	r3, .L27+4
 324 015a 1B68     		ldr	r3, [r3]
 325 015c 93F84430 		ldrb	r3, [r3, #68]	@ zero_extendqisi2
 326 0160 052B     		cmp	r3, #5
 327 0162 7FF458AF 		bne	.L12
 242:../system/src/davis_vantage/davis.c **** 
 328              		.loc 1 242 0
 329 0166 144B     		ldr	r3, .L27+12
 330 0168 0522     		movs	r2, #5
 331 016a 1A70     		strb	r2, [r3]
 244:../system/src/davis_vantage/davis.c **** 					}
 332              		.loc 1 244 0
 333 016c 0F4B     		ldr	r3, .L27
 334 016e 0022     		movs	r2, #0
 335 0170 1A70     		strb	r2, [r3]
 336 0172 50E7     		b	.L12
 337              	.LVL19:
 338              	.L26:
 228:../system/src/davis_vantage/davis.c **** 
 339              		.loc 1 228 0
 340 0174 FFF7FEFF 		bl	srl_get_rx_buffer
 341              	.LVL20:
 342 0178 0222     		movs	r2, #2
 343 017a 0146     		mov	r1, r0
 344 017c 1148     		ldr	r0, .L27+24
 345 017e FFF7FEFF 		bl	memcmp
 346              	.LVL21:
 230:../system/src/davis_vantage/davis.c **** 							// if the base of davis wx station responden with '\r\n' it measn that wake up was sucessful
 347              		.loc 1 230 0
 348 0182 30B9     		cbnz	r0, .L21
 232:../system/src/davis_vantage/davis.c **** 						}
 349              		.loc 1 232 0
 350 0184 0C4B     		ldr	r3, .L27+12
 351 0186 0422     		movs	r2, #4
 352 0188 1A70     		strb	r2, [r3]
 353              	.L22:
 238:../system/src/davis_vantage/davis.c **** 					}
 354              		.loc 1 238 0
 355 018a 084B     		ldr	r3, .L27
 356 018c 0022     		movs	r2, #0
 357 018e 1A70     		strb	r2, [r3]
 358 0190 E2E7     		b	.L20
 359              	.L21:
 235:../system/src/davis_vantage/davis.c **** 						}
 360              		.loc 1 235 0
 361 0192 094B     		ldr	r3, .L27+12
 362 0194 0522     		movs	r2, #5
 363 0196 1A70     		strb	r2, [r3]
 364 0198 F7E7     		b	.L22
 365              	.LVL22:
 366              	.L17:
 251:../system/src/davis_vantage/davis.c **** 					break;
 367              		.loc 1 251 0
 368 019a 094B     		ldr	r3, .L27+20
 369 019c 0122     		movs	r2, #1
 370 019e 1A70     		strb	r2, [r3]
 252:../system/src/davis_vantage/davis.c **** 				}
 371              		.loc 1 252 0
 372 01a0 39E7     		b	.L12
 373              	.L18:
 255:../system/src/davis_vantage/davis.c **** 					break;
 374              		.loc 1 255 0
 375 01a2 074B     		ldr	r3, .L27+20
 376 01a4 0022     		movs	r2, #0
 377 01a6 1A70     		strb	r2, [r3]
 256:../system/src/davis_vantage/davis.c **** 				}
 378              		.loc 1 256 0
 379 01a8 35E7     		b	.L12
 380              	.L28:
 381 01aa 00BF     		.align	2
 382              	.L27:
 383 01ac 00000000 		.word	davis_global_state
 384 01b0 00000000 		.word	davis_serial_context
 385 01b4 00000000 		.word	.LANCHOR0
 386 01b8 00000000 		.word	davis_wake_up_state
 387 01bc 00000000 		.word	davis_quality_factor
 388 01c0 00000000 		.word	davis_avaliable
 389 01c4 00000000 		.word	.LANCHOR1
 390              		.cfi_endproc
 391              	.LFE72:
 393              		.section	.text.davis_rxcheck_packet_pooler,"ax",%progbits
 394              		.align	1
 395              		.global	davis_rxcheck_packet_pooler
 396              		.syntax unified
 397              		.thumb
 398              		.thumb_func
 399              		.fpu softvfp
 401              	davis_rxcheck_packet_pooler:
 402              	.LFB73:
 268:../system/src/davis_vantage/davis.c **** uint32_t davis_rxcheck_packet_pooler(void) {
 403              		.loc 1 268 0
 404              		.cfi_startproc
 405              		@ args = 0, pretend = 0, frame = 0
 406              		@ frame_needed = 0, uses_anonymous_args = 0
 407              	.LVL23:
 269:../system/src/davis_vantage/davis.c **** 	uint32_t retval = DAVIS_OK;
 270:../system/src/davis_vantage/davis.c **** 
 271:../system/src/davis_vantage/davis.c **** 	if (davis_global_state == DAVIS_GLOBAL_IDLE_OR_BLOCKING || davis_global_state == DAVIS_GLOBAL_RXCH
 408              		.loc 1 271 0
 409 0000 414B     		ldr	r3, .L53
 410 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 411 0004 0BB1     		cbz	r3, .L30
 412              		.loc 1 271 0 is_stmt 0 discriminator 1
 413 0006 022B     		cmp	r3, #2
 414 0008 79D1     		bne	.L41
 415              	.L30:
 268:../system/src/davis_vantage/davis.c **** uint32_t davis_rxcheck_packet_pooler(void) {
 416              		.loc 1 268 0 is_stmt 1
 417 000a 10B5     		push	{r4, lr}
 418              		.cfi_def_cfa_offset 8
 419              		.cfi_offset 4, -8
 420              		.cfi_offset 14, -4
 421 000c 84B0     		sub	sp, sp, #16
 422              		.cfi_def_cfa_offset 24
 272:../system/src/davis_vantage/davis.c **** 
 273:../system/src/davis_vantage/davis.c **** 		switch(davis_rx_check_state) {
 423              		.loc 1 273 0
 424 000e 3F4B     		ldr	r3, .L53+4
 425 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 426 0012 032B     		cmp	r3, #3
 427 0014 76D8     		bhi	.L42
 428 0016 DFE803F0 		tbb	[pc, r3]
 429              	.L33:
 430 001a 02       		.byte	(.L32-.L33)/2
 431 001b 1B       		.byte	(.L34-.L33)/2
 432 001c 3A       		.byte	(.L35-.L33)/2
 433 001d 43       		.byte	(.L36-.L33)/2
 434              		.p2align 1
 435              	.L32:
 274:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_IDLE: {
 275:../system/src/davis_vantage/davis.c **** 
 276:../system/src/davis_vantage/davis.c **** 				// if station isn't avalaible switch to error w/o any further
 277:../system/src/davis_vantage/davis.c **** 				// comms
 278:../system/src/davis_vantage/davis.c **** 				if (davis_avaliable == 0) {
 436              		.loc 1 278 0
 437 001e 3C4B     		ldr	r3, .L53+8
 438 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 439 0022 23B9     		cbnz	r3, .L37
 279:../system/src/davis_vantage/davis.c **** 					davis_loop_state = DAVIS_QUERY_ERROR;
 440              		.loc 1 279 0
 441 0024 3B4B     		ldr	r3, .L53+12
 442 0026 0522     		movs	r2, #5
 443 0028 1A70     		strb	r2, [r3]
 444              	.LVL24:
 280:../system/src/davis_vantage/davis.c **** 
 281:../system/src/davis_vantage/davis.c **** 					retval = DAVIS_NOT_AVALIABLE;
 445              		.loc 1 281 0
 446 002a 0123     		movs	r3, #1
 447 002c 35E0     		b	.L29
 448              	.LVL25:
 449              	.L37:
 282:../system/src/davis_vantage/davis.c **** 				}
 283:../system/src/davis_vantage/davis.c **** 				else {
 284:../system/src/davis_vantage/davis.c **** 					// send the command
 285:../system/src/davis_vantage/davis.c **** 					srl_send_data(davis_serial_context, (uint8_t*)&rx_check, 1, sizeof(rx_check), 0);
 450              		.loc 1 285 0
 451 002e 3A4B     		ldr	r3, .L53+16
 452 0030 1868     		ldr	r0, [r3]
 453 0032 0024     		movs	r4, #0
 454 0034 0094     		str	r4, [sp]
 455 0036 0923     		movs	r3, #9
 456 0038 0122     		movs	r2, #1
 457 003a 3849     		ldr	r1, .L53+20
 458 003c FFF7FEFF 		bl	srl_send_data
 459              	.LVL26:
 286:../system/src/davis_vantage/davis.c **** 
 287:../system/src/davis_vantage/davis.c **** 					davis_rx_check_state = DAVIS_QUERY_SENDING_QUERY;
 460              		.loc 1 287 0
 461 0040 324B     		ldr	r3, .L53+4
 462 0042 0122     		movs	r2, #1
 463 0044 1A70     		strb	r2, [r3]
 288:../system/src/davis_vantage/davis.c **** 
 289:../system/src/davis_vantage/davis.c **** 					davis_global_state = DAVIS_GLOBAL_RXCHECK;
 464              		.loc 1 289 0
 465 0046 304B     		ldr	r3, .L53
 466 0048 0222     		movs	r2, #2
 467 004a 1A70     		strb	r2, [r3]
 269:../system/src/davis_vantage/davis.c **** 
 468              		.loc 1 269 0
 469 004c 2346     		mov	r3, r4
 470 004e 24E0     		b	.L29
 471              	.L34:
 290:../system/src/davis_vantage/davis.c **** 				}
 291:../system/src/davis_vantage/davis.c **** 
 292:../system/src/davis_vantage/davis.c **** 
 293:../system/src/davis_vantage/davis.c **** 				break;
 294:../system/src/davis_vantage/davis.c **** 			}
 295:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_SENDING_QUERY: {
 296:../system/src/davis_vantage/davis.c **** 
 297:../system/src/davis_vantage/davis.c **** 				if (davis_serial_context->srl_tx_state == SRL_TX_IDLE) {
 472              		.loc 1 297 0
 473 0050 314B     		ldr	r3, .L53+16
 474 0052 1868     		ldr	r0, [r3]
 475 0054 90F84530 		ldrb	r3, [r0, #69]	@ zero_extendqisi2
 476 0058 012B     		cmp	r3, #1
 477 005a 07D0     		beq	.L49
 478              	.L38:
 298:../system/src/davis_vantage/davis.c **** 					// if transmission was successful trigger the reception
 299:../system/src/davis_vantage/davis.c **** 					srl_receive_data(davis_serial_context, RX_CHECK_LN_WITH_ACK, 0, 0, 0, 0, 0);
 300:../system/src/davis_vantage/davis.c **** 
 301:../system/src/davis_vantage/davis.c **** 					// switching the internal state
 302:../system/src/davis_vantage/davis.c **** 					davis_rx_check_state = DAVIS_QUERY_RECEIVING;
 303:../system/src/davis_vantage/davis.c **** 				}
 304:../system/src/davis_vantage/davis.c **** 
 305:../system/src/davis_vantage/davis.c **** 				if (davis_serial_context->srl_tx_state == SRL_TX_ERROR) {
 479              		.loc 1 305 0
 480 005c 2E4B     		ldr	r3, .L53+16
 481 005e 1B68     		ldr	r3, [r3]
 482 0060 93F84530 		ldrb	r3, [r3, #69]	@ zero_extendqisi2
 483 0064 042B     		cmp	r3, #4
 484 0066 0DD0     		beq	.L50
 269:../system/src/davis_vantage/davis.c **** 
 485              		.loc 1 269 0
 486 0068 0023     		movs	r3, #0
 487 006a 16E0     		b	.L29
 488              	.L49:
 299:../system/src/davis_vantage/davis.c **** 
 489              		.loc 1 299 0
 490 006c 0022     		movs	r2, #0
 491 006e 0292     		str	r2, [sp, #8]
 492 0070 0192     		str	r2, [sp, #4]
 493 0072 0092     		str	r2, [sp]
 494 0074 1346     		mov	r3, r2
 495 0076 2021     		movs	r1, #32
 496 0078 FFF7FEFF 		bl	srl_receive_data
 497              	.LVL27:
 302:../system/src/davis_vantage/davis.c **** 				}
 498              		.loc 1 302 0
 499 007c 234B     		ldr	r3, .L53+4
 500 007e 0322     		movs	r2, #3
 501 0080 1A70     		strb	r2, [r3]
 502 0082 EBE7     		b	.L38
 503              	.L50:
 306:../system/src/davis_vantage/davis.c **** 					davis_rx_check_state = DAVIS_QUERY_ERROR;
 504              		.loc 1 306 0
 505 0084 214B     		ldr	r3, .L53+4
 506 0086 0522     		movs	r2, #5
 507 0088 1A70     		strb	r2, [r3]
 269:../system/src/davis_vantage/davis.c **** 
 508              		.loc 1 269 0
 509 008a 0023     		movs	r3, #0
 510 008c 05E0     		b	.L29
 511              	.L35:
 307:../system/src/davis_vantage/davis.c **** 				}
 308:../system/src/davis_vantage/davis.c **** 
 309:../system/src/davis_vantage/davis.c **** 				break;
 310:../system/src/davis_vantage/davis.c **** 			}
 311:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_RECEIVING_ACK: {
 312:../system/src/davis_vantage/davis.c **** 
 313:../system/src/davis_vantage/davis.c **** 				// this state is illegal as the wx station base sends
 314:../system/src/davis_vantage/davis.c **** 				// ACK and command result in one transaction
 315:../system/src/davis_vantage/davis.c **** 				davis_rx_check_state = DAVIS_QUERY_ERROR;
 512              		.loc 1 315 0
 513 008e 1F4B     		ldr	r3, .L53+4
 514 0090 0522     		movs	r2, #5
 515 0092 1A70     		strb	r2, [r3]
 316:../system/src/davis_vantage/davis.c **** 
 317:../system/src/davis_vantage/davis.c **** 				davis_global_state = DAVIS_GLOBAL_IDLE_OR_BLOCKING;
 516              		.loc 1 317 0
 517 0094 0023     		movs	r3, #0
 518 0096 1C4A     		ldr	r2, .L53
 519 0098 1370     		strb	r3, [r2]
 520              	.LVL28:
 521              	.L29:
 318:../system/src/davis_vantage/davis.c **** 
 319:../system/src/davis_vantage/davis.c **** 				break;
 320:../system/src/davis_vantage/davis.c **** 			}
 321:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_RECEIVING: {
 322:../system/src/davis_vantage/davis.c **** 
 323:../system/src/davis_vantage/davis.c **** 				// the result of RXCHECK command has variable lenght depends on counters values
 324:../system/src/davis_vantage/davis.c **** 				if (davis_serial_context->srl_rx_state == SRL_RX_DONE || davis_serial_context->srl_rx_state == 
 325:../system/src/davis_vantage/davis.c **** 					// so check how many bytes has been received
 326:../system/src/davis_vantage/davis.c **** 					if (davis_serial_context->srl_rx_bytes_counter > RX_CHECK_MIN_LN_WITH_ACK) {
 327:../system/src/davis_vantage/davis.c **** 						// if the base unit transmitted more bytes than minimal length of RXCHECK is
 328:../system/src/davis_vantage/davis.c **** 						// we might assume that the content is somewhat correct
 329:../system/src/davis_vantage/davis.c **** 
 330:../system/src/davis_vantage/davis.c **** 						// parse the response
 331:../system/src/davis_vantage/davis.c **** 						retval = davis_parsers_rxcheck(
 332:../system/src/davis_vantage/davis.c **** 								srl_get_rx_buffer(davis_serial_context),
 333:../system/src/davis_vantage/davis.c **** 								davis_serial_context->srl_rx_bytes_counter,
 334:../system/src/davis_vantage/davis.c **** 								&davis_base_total_packet_received,
 335:../system/src/davis_vantage/davis.c **** 								&davis_base_total_packet_missed,
 336:../system/src/davis_vantage/davis.c **** 								&davis_base_resynchronizations,
 337:../system/src/davis_vantage/davis.c **** 								&davis_base_packets_in_the_row,
 338:../system/src/davis_vantage/davis.c **** 								&davis_base_crc_errors);
 339:../system/src/davis_vantage/davis.c **** 
 340:../system/src/davis_vantage/davis.c **** 						if (retval == DAVIS_PARSERS_OK) {
 341:../system/src/davis_vantage/davis.c **** 							davis_rx_check_state = DAVIS_QUERY_OK;
 342:../system/src/davis_vantage/davis.c **** 
 343:../system/src/davis_vantage/davis.c **** 							davis_last_good_rxcheck = main_get_master_time();
 344:../system/src/davis_vantage/davis.c **** 						}
 345:../system/src/davis_vantage/davis.c **** 						else
 346:../system/src/davis_vantage/davis.c **** 							davis_rx_check_state = DAVIS_QUERY_ERROR;
 347:../system/src/davis_vantage/davis.c **** 					}
 348:../system/src/davis_vantage/davis.c **** 					else {
 349:../system/src/davis_vantage/davis.c **** 						;
 350:../system/src/davis_vantage/davis.c **** 					}
 351:../system/src/davis_vantage/davis.c **** 
 352:../system/src/davis_vantage/davis.c **** 					davis_global_state = DAVIS_GLOBAL_IDLE_OR_BLOCKING;
 353:../system/src/davis_vantage/davis.c **** 				}
 354:../system/src/davis_vantage/davis.c **** 
 355:../system/src/davis_vantage/davis.c **** 				break;
 356:../system/src/davis_vantage/davis.c **** 			}
 357:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_OK: {
 358:../system/src/davis_vantage/davis.c **** 				break;
 359:../system/src/davis_vantage/davis.c **** 			}
 360:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_ERROR: {
 361:../system/src/davis_vantage/davis.c **** 				break;
 362:../system/src/davis_vantage/davis.c **** 			}
 363:../system/src/davis_vantage/davis.c **** 		}
 364:../system/src/davis_vantage/davis.c **** 	}
 365:../system/src/davis_vantage/davis.c **** 	else {
 366:../system/src/davis_vantage/davis.c **** 		retval = DAVIS_BUSY;
 367:../system/src/davis_vantage/davis.c **** 	}
 368:../system/src/davis_vantage/davis.c **** 
 369:../system/src/davis_vantage/davis.c **** 	return retval;
 370:../system/src/davis_vantage/davis.c **** }
 522              		.loc 1 370 0
 523 009a 1846     		mov	r0, r3
 524 009c 04B0     		add	sp, sp, #16
 525              		.cfi_remember_state
 526              		.cfi_def_cfa_offset 8
 527              		@ sp needed
 528 009e 10BD     		pop	{r4, pc}
 529              	.LVL29:
 530              	.L36:
 531              		.cfi_restore_state
 324:../system/src/davis_vantage/davis.c **** 					// so check how many bytes has been received
 532              		.loc 1 324 0
 533 00a0 1D4B     		ldr	r3, .L53+16
 534 00a2 1868     		ldr	r0, [r3]
 535 00a4 90F84430 		ldrb	r3, [r0, #68]	@ zero_extendqisi2
 536 00a8 043B     		subs	r3, r3, #4
 537 00aa DBB2     		uxtb	r3, r3
 538 00ac 012B     		cmp	r3, #1
 539 00ae 01D9     		bls	.L51
 269:../system/src/davis_vantage/davis.c **** 
 540              		.loc 1 269 0
 541 00b0 0023     		movs	r3, #0
 369:../system/src/davis_vantage/davis.c **** }
 542              		.loc 1 369 0
 543 00b2 F2E7     		b	.L29
 544              	.L51:
 326:../system/src/davis_vantage/davis.c **** 						// if the base unit transmitted more bytes than minimal length of RXCHECK is
 545              		.loc 1 326 0
 546 00b4 038C     		ldrh	r3, [r0, #32]
 547 00b6 102B     		cmp	r3, #16
 548 00b8 04D8     		bhi	.L52
 269:../system/src/davis_vantage/davis.c **** 
 549              		.loc 1 269 0
 550 00ba 0023     		movs	r3, #0
 551              	.LVL30:
 552              	.L39:
 352:../system/src/davis_vantage/davis.c **** 				}
 553              		.loc 1 352 0
 554 00bc 124A     		ldr	r2, .L53
 555 00be 0021     		movs	r1, #0
 556 00c0 1170     		strb	r1, [r2]
 557 00c2 EAE7     		b	.L29
 558              	.LVL31:
 559              	.L52:
 331:../system/src/davis_vantage/davis.c **** 								srl_get_rx_buffer(davis_serial_context),
 560              		.loc 1 331 0
 561 00c4 FFF7FEFF 		bl	srl_get_rx_buffer
 562              	.LVL32:
 333:../system/src/davis_vantage/davis.c **** 								&davis_base_total_packet_received,
 563              		.loc 1 333 0
 564 00c8 134B     		ldr	r3, .L53+16
 565 00ca 1B68     		ldr	r3, [r3]
 331:../system/src/davis_vantage/davis.c **** 								srl_get_rx_buffer(davis_serial_context),
 566              		.loc 1 331 0
 567 00cc 198C     		ldrh	r1, [r3, #32]
 568 00ce 144B     		ldr	r3, .L53+24
 569 00d0 0293     		str	r3, [sp, #8]
 570 00d2 144B     		ldr	r3, .L53+28
 571 00d4 0193     		str	r3, [sp, #4]
 572 00d6 144B     		ldr	r3, .L53+32
 573 00d8 0093     		str	r3, [sp]
 574 00da 144B     		ldr	r3, .L53+36
 575 00dc 144A     		ldr	r2, .L53+40
 576 00de FFF7FEFF 		bl	davis_parsers_rxcheck
 577              	.LVL33:
 340:../system/src/davis_vantage/davis.c **** 							davis_rx_check_state = DAVIS_QUERY_OK;
 578              		.loc 1 340 0
 579 00e2 0346     		mov	r3, r0
 580 00e4 38B9     		cbnz	r0, .L40
 341:../system/src/davis_vantage/davis.c **** 
 581              		.loc 1 341 0
 582 00e6 094A     		ldr	r2, .L53+4
 583 00e8 0421     		movs	r1, #4
 584 00ea 1170     		strb	r1, [r2]
 585              	.LBB6:
 586              	.LBB7:
 587              		.file 2 "../include/main.h"
   1:../include/main.h **** #ifndef MAIN_H_
   2:../include/main.h **** #define MAIN_H_
   3:../include/main.h **** 
   4:../include/main.h **** #include "aprs/ax25.h"
   5:../include/main.h **** #include "drivers/serial.h"
   6:../include/main.h **** #include "config_data.h"
   7:../include/main.h **** 
   8:../include/main.h **** #define SW_VER "EA00"
   9:../include/main.h **** #define SW_DATE "23052021"
  10:../include/main.h **** 
  11:../include/main.h **** #define SYSTICK_TICKS_PER_SECONDS 100
  12:../include/main.h **** #define SYSTICK_TICKS_PERIOD 10
  13:../include/main.h **** 
  14:../include/main.h **** #define INTERNAL_WATCHDOG
  15:../include/main.h **** #define EXTERNAL_WATCHDOG
  16:../include/main.h **** 
  17:../include/main.h **** #define PWR_SWITCH_BOTH
  18:../include/main.h **** 
  19:../include/main.h **** #define OWN_APRS_MSG_LN 	160
  20:../include/main.h **** 
  21:../include/main.h **** extern uint32_t master_time;
  22:../include/main.h **** 
  23:../include/main.h **** extern const config_data_mode_t * main_config_data_mode;
  24:../include/main.h **** extern const config_data_basic_t * main_config_data_basic;
  25:../include/main.h **** extern const config_data_wx_sources_t * main_config_data_wx_sources;
  26:../include/main.h **** extern const config_data_umb_t * main_config_data_umb;
  27:../include/main.h **** extern const config_data_rtu_t * main_config_data_rtu;
  28:../include/main.h **** 
  29:../include/main.h **** extern int32_t main_wx_sensors_pool_timer;
  30:../include/main.h **** extern int32_t main_one_minute_pool_timer;
  31:../include/main.h **** extern int32_t main_one_second_pool_timer;
  32:../include/main.h **** extern int32_t main_two_second_pool_timer;
  33:../include/main.h **** extern int32_t main_ten_second_pool_timer;
  34:../include/main.h **** 
  35:../include/main.h **** extern AX25Ctx main_ax25;
  36:../include/main.h **** extern Afsk main_afsk;
  37:../include/main.h **** 
  38:../include/main.h **** extern AX25Call main_own_path[3];
  39:../include/main.h **** extern uint8_t main_own_path_ln;
  40:../include/main.h **** extern uint8_t main_own_aprs_msg_len;
  41:../include/main.h **** extern char main_own_aprs_msg[OWN_APRS_MSG_LN];
  42:../include/main.h **** 
  43:../include/main.h **** extern char main_string_latitude[9];
  44:../include/main.h **** extern char main_string_longitude[9];
  45:../include/main.h **** 
  46:../include/main.h **** extern char main_symbol_f;
  47:../include/main.h **** extern char main_symbol_s;
  48:../include/main.h **** 
  49:../include/main.h **** extern srl_context_t* main_kiss_srl_ctx_ptr;
  50:../include/main.h **** extern srl_context_t* main_wx_srl_ctx_ptr;
  51:../include/main.h **** 
  52:../include/main.h **** extern  uint8_t main_kiss_enabled;
  53:../include/main.h **** 
  54:../include/main.h **** extern char after_tx_lock;
  55:../include/main.h **** 
  56:../include/main.h **** extern unsigned short rx10m, tx10m, digi10m, digidrop10m, kiss10m;
  57:../include/main.h **** 
  58:../include/main.h **** uint16_t main_get_adc_sample(void);
  59:../include/main.h **** 
  60:../include/main.h **** void main_service_cpu_load_ticks(void);
  61:../include/main.h **** 
  62:../include/main.h **** inline uint32_t main_get_master_time(void) {
  63:../include/main.h **** 	return master_time;
 588              		.loc 2 63 0
 589 00ec 114A     		ldr	r2, .L53+44
 590 00ee 1168     		ldr	r1, [r2]
 591              	.LBE7:
 592              	.LBE6:
 343:../system/src/davis_vantage/davis.c **** 						}
 593              		.loc 1 343 0
 594 00f0 114A     		ldr	r2, .L53+48
 595 00f2 1160     		str	r1, [r2]
 596 00f4 E2E7     		b	.L39
 597              	.L40:
 346:../system/src/davis_vantage/davis.c **** 					}
 598              		.loc 1 346 0
 599 00f6 054A     		ldr	r2, .L53+4
 600 00f8 0521     		movs	r1, #5
 601 00fa 1170     		strb	r1, [r2]
 602 00fc DEE7     		b	.L39
 603              	.LVL34:
 604              	.L41:
 605              		.cfi_def_cfa_offset 0
 606              		.cfi_restore 4
 607              		.cfi_restore 14
 366:../system/src/davis_vantage/davis.c **** 	}
 608              		.loc 1 366 0
 609 00fe 0423     		movs	r3, #4
 610              		.loc 1 370 0
 611 0100 1846     		mov	r0, r3
 612 0102 7047     		bx	lr
 613              	.L42:
 269:../system/src/davis_vantage/davis.c **** 
 614              		.loc 1 269 0
 615 0104 0023     		movs	r3, #0
 616 0106 C8E7     		b	.L29
 617              	.L54:
 618              		.align	2
 619              	.L53:
 620 0108 00000000 		.word	davis_global_state
 621 010c 00000000 		.word	davis_rx_check_state
 622 0110 00000000 		.word	davis_avaliable
 623 0114 00000000 		.word	davis_loop_state
 624 0118 00000000 		.word	davis_serial_context
 625 011c 00000000 		.word	.LANCHOR2
 626 0120 00000000 		.word	.LANCHOR5
 627 0124 00000000 		.word	.LANCHOR6
 628 0128 00000000 		.word	.LANCHOR7
 629 012c 00000000 		.word	.LANCHOR3
 630 0130 00000000 		.word	.LANCHOR4
 631 0134 00000000 		.word	master_time
 632 0138 00000000 		.word	.LANCHOR8
 633              		.cfi_endproc
 634              	.LFE73:
 636              		.section	.text.davis_loop_packet_pooler,"ax",%progbits
 637              		.align	1
 638              		.global	davis_loop_packet_pooler
 639              		.syntax unified
 640              		.thumb
 641              		.thumb_func
 642              		.fpu softvfp
 644              	davis_loop_packet_pooler:
 645              	.LFB74:
 371:../system/src/davis_vantage/davis.c **** 
 372:../system/src/davis_vantage/davis.c **** uint32_t davis_loop_packet_pooler(uint8_t* loop_avaliable_flag) {
 646              		.loc 1 372 0
 647              		.cfi_startproc
 648              		@ args = 0, pretend = 0, frame = 0
 649              		@ frame_needed = 0, uses_anonymous_args = 0
 650              	.LVL35:
 373:../system/src/davis_vantage/davis.c **** 
 374:../system/src/davis_vantage/davis.c **** 	uint32_t retval = DAVIS_OK;
 375:../system/src/davis_vantage/davis.c **** 
 376:../system/src/davis_vantage/davis.c **** 	if (davis_global_state == DAVIS_GLOBAL_IDLE_OR_BLOCKING || davis_global_state == DAVIS_GLOBAL_LOOP
 651              		.loc 1 376 0
 652 0000 3B4B     		ldr	r3, .L78
 653 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 654 0004 012B     		cmp	r3, #1
 655 0006 6ED8     		bhi	.L66
 372:../system/src/davis_vantage/davis.c **** 
 656              		.loc 1 372 0
 657 0008 F0B5     		push	{r4, r5, r6, r7, lr}
 658              		.cfi_def_cfa_offset 20
 659              		.cfi_offset 4, -20
 660              		.cfi_offset 5, -16
 661              		.cfi_offset 6, -12
 662              		.cfi_offset 7, -8
 663              		.cfi_offset 14, -4
 664 000a 85B0     		sub	sp, sp, #20
 665              		.cfi_def_cfa_offset 40
 666 000c 0546     		mov	r5, r0
 377:../system/src/davis_vantage/davis.c **** 
 378:../system/src/davis_vantage/davis.c **** 		switch (davis_loop_state) {
 667              		.loc 1 378 0
 668 000e 394B     		ldr	r3, .L78+4
 669 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 670 0012 052B     		cmp	r3, #5
 671 0014 62D8     		bhi	.L57
 672 0016 DFE803F0 		tbb	[pc, r3]
 673              	.L59:
 674 001a 03       		.byte	(.L58-.L59)/2
 675 001b 21       		.byte	(.L60-.L59)/2
 676 001c 61       		.byte	(.L57-.L59)/2
 677 001d 42       		.byte	(.L61-.L59)/2
 678 001e 68       		.byte	(.L67-.L59)/2
 679 001f 5D       		.byte	(.L62-.L59)/2
 680              		.p2align 1
 681              	.L58:
 379:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_IDLE: {
 380:../system/src/davis_vantage/davis.c **** 
 381:../system/src/davis_vantage/davis.c **** 				// if station isn't avalaible switch to error w/o any further
 382:../system/src/davis_vantage/davis.c **** 				// comms
 383:../system/src/davis_vantage/davis.c **** 				if (davis_avaliable == 0) {
 682              		.loc 1 383 0
 683 0020 354B     		ldr	r3, .L78+8
 684 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 685 0024 23B9     		cbnz	r3, .L63
 384:../system/src/davis_vantage/davis.c **** 					davis_loop_state = DAVIS_QUERY_ERROR;
 686              		.loc 1 384 0
 687 0026 334B     		ldr	r3, .L78+4
 688 0028 0522     		movs	r2, #5
 689 002a 1A70     		strb	r2, [r3]
 690              	.LVL36:
 385:../system/src/davis_vantage/davis.c **** 
 386:../system/src/davis_vantage/davis.c **** 					retval = DAVIS_NOT_AVALIABLE;
 691              		.loc 1 386 0
 692 002c 0120     		movs	r0, #1
 693              	.LVL37:
 694 002e 5DE0     		b	.L55
 695              	.LVL38:
 696              	.L63:
 387:../system/src/davis_vantage/davis.c **** 				}
 388:../system/src/davis_vantage/davis.c **** 				else {
 389:../system/src/davis_vantage/davis.c **** 					// send the LOOP query
 390:../system/src/davis_vantage/davis.c **** 					srl_send_data(davis_serial_context, (uint8_t*)loop_command, 1, strlen(loop_command), 0);
 697              		.loc 1 390 0
 698 0030 324B     		ldr	r3, .L78+12
 699 0032 1F68     		ldr	r7, [r3]
 700 0034 324E     		ldr	r6, .L78+16
 701 0036 3046     		mov	r0, r6
 702              	.LVL39:
 703 0038 FFF7FEFF 		bl	strlen
 704              	.LVL40:
 705 003c 0024     		movs	r4, #0
 706 003e 0094     		str	r4, [sp]
 707 0040 83B2     		uxth	r3, r0
 708 0042 0122     		movs	r2, #1
 709 0044 3146     		mov	r1, r6
 710 0046 3846     		mov	r0, r7
 711 0048 FFF7FEFF 		bl	srl_send_data
 712              	.LVL41:
 391:../system/src/davis_vantage/davis.c **** 
 392:../system/src/davis_vantage/davis.c **** 					*loop_avaliable_flag = 0;
 713              		.loc 1 392 0
 714 004c 2C70     		strb	r4, [r5]
 393:../system/src/davis_vantage/davis.c **** 
 394:../system/src/davis_vantage/davis.c **** 					davis_loop_state = DAVIS_QUERY_SENDING_QUERY;
 715              		.loc 1 394 0
 716 004e 0123     		movs	r3, #1
 717 0050 284A     		ldr	r2, .L78+4
 718 0052 1370     		strb	r3, [r2]
 395:../system/src/davis_vantage/davis.c **** 
 396:../system/src/davis_vantage/davis.c **** 					// set the global state to block another poolers to jam or screw
 397:../system/src/davis_vantage/davis.c **** 					// the transmission in another way
 398:../system/src/davis_vantage/davis.c **** 					davis_global_state = DAVIS_GLOBAL_LOOP;
 719              		.loc 1 398 0
 720 0054 264A     		ldr	r2, .L78
 721 0056 1370     		strb	r3, [r2]
 374:../system/src/davis_vantage/davis.c **** 
 722              		.loc 1 374 0
 723 0058 2046     		mov	r0, r4
 724 005a 47E0     		b	.L55
 725              	.LVL42:
 726              	.L60:
 399:../system/src/davis_vantage/davis.c **** 				}
 400:../system/src/davis_vantage/davis.c **** 
 401:../system/src/davis_vantage/davis.c **** 				break;
 402:../system/src/davis_vantage/davis.c **** 			}
 403:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_SENDING_QUERY: {
 404:../system/src/davis_vantage/davis.c **** 
 405:../system/src/davis_vantage/davis.c **** 				// if transmission was successful
 406:../system/src/davis_vantage/davis.c **** 				if (davis_serial_context->srl_tx_state == SRL_TX_IDLE) {
 727              		.loc 1 406 0
 728 005c 274B     		ldr	r3, .L78+12
 729 005e 1868     		ldr	r0, [r3]
 730              	.LVL43:
 731 0060 90F84530 		ldrb	r3, [r0, #69]	@ zero_extendqisi2
 732 0064 012B     		cmp	r3, #1
 733 0066 07D0     		beq	.L74
 734              	.L64:
 407:../system/src/davis_vantage/davis.c **** 					// trigger the reception of ACK message
 408:../system/src/davis_vantage/davis.c **** 					srl_receive_data(davis_serial_context, LOOP_PACKET_LN, 0, 0, 0, 0, 0);
 409:../system/src/davis_vantage/davis.c **** 
 410:../system/src/davis_vantage/davis.c **** 					// switching the internal state
 411:../system/src/davis_vantage/davis.c **** 					davis_loop_state = DAVIS_QUERY_RECEIVING;
 412:../system/src/davis_vantage/davis.c **** 				}
 413:../system/src/davis_vantage/davis.c **** 
 414:../system/src/davis_vantage/davis.c **** 				if (davis_serial_context->srl_tx_state == SRL_TX_ERROR) {
 735              		.loc 1 414 0
 736 0068 244B     		ldr	r3, .L78+12
 737 006a 1B68     		ldr	r3, [r3]
 738 006c 93F84530 		ldrb	r3, [r3, #69]	@ zero_extendqisi2
 739 0070 042B     		cmp	r3, #4
 740 0072 0DD0     		beq	.L75
 374:../system/src/davis_vantage/davis.c **** 
 741              		.loc 1 374 0
 742 0074 0020     		movs	r0, #0
 743 0076 39E0     		b	.L55
 744              	.L74:
 408:../system/src/davis_vantage/davis.c **** 
 745              		.loc 1 408 0
 746 0078 0022     		movs	r2, #0
 747 007a 0292     		str	r2, [sp, #8]
 748 007c 0192     		str	r2, [sp, #4]
 749 007e 0092     		str	r2, [sp]
 750 0080 1346     		mov	r3, r2
 751 0082 6421     		movs	r1, #100
 752 0084 FFF7FEFF 		bl	srl_receive_data
 753              	.LVL44:
 411:../system/src/davis_vantage/davis.c **** 				}
 754              		.loc 1 411 0
 755 0088 1A4B     		ldr	r3, .L78+4
 756 008a 0322     		movs	r2, #3
 757 008c 1A70     		strb	r2, [r3]
 758 008e EBE7     		b	.L64
 759              	.L75:
 415:../system/src/davis_vantage/davis.c **** 					davis_loop_state = DAVIS_QUERY_ERROR;
 760              		.loc 1 415 0
 761 0090 184B     		ldr	r3, .L78+4
 762 0092 0522     		movs	r2, #5
 763 0094 1A70     		strb	r2, [r3]
 416:../system/src/davis_vantage/davis.c **** 
 417:../system/src/davis_vantage/davis.c **** 					// unlock the global state to free the communication with
 418:../system/src/davis_vantage/davis.c **** 					// the station base
 419:../system/src/davis_vantage/davis.c **** 					davis_global_state = DAVIS_GLOBAL_IDLE_OR_BLOCKING;
 764              		.loc 1 419 0
 765 0096 0020     		movs	r0, #0
 766 0098 154B     		ldr	r3, .L78
 767 009a 1870     		strb	r0, [r3]
 768 009c 26E0     		b	.L55
 769              	.LVL45:
 770              	.L61:
 420:../system/src/davis_vantage/davis.c **** 				}
 421:../system/src/davis_vantage/davis.c **** 
 422:../system/src/davis_vantage/davis.c **** 				break;
 423:../system/src/davis_vantage/davis.c **** 			}
 424:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_RECEIVING: {
 425:../system/src/davis_vantage/davis.c **** 				if (davis_serial_context->srl_rx_state == SRL_RX_DONE) {
 771              		.loc 1 425 0
 772 009e 174B     		ldr	r3, .L78+12
 773 00a0 1B68     		ldr	r3, [r3]
 774 00a2 93F84430 		ldrb	r3, [r3, #68]	@ zero_extendqisi2
 775 00a6 042B     		cmp	r3, #4
 776 00a8 03D0     		beq	.L76
 426:../system/src/davis_vantage/davis.c **** 					// parse the loop packet
 427:../system/src/davis_vantage/davis.c **** 					*loop_avaliable_flag = 1;
 428:../system/src/davis_vantage/davis.c **** 
 429:../system/src/davis_vantage/davis.c **** 					davis_last_good_loop = main_get_master_time();
 430:../system/src/davis_vantage/davis.c **** 
 431:../system/src/davis_vantage/davis.c **** 					davis_global_state = DAVIS_GLOBAL_IDLE_OR_BLOCKING;
 432:../system/src/davis_vantage/davis.c **** 				}
 433:../system/src/davis_vantage/davis.c **** 				else if (davis_serial_context->srl_rx_state == SRL_RX_ERROR) {
 777              		.loc 1 433 0
 778 00aa 052B     		cmp	r3, #5
 779 00ac 0BD0     		beq	.L77
 374:../system/src/davis_vantage/davis.c **** 
 780              		.loc 1 374 0
 781 00ae 0020     		movs	r0, #0
 782              	.LVL46:
 434:../system/src/davis_vantage/davis.c **** 					davis_loop_state = DAVIS_QUERY_ERROR;
 435:../system/src/davis_vantage/davis.c **** 
 436:../system/src/davis_vantage/davis.c **** 					// unlock the global state to free the communication with
 437:../system/src/davis_vantage/davis.c **** 					// the station base
 438:../system/src/davis_vantage/davis.c **** 					davis_global_state = DAVIS_GLOBAL_IDLE_OR_BLOCKING;
 439:../system/src/davis_vantage/davis.c **** 				}
 440:../system/src/davis_vantage/davis.c **** 
 441:../system/src/davis_vantage/davis.c **** 				break;
 442:../system/src/davis_vantage/davis.c **** 			}
 443:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_OK: {
 444:../system/src/davis_vantage/davis.c **** 
 445:../system/src/davis_vantage/davis.c **** 				break;
 446:../system/src/davis_vantage/davis.c **** 			}
 447:../system/src/davis_vantage/davis.c **** 			case DAVIS_QUERY_ERROR: {
 448:../system/src/davis_vantage/davis.c **** 				// clear data availability flag
 449:../system/src/davis_vantage/davis.c **** 				*loop_avaliable_flag = 0;
 450:../system/src/davis_vantage/davis.c **** 				break;
 451:../system/src/davis_vantage/davis.c **** 			}
 452:../system/src/davis_vantage/davis.c **** 			default: {
 453:../system/src/davis_vantage/davis.c **** 				davis_loop_state = DAVIS_QUERY_ERROR;
 454:../system/src/davis_vantage/davis.c **** 			}
 455:../system/src/davis_vantage/davis.c **** 		}
 456:../system/src/davis_vantage/davis.c **** 	}
 457:../system/src/davis_vantage/davis.c **** 	else {
 458:../system/src/davis_vantage/davis.c **** 		retval = DAVIS_BUSY;
 459:../system/src/davis_vantage/davis.c **** 	}
 460:../system/src/davis_vantage/davis.c **** 
 461:../system/src/davis_vantage/davis.c **** 	return retval;
 783              		.loc 1 461 0
 784 00b0 1CE0     		b	.L55
 785              	.LVL47:
 786              	.L76:
 427:../system/src/davis_vantage/davis.c **** 
 787              		.loc 1 427 0
 788 00b2 0123     		movs	r3, #1
 789 00b4 0370     		strb	r3, [r0]
 790              	.LBB8:
 791              	.LBB9:
 792              		.loc 2 63 0
 793 00b6 134B     		ldr	r3, .L78+20
 794 00b8 1A68     		ldr	r2, [r3]
 795              	.LBE9:
 796              	.LBE8:
 429:../system/src/davis_vantage/davis.c **** 
 797              		.loc 1 429 0
 798 00ba 134B     		ldr	r3, .L78+24
 799 00bc 1A60     		str	r2, [r3]
 431:../system/src/davis_vantage/davis.c **** 				}
 800              		.loc 1 431 0
 801 00be 0020     		movs	r0, #0
 802              	.LVL48:
 803 00c0 0B4B     		ldr	r3, .L78
 804 00c2 1870     		strb	r0, [r3]
 805 00c4 12E0     		b	.L55
 806              	.LVL49:
 807              	.L77:
 434:../system/src/davis_vantage/davis.c **** 
 808              		.loc 1 434 0
 809 00c6 0B4B     		ldr	r3, .L78+4
 810 00c8 0522     		movs	r2, #5
 811 00ca 1A70     		strb	r2, [r3]
 438:../system/src/davis_vantage/davis.c **** 				}
 812              		.loc 1 438 0
 813 00cc 0020     		movs	r0, #0
 814              	.LVL50:
 815 00ce 084B     		ldr	r3, .L78
 816 00d0 1870     		strb	r0, [r3]
 817 00d2 0BE0     		b	.L55
 818              	.LVL51:
 819              	.L62:
 449:../system/src/davis_vantage/davis.c **** 				break;
 820              		.loc 1 449 0
 821 00d4 0023     		movs	r3, #0
 822 00d6 0370     		strb	r3, [r0]
 374:../system/src/davis_vantage/davis.c **** 
 823              		.loc 1 374 0
 824 00d8 1846     		mov	r0, r3
 825              	.LVL52:
 450:../system/src/davis_vantage/davis.c **** 			}
 826              		.loc 1 450 0
 827 00da 07E0     		b	.L55
 828              	.LVL53:
 829              	.L57:
 453:../system/src/davis_vantage/davis.c **** 			}
 830              		.loc 1 453 0
 831 00dc 054B     		ldr	r3, .L78+4
 832 00de 0522     		movs	r2, #5
 833 00e0 1A70     		strb	r2, [r3]
 374:../system/src/davis_vantage/davis.c **** 
 834              		.loc 1 374 0
 835 00e2 0020     		movs	r0, #0
 836              	.LVL54:
 837 00e4 02E0     		b	.L55
 838              	.LVL55:
 839              	.L66:
 840              		.cfi_def_cfa_offset 0
 841              		.cfi_restore 4
 842              		.cfi_restore 5
 843              		.cfi_restore 6
 844              		.cfi_restore 7
 845              		.cfi_restore 14
 458:../system/src/davis_vantage/davis.c **** 	}
 846              		.loc 1 458 0
 847 00e6 0420     		movs	r0, #4
 848              	.LVL56:
 462:../system/src/davis_vantage/davis.c **** }
 849              		.loc 1 462 0
 850 00e8 7047     		bx	lr
 851              	.LVL57:
 852              	.L67:
 853              		.cfi_def_cfa_offset 40
 854              		.cfi_offset 4, -20
 855              		.cfi_offset 5, -16
 856              		.cfi_offset 6, -12
 857              		.cfi_offset 7, -8
 858              		.cfi_offset 14, -4
 374:../system/src/davis_vantage/davis.c **** 
 859              		.loc 1 374 0
 860 00ea 0020     		movs	r0, #0
 861              	.LVL58:
 862              	.L55:
 863              		.loc 1 462 0
 864 00ec 05B0     		add	sp, sp, #20
 865              		.cfi_def_cfa_offset 20
 866              		@ sp needed
 867 00ee F0BD     		pop	{r4, r5, r6, r7, pc}
 868              	.LVL59:
 869              	.L79:
 870              		.align	2
 871              	.L78:
 872 00f0 00000000 		.word	davis_global_state
 873 00f4 00000000 		.word	davis_loop_state
 874 00f8 00000000 		.word	davis_avaliable
 875 00fc 00000000 		.word	davis_serial_context
 876 0100 00000000 		.word	.LANCHOR9
 877 0104 00000000 		.word	master_time
 878 0108 00000000 		.word	.LANCHOR10
 879              		.cfi_endproc
 880              	.LFE74:
 882              		.section	.text.davis_trigger_rxcheck_packet,"ax",%progbits
 883              		.align	1
 884              		.global	davis_trigger_rxcheck_packet
 885              		.syntax unified
 886              		.thumb
 887              		.thumb_func
 888              		.fpu softvfp
 890              	davis_trigger_rxcheck_packet:
 891              	.LFB75:
 463:../system/src/davis_vantage/davis.c **** 
 464:../system/src/davis_vantage/davis.c **** uint32_t davis_trigger_rxcheck_packet(void) {
 892              		.loc 1 464 0
 893              		.cfi_startproc
 894              		@ args = 0, pretend = 0, frame = 0
 895              		@ frame_needed = 0, uses_anonymous_args = 0
 896              		@ link register save eliminated.
 465:../system/src/davis_vantage/davis.c **** 	davis_rx_check_state = DAVIS_QUERY_IDLE;
 897              		.loc 1 465 0
 898 0000 0020     		movs	r0, #0
 899 0002 014B     		ldr	r3, .L81
 900 0004 1870     		strb	r0, [r3]
 466:../system/src/davis_vantage/davis.c **** 
 467:../system/src/davis_vantage/davis.c **** 	return DAVIS_OK;
 468:../system/src/davis_vantage/davis.c **** }
 901              		.loc 1 468 0
 902 0006 7047     		bx	lr
 903              	.L82:
 904              		.align	2
 905              	.L81:
 906 0008 00000000 		.word	davis_rx_check_state
 907              		.cfi_endproc
 908              	.LFE75:
 910              		.section	.text.davis_trigger_loop_packet,"ax",%progbits
 911              		.align	1
 912              		.global	davis_trigger_loop_packet
 913              		.syntax unified
 914              		.thumb
 915              		.thumb_func
 916              		.fpu softvfp
 918              	davis_trigger_loop_packet:
 919              	.LFB76:
 469:../system/src/davis_vantage/davis.c **** 
 470:../system/src/davis_vantage/davis.c **** /** This function will be called from the for(;;) loop in main.c every
 471:../system/src/davis_vantage/davis.c ****  * ten seconds to trigger the pooler to query for next 'LOOP' packet
 472:../system/src/davis_vantage/davis.c ****  *
 473:../system/src/davis_vantage/davis.c ****  */
 474:../system/src/davis_vantage/davis.c **** uint32_t davis_trigger_loop_packet(void) {
 920              		.loc 1 474 0
 921              		.cfi_startproc
 922              		@ args = 0, pretend = 0, frame = 0
 923              		@ frame_needed = 0, uses_anonymous_args = 0
 924              		@ link register save eliminated.
 925              	.LVL60:
 475:../system/src/davis_vantage/davis.c **** 
 476:../system/src/davis_vantage/davis.c **** 	uint32_t retval = DAVIS_OK;
 477:../system/src/davis_vantage/davis.c **** 
 478:../system/src/davis_vantage/davis.c **** 	davis_loop_state = DAVIS_QUERY_IDLE;
 926              		.loc 1 478 0
 927 0000 0020     		movs	r0, #0
 928 0002 014B     		ldr	r3, .L84
 929 0004 1870     		strb	r0, [r3]
 479:../system/src/davis_vantage/davis.c **** 
 480:../system/src/davis_vantage/davis.c **** 	return retval;
 481:../system/src/davis_vantage/davis.c **** }
 930              		.loc 1 481 0
 931 0006 7047     		bx	lr
 932              	.L85:
 933              		.align	2
 934              	.L84:
 935 0008 00000000 		.word	davis_loop_state
 936              		.cfi_endproc
 937              	.LFE76:
 939              		.section	.text.davis_leave_receiving_screen,"ax",%progbits
 940              		.align	1
 941              		.global	davis_leave_receiving_screen
 942              		.syntax unified
 943              		.thumb
 944              		.thumb_func
 945              		.fpu softvfp
 947              	davis_leave_receiving_screen:
 948              	.LFB77:
 482:../system/src/davis_vantage/davis.c **** 
 483:../system/src/davis_vantage/davis.c **** /**
 484:../system/src/davis_vantage/davis.c ****  * This function will send 'RXTEST' command which resets the counters regarding
 485:../system/src/davis_vantage/davis.c ****  * communication with Outdoor ODU and also leaves the 'Receiving...' if this is a
 486:../system/src/davis_vantage/davis.c ****  * state the weather station is when the function is called. This function has blocking
 487:../system/src/davis_vantage/davis.c ****  * I/O
 488:../system/src/davis_vantage/davis.c ****  */
 489:../system/src/davis_vantage/davis.c **** uint32_t davis_leave_receiving_screen(void) {
 949              		.loc 1 489 0
 950              		.cfi_startproc
 951              		@ args = 0, pretend = 0, frame = 8
 952              		@ frame_needed = 0, uses_anonymous_args = 0
 953 0000 30B5     		push	{r4, r5, lr}
 954              		.cfi_def_cfa_offset 12
 955              		.cfi_offset 4, -12
 956              		.cfi_offset 5, -8
 957              		.cfi_offset 14, -4
 958 0002 87B0     		sub	sp, sp, #28
 959              		.cfi_def_cfa_offset 40
 490:../system/src/davis_vantage/davis.c **** 
 491:../system/src/davis_vantage/davis.c **** 	uint32_t retval = DAVIS_OK;
 960              		.loc 1 491 0
 961 0004 0024     		movs	r4, #0
 962 0006 0594     		str	r4, [sp, #20]
 492:../system/src/davis_vantage/davis.c **** 
 493:../system/src/davis_vantage/davis.c **** 	uint8_t transmission_result;
 494:../system/src/davis_vantage/davis.c **** 
 495:../system/src/davis_vantage/davis.c **** 	transmission_result = srl_send_data(davis_serial_context, (uint8_t*)&leave_rx_screen, 1, 1, 0);
 963              		.loc 1 495 0
 964 0008 0E4D     		ldr	r5, .L90
 965 000a 0094     		str	r4, [sp]
 966 000c 0123     		movs	r3, #1
 967 000e 1A46     		mov	r2, r3
 968 0010 0D49     		ldr	r1, .L90+4
 969 0012 2868     		ldr	r0, [r5]
 970 0014 FFF7FEFF 		bl	srl_send_data
 971              	.LVL61:
 496:../system/src/davis_vantage/davis.c **** 
 497:../system/src/davis_vantage/davis.c **** 	srl_wait_for_tx_completion(davis_serial_context);
 972              		.loc 1 497 0
 973 0018 2868     		ldr	r0, [r5]
 974 001a FFF7FEFF 		bl	srl_wait_for_tx_completion
 975              	.LVL62:
 498:../system/src/davis_vantage/davis.c **** 
 499:../system/src/davis_vantage/davis.c **** 	// wait for the response from the wx console only to clear the input buffer
 500:../system/src/davis_vantage/davis.c **** 	transmission_result = srl_receive_data_with_instant_timeout(davis_serial_context, 2, 0, 0, 0, 0, 0
 976              		.loc 1 500 0
 977 001e 2868     		ldr	r0, [r5]
 978 0020 0294     		str	r4, [sp, #8]
 979 0022 0194     		str	r4, [sp, #4]
 980 0024 0094     		str	r4, [sp]
 981 0026 2346     		mov	r3, r4
 982 0028 2246     		mov	r2, r4
 983 002a 0221     		movs	r1, #2
 984 002c FFF7FEFF 		bl	srl_receive_data_with_instant_timeout
 985              	.LVL63:
 501:../system/src/davis_vantage/davis.c **** 
 502:../system/src/davis_vantage/davis.c **** 	if (transmission_result == SRL_OK ) {
 986              		.loc 1 502 0
 987 0030 10B1     		cbz	r0, .L89
 988              	.LVL64:
 989              	.L87:
 503:../system/src/davis_vantage/davis.c **** 		srl_wait_for_rx_completion_or_timeout(davis_serial_context, ((uint8_t*)&retval));
 504:../system/src/davis_vantage/davis.c **** 
 505:../system/src/davis_vantage/davis.c **** 	}
 506:../system/src/davis_vantage/davis.c **** 
 507:../system/src/davis_vantage/davis.c **** 	return retval;
 508:../system/src/davis_vantage/davis.c **** }
 990              		.loc 1 508 0
 991 0032 0598     		ldr	r0, [sp, #20]
 992 0034 07B0     		add	sp, sp, #28
 993              		.cfi_remember_state
 994              		.cfi_def_cfa_offset 12
 995              		@ sp needed
 996 0036 30BD     		pop	{r4, r5, pc}
 997              	.LVL65:
 998              	.L89:
 999              		.cfi_restore_state
 503:../system/src/davis_vantage/davis.c **** 		srl_wait_for_rx_completion_or_timeout(davis_serial_context, ((uint8_t*)&retval));
 1000              		.loc 1 503 0
 1001 0038 05A9     		add	r1, sp, #20
 1002 003a 2868     		ldr	r0, [r5]
 1003              	.LVL66:
 1004 003c FFF7FEFF 		bl	srl_wait_for_rx_completion_or_timeout
 1005              	.LVL67:
 1006 0040 F7E7     		b	.L87
 1007              	.L91:
 1008 0042 00BF     		.align	2
 1009              	.L90:
 1010 0044 00000000 		.word	davis_serial_context
 1011 0048 00000000 		.word	.LANCHOR11
 1012              		.cfi_endproc
 1013              	.LFE77:
 1015              		.section	.text.davis_control_backlight,"ax",%progbits
 1016              		.align	1
 1017              		.global	davis_control_backlight
 1018              		.syntax unified
 1019              		.thumb
 1020              		.thumb_func
 1021              		.fpu softvfp
 1023              	davis_control_backlight:
 1024              	.LFB78:
 509:../system/src/davis_vantage/davis.c **** 
 510:../system/src/davis_vantage/davis.c **** /** This function sends the "LAMPS" commands to the station base unit
 511:../system/src/davis_vantage/davis.c ****  * which controls the backliht of main LCD screen. Warning! this call
 512:../system/src/davis_vantage/davis.c ****  * has blocking I/O and waits until the transmission through RS232 port
 513:../system/src/davis_vantage/davis.c ****  * finish
 514:../system/src/davis_vantage/davis.c ****  *
 515:../system/src/davis_vantage/davis.c ****  *
 516:../system/src/davis_vantage/davis.c ****  */
 517:../system/src/davis_vantage/davis.c **** uint32_t davis_control_backlight(uint8_t state) {
 1025              		.loc 1 517 0
 1026              		.cfi_startproc
 1027              		@ args = 0, pretend = 0, frame = 0
 1028              		@ frame_needed = 0, uses_anonymous_args = 0
 1029              	.LVL68:
 1030 0000 30B5     		push	{r4, r5, lr}
 1031              		.cfi_def_cfa_offset 12
 1032              		.cfi_offset 4, -12
 1033              		.cfi_offset 5, -8
 1034              		.cfi_offset 14, -4
 1035 0002 83B0     		sub	sp, sp, #12
 1036              		.cfi_def_cfa_offset 24
 1037              	.LVL69:
 518:../system/src/davis_vantage/davis.c **** 
 519:../system/src/davis_vantage/davis.c **** 	uint32_t retval = DAVIS_OK;
 520:../system/src/davis_vantage/davis.c **** 
 521:../system/src/davis_vantage/davis.c **** 	uint8_t serial_result = SRL_UNINITIALIZED;
 522:../system/src/davis_vantage/davis.c **** 
 523:../system/src/davis_vantage/davis.c **** 	// switch over desired backlight state
 524:../system/src/davis_vantage/davis.c **** 	if (state == 0) {
 1038              		.loc 1 524 0
 1039 0004 20B1     		cbz	r0, .L99
 525:../system/src/davis_vantage/davis.c **** 		serial_result = srl_send_data(davis_serial_context, (uint8_t*)lamps_off, 1, strlen(lamps_off), 0)
 526:../system/src/davis_vantage/davis.c **** 	}
 527:../system/src/davis_vantage/davis.c **** 	else if (state == 1) {
 1040              		.loc 1 527 0
 1041 0006 0128     		cmp	r0, #1
 1042 0008 17D0     		beq	.L100
 528:../system/src/davis_vantage/davis.c **** 		serial_result = srl_send_data(davis_serial_context, (uint8_t*)lamps_on, 1, strlen(lamps_on), 0);
 529:../system/src/davis_vantage/davis.c **** 
 530:../system/src/davis_vantage/davis.c **** 	}
 531:../system/src/davis_vantage/davis.c **** 	else {
 532:../system/src/davis_vantage/davis.c **** 		retval = DAVIS_WRONG_PARAMETER;
 533:../system/src/davis_vantage/davis.c **** 	}
 534:../system/src/davis_vantage/davis.c **** 
 535:../system/src/davis_vantage/davis.c **** 	// check the transmission request result
 536:../system/src/davis_vantage/davis.c **** 	if (serial_result == SRL_OK) {
 537:../system/src/davis_vantage/davis.c **** 		// if it was OK wait until the transmission will finish
 538:../system/src/davis_vantage/davis.c **** 		srl_wait_for_tx_completion(davis_serial_context);
 539:../system/src/davis_vantage/davis.c **** 	}
 540:../system/src/davis_vantage/davis.c **** 	else {
 541:../system/src/davis_vantage/davis.c **** 		retval = DAVIS_GEN_FAIL;
 1043              		.loc 1 541 0
 1044 000a 7F20     		movs	r0, #127
 1045              	.LVL70:
 1046              	.L92:
 542:../system/src/davis_vantage/davis.c **** 	}
 543:../system/src/davis_vantage/davis.c **** 
 544:../system/src/davis_vantage/davis.c **** 	return retval;
 545:../system/src/davis_vantage/davis.c **** }
 1047              		.loc 1 545 0
 1048 000c 03B0     		add	sp, sp, #12
 1049              		.cfi_remember_state
 1050              		.cfi_def_cfa_offset 12
 1051              		@ sp needed
 1052 000e 30BD     		pop	{r4, r5, pc}
 1053              	.LVL71:
 1054              	.L99:
 1055              		.cfi_restore_state
 525:../system/src/davis_vantage/davis.c **** 	}
 1056              		.loc 1 525 0
 1057 0010 124B     		ldr	r3, .L101
 1058 0012 1D68     		ldr	r5, [r3]
 1059 0014 124C     		ldr	r4, .L101+4
 1060 0016 2046     		mov	r0, r4
 1061              	.LVL72:
 1062 0018 FFF7FEFF 		bl	strlen
 1063              	.LVL73:
 1064 001c 0023     		movs	r3, #0
 1065 001e 0093     		str	r3, [sp]
 1066 0020 83B2     		uxth	r3, r0
 1067 0022 0122     		movs	r2, #1
 1068 0024 2146     		mov	r1, r4
 1069 0026 2846     		mov	r0, r5
 1070 0028 FFF7FEFF 		bl	srl_send_data
 1071              	.LVL74:
 1072              	.L94:
 536:../system/src/davis_vantage/davis.c **** 		// if it was OK wait until the transmission will finish
 1073              		.loc 1 536 0
 1074 002c A0B9     		cbnz	r0, .L97
 538:../system/src/davis_vantage/davis.c **** 	}
 1075              		.loc 1 538 0
 1076 002e 0B4B     		ldr	r3, .L101
 1077 0030 1868     		ldr	r0, [r3]
 1078              	.LVL75:
 1079 0032 FFF7FEFF 		bl	srl_wait_for_tx_completion
 1080              	.LVL76:
 1081 0036 0020     		movs	r0, #0
 1082 0038 E8E7     		b	.L92
 1083              	.LVL77:
 1084              	.L100:
 528:../system/src/davis_vantage/davis.c **** 
 1085              		.loc 1 528 0
 1086 003a 084B     		ldr	r3, .L101
 1087 003c 1D68     		ldr	r5, [r3]
 1088 003e 094C     		ldr	r4, .L101+8
 1089 0040 2046     		mov	r0, r4
 1090              	.LVL78:
 1091 0042 FFF7FEFF 		bl	strlen
 1092              	.LVL79:
 1093 0046 0023     		movs	r3, #0
 1094 0048 0093     		str	r3, [sp]
 1095 004a 83B2     		uxth	r3, r0
 1096 004c 0122     		movs	r2, #1
 1097 004e 2146     		mov	r1, r4
 1098 0050 2846     		mov	r0, r5
 1099 0052 FFF7FEFF 		bl	srl_send_data
 1100              	.LVL80:
 1101 0056 E9E7     		b	.L94
 1102              	.L97:
 541:../system/src/davis_vantage/davis.c **** 	}
 1103              		.loc 1 541 0
 1104 0058 7F20     		movs	r0, #127
 1105              	.LVL81:
 544:../system/src/davis_vantage/davis.c **** }
 1106              		.loc 1 544 0
 1107 005a D7E7     		b	.L92
 1108              	.L102:
 1109              		.align	2
 1110              	.L101:
 1111 005c 00000000 		.word	davis_serial_context
 1112 0060 00000000 		.word	.LANCHOR12
 1113 0064 00000000 		.word	.LANCHOR13
 1114              		.cfi_endproc
 1115              	.LFE78:
 1117              		.global	__aeabi_ui2f
 1118              		.global	__aeabi_fdiv
 1119              		.global	__aeabi_fsub
 1120              		.global	__aeabi_fmul
 1121              		.section	.text.davis_get_temperature,"ax",%progbits
 1122              		.align	1
 1123              		.global	davis_get_temperature
 1124              		.syntax unified
 1125              		.thumb
 1126              		.thumb_func
 1127              		.fpu softvfp
 1129              	davis_get_temperature:
 1130              	.LFB79:
 546:../system/src/davis_vantage/davis.c **** 
 547:../system/src/davis_vantage/davis.c **** uint32_t davis_get_temperature(davis_loop_t* input, float* output) {
 1131              		.loc 1 547 0
 1132              		.cfi_startproc
 1133              		@ args = 0, pretend = 0, frame = 0
 1134              		@ frame_needed = 0, uses_anonymous_args = 0
 1135              	.LVL82:
 1136 0000 10B5     		push	{r4, lr}
 1137              		.cfi_def_cfa_offset 8
 1138              		.cfi_offset 4, -8
 1139              		.cfi_offset 14, -4
 1140 0002 0C46     		mov	r4, r1
 1141              	.LVL83:
 548:../system/src/davis_vantage/davis.c **** 
 549:../system/src/davis_vantage/davis.c **** 	// The value is sent as 10 th of a degree in F. For example, 795 is
 550:../system/src/davis_vantage/davis.c **** 	// returned for 79.5F.
 551:../system/src/davis_vantage/davis.c **** 
 552:../system/src/davis_vantage/davis.c **** 	uint32_t retval = DAVIS_OK;
 553:../system/src/davis_vantage/davis.c **** 
 554:../system/src/davis_vantage/davis.c **** 	float out = 0.0f;
 555:../system/src/davis_vantage/davis.c **** 
 556:../system/src/davis_vantage/davis.c **** 	out = (float)input->outside_temperature / 10.0f;
 1142              		.loc 1 556 0
 1143 0004 8088     		ldrh	r0, [r0, #4]
 1144              	.LVL84:
 1145 0006 FFF7FEFF 		bl	__aeabi_ui2f
 1146              	.LVL85:
 1147 000a 0649     		ldr	r1, .L105
 1148 000c FFF7FEFF 		bl	__aeabi_fdiv
 1149              	.LVL86:
 557:../system/src/davis_vantage/davis.c **** 
 558:../system/src/davis_vantage/davis.c **** 	out = 0.56f * (out - 32.0f);
 1150              		.loc 1 558 0
 1151 0010 4FF08441 		mov	r1, #1107296256
 1152 0014 FFF7FEFF 		bl	__aeabi_fsub
 1153              	.LVL87:
 1154 0018 0349     		ldr	r1, .L105+4
 1155 001a FFF7FEFF 		bl	__aeabi_fmul
 1156              	.LVL88:
 559:../system/src/davis_vantage/davis.c **** 
 560:../system/src/davis_vantage/davis.c **** 	*output = out;
 1157              		.loc 1 560 0
 1158 001e 2060     		str	r0, [r4]	@ float
 561:../system/src/davis_vantage/davis.c **** 
 562:../system/src/davis_vantage/davis.c **** 	return retval;
 563:../system/src/davis_vantage/davis.c **** }
 1159              		.loc 1 563 0
 1160 0020 0020     		movs	r0, #0
 1161              	.LVL89:
 1162 0022 10BD     		pop	{r4, pc}
 1163              	.LVL90:
 1164              	.L106:
 1165              		.align	2
 1166              	.L105:
 1167 0024 00002041 		.word	1092616192
 1168 0028 295C0F3F 		.word	1057971241
 1169              		.cfi_endproc
 1170              	.LFE79:
 1172              		.section	.text.davis_get_pressure,"ax",%progbits
 1173              		.align	1
 1174              		.global	davis_get_pressure
 1175              		.syntax unified
 1176              		.thumb
 1177              		.thumb_func
 1178              		.fpu softvfp
 1180              	davis_get_pressure:
 1181              	.LFB80:
 564:../system/src/davis_vantage/davis.c **** 
 565:../system/src/davis_vantage/davis.c **** uint32_t davis_get_pressure(davis_loop_t* input, float* output) {
 1182              		.loc 1 565 0
 1183              		.cfi_startproc
 1184              		@ args = 0, pretend = 0, frame = 0
 1185              		@ frame_needed = 0, uses_anonymous_args = 0
 1186              	.LVL91:
 1187 0000 10B5     		push	{r4, lr}
 1188              		.cfi_def_cfa_offset 8
 1189              		.cfi_offset 4, -8
 1190              		.cfi_offset 14, -4
 1191 0002 0C46     		mov	r4, r1
 1192              	.LVL92:
 566:../system/src/davis_vantage/davis.c **** 
 567:../system/src/davis_vantage/davis.c **** 	// Current Barometer. Units are (in Hg / 1000). The barometric
 568:../system/src/davis_vantage/davis.c **** 	// value should be between 20 inches and 32.5 inches in Vantage
 569:../system/src/davis_vantage/davis.c **** 	// Pro and between 20 inches and 32.5 inches in both Vantatge Pro
 570:../system/src/davis_vantage/davis.c **** 	// Vantage Pro2. Values outside these ranges will not be logged.
 571:../system/src/davis_vantage/davis.c **** 
 572:../system/src/davis_vantage/davis.c **** 	uint32_t retval = DAVIS_OK;
 573:../system/src/davis_vantage/davis.c **** 
 574:../system/src/davis_vantage/davis.c **** 	float out = 0.0f;
 575:../system/src/davis_vantage/davis.c **** 
 576:../system/src/davis_vantage/davis.c **** 	out = (float)input->barometer * 1000.0f;
 1193              		.loc 1 576 0
 1194 0004 0088     		ldrh	r0, [r0]
 1195              	.LVL93:
 1196 0006 FFF7FEFF 		bl	__aeabi_ui2f
 1197              	.LVL94:
 1198 000a 0449     		ldr	r1, .L109
 1199 000c FFF7FEFF 		bl	__aeabi_fmul
 1200              	.LVL95:
 577:../system/src/davis_vantage/davis.c **** 
 578:../system/src/davis_vantage/davis.c **** 	out *= 33.86f;
 1201              		.loc 1 578 0
 1202 0010 0349     		ldr	r1, .L109+4
 1203 0012 FFF7FEFF 		bl	__aeabi_fmul
 1204              	.LVL96:
 579:../system/src/davis_vantage/davis.c **** 
 580:../system/src/davis_vantage/davis.c **** 	*output = out;
 1205              		.loc 1 580 0
 1206 0016 2060     		str	r0, [r4]	@ float
 581:../system/src/davis_vantage/davis.c **** 
 582:../system/src/davis_vantage/davis.c **** 	return retval;
 583:../system/src/davis_vantage/davis.c **** }
 1207              		.loc 1 583 0
 1208 0018 0020     		movs	r0, #0
 1209              	.LVL97:
 1210 001a 10BD     		pop	{r4, pc}
 1211              	.LVL98:
 1212              	.L110:
 1213              		.align	2
 1214              	.L109:
 1215 001c 00007A44 		.word	1148846080
 1216 0020 A4700742 		.word	1107783844
 1217              		.cfi_endproc
 1218              	.LFE80:
 1220              		.section	.text.davis_get_wind,"ax",%progbits
 1221              		.align	1
 1222              		.global	davis_get_wind
 1223              		.syntax unified
 1224              		.thumb
 1225              		.thumb_func
 1226              		.fpu softvfp
 1228              	davis_get_wind:
 1229              	.LFB81:
 584:../system/src/davis_vantage/davis.c **** 
 585:../system/src/davis_vantage/davis.c **** uint32_t davis_get_wind(davis_loop_t* input, uint16_t* speed, uint16_t* gusts, uint16_t* direction)
 1230              		.loc 1 585 0
 1231              		.cfi_startproc
 1232              		@ args = 0, pretend = 0, frame = 0
 1233              		@ frame_needed = 0, uses_anonymous_args = 0
 1234              		@ link register save eliminated.
 1235              	.LVL99:
 586:../system/src/davis_vantage/davis.c **** 
 587:../system/src/davis_vantage/davis.c **** 	uint32_t retval = DAVIS_OK;
 588:../system/src/davis_vantage/davis.c **** 
 589:../system/src/davis_vantage/davis.c **** 	// It is a two byte unsigned value from 1 to 360 degrees. (0 is no
 590:../system/src/davis_vantage/davis.c **** 	// wind data, 90 is East, 180 is South, 270 is West and 360 is
 591:../system/src/davis_vantage/davis.c **** 	// north)
 592:../system/src/davis_vantage/davis.c **** 	*direction = input->wind_direction - 1;
 1236              		.loc 1 592 0
 1237 0000 8289     		ldrh	r2, [r0, #12]
 1238              	.LVL100:
 1239 0002 013A     		subs	r2, r2, #1
 1240 0004 1A80     		strh	r2, [r3]	@ movhi
 593:../system/src/davis_vantage/davis.c **** 
 594:../system/src/davis_vantage/davis.c **** 	// It is a byte unsigned value in mph. If the wind speed is dashed
 595:../system/src/davis_vantage/davis.c **** 	// because it lost synchronization with the radio or due to some
 596:../system/src/davis_vantage/davis.c **** 	// other reason, the wind speed is forced to be 0.
 597:../system/src/davis_vantage/davis.c **** 
 598:../system/src/davis_vantage/davis.c **** 	// this will give a value in 0.01 m/s incremenets
 599:../system/src/davis_vantage/davis.c **** 	*speed = ((input->wind_speed) * 45);
 1241              		.loc 1 599 0
 1242 0006 C388     		ldrh	r3, [r0, #6]
 1243              	.LVL101:
 1244 0008 03EB4303 		add	r3, r3, r3, lsl #1
 1245 000c C3EB0313 		rsb	r3, r3, r3, lsl #4
 1246 0010 9BB2     		uxth	r3, r3
 600:../system/src/davis_vantage/davis.c **** 
 601:../system/src/davis_vantage/davis.c **** 	// this will truncate the precision to .1 of m/s
 602:../system/src/davis_vantage/davis.c **** 	*speed = (uint16_t)((uint16_t)(*speed) / 10u);
 1247              		.loc 1 602 0
 1248 0012 074A     		ldr	r2, .L115
 1249 0014 A2FB0323 		umull	r2, r3, r2, r3
 1250 0018 DB08     		lsrs	r3, r3, #3
 1251 001a 0B80     		strh	r3, [r1]	@ movhi
 603:../system/src/davis_vantage/davis.c **** 
 604:../system/src/davis_vantage/davis.c **** 	if (input->wind_direction == 0 || input->wind_direction > 360)
 1252              		.loc 1 604 0
 1253 001c 8389     		ldrh	r3, [r0, #12]
 1254 001e 013B     		subs	r3, r3, #1
 1255 0020 9BB2     		uxth	r3, r3
 1256 0022 B3F5B47F 		cmp	r3, #360
 1257 0026 01D3     		bcc	.L114
 605:../system/src/davis_vantage/davis.c **** 		retval = DAVIS_NOT_AVALIABLE;
 1258              		.loc 1 605 0
 1259 0028 0120     		movs	r0, #1
 1260              	.LVL102:
 606:../system/src/davis_vantage/davis.c **** 
 607:../system/src/davis_vantage/davis.c **** 	return retval;
 608:../system/src/davis_vantage/davis.c **** }
 1261              		.loc 1 608 0
 1262 002a 7047     		bx	lr
 1263              	.LVL103:
 1264              	.L114:
 587:../system/src/davis_vantage/davis.c **** 
 1265              		.loc 1 587 0
 1266 002c 0020     		movs	r0, #0
 1267              	.LVL104:
 1268 002e 7047     		bx	lr
 1269              	.L116:
 1270              		.align	2
 1271              	.L115:
 1272 0030 CDCCCCCC 		.word	-858993459
 1273              		.cfi_endproc
 1274              	.LFE81:
 1276              		.global	davis_last_good_rxcheck
 1277              		.global	davis_last_good_loop
 1278              		.global	davis_base_crc_errors
 1279              		.global	davis_base_packets_in_the_row
 1280              		.global	davis_base_resynchronizations
 1281              		.global	davis_base_total_packet_missed
 1282              		.global	davis_base_total_packet_received
 1283              		.comm	davis_avaliable,1,1
 1284              		.comm	davis_quality_factor,1,1
 1285              		.comm	davis_global_state,1,1
 1286              		.comm	davis_rx_check_state,1,1
 1287              		.comm	davis_wake_up_state,1,1
 1288              		.comm	davis_loop_state,1,1
 1289              		.comm	davis_serial_context,4,4
 1290              		.section	.bss.davis_base_crc_errors,"aw",%nobits
 1291              		.align	1
 1292              		.set	.LANCHOR5,. + 0
 1295              	davis_base_crc_errors:
 1296 0000 0000     		.space	2
 1297              		.section	.bss.davis_base_packets_in_the_row,"aw",%nobits
 1298              		.align	1
 1299              		.set	.LANCHOR6,. + 0
 1302              	davis_base_packets_in_the_row:
 1303 0000 0000     		.space	2
 1304              		.section	.bss.davis_base_resynchronizations,"aw",%nobits
 1305              		.align	1
 1306              		.set	.LANCHOR7,. + 0
 1309              	davis_base_resynchronizations:
 1310 0000 0000     		.space	2
 1311              		.section	.bss.davis_base_total_packet_missed,"aw",%nobits
 1312              		.align	1
 1313              		.set	.LANCHOR3,. + 0
 1316              	davis_base_total_packet_missed:
 1317 0000 0000     		.space	2
 1318              		.section	.bss.davis_base_total_packet_received,"aw",%nobits
 1319              		.align	1
 1320              		.set	.LANCHOR4,. + 0
 1323              	davis_base_total_packet_received:
 1324 0000 0000     		.space	2
 1325              		.section	.bss.davis_last_good_loop,"aw",%nobits
 1326              		.align	2
 1327              		.set	.LANCHOR10,. + 0
 1330              	davis_last_good_loop:
 1331 0000 00000000 		.space	4
 1332              		.section	.bss.davis_last_good_rxcheck,"aw",%nobits
 1333              		.align	2
 1334              		.set	.LANCHOR8,. + 0
 1337              	davis_last_good_rxcheck:
 1338 0000 00000000 		.space	4
 1339              		.section	.rodata.lamps_off,"a",%progbits
 1340              		.align	2
 1341              		.set	.LANCHOR12,. + 0
 1344              	lamps_off:
 1345 0000 4C414D50 		.ascii	"LAMPS 0\012\000"
 1345      5320300A 
 1345      00
 1346              		.section	.rodata.lamps_on,"a",%progbits
 1347              		.align	2
 1348              		.set	.LANCHOR13,. + 0
 1351              	lamps_on:
 1352 0000 4C414D50 		.ascii	"LAMPS 1\012\000"
 1352      5320310A 
 1352      00
 1353              		.section	.rodata.leave_rx_screen,"a",%progbits
 1354              		.align	2
 1355              		.set	.LANCHOR11,. + 0
 1358              	leave_rx_screen:
 1359 0000 52585445 		.ascii	"RXTEST\012\000"
 1359      53540A00 
 1360              		.section	.rodata.line_feed,"a",%progbits
 1361              		.set	.LANCHOR0,. + 0
 1364              	line_feed:
 1365 0000 0A       		.byte	10
 1366              		.section	.rodata.line_feed_return,"a",%progbits
 1367              		.align	2
 1368              		.set	.LANCHOR1,. + 0
 1371              	line_feed_return:
 1372 0000 0A       		.byte	10
 1373 0001 0D       		.byte	13
 1374              		.section	.rodata.loop_command,"a",%progbits
 1375              		.align	2
 1376              		.set	.LANCHOR9,. + 0
 1379              	loop_command:
 1380 0000 4C505320 		.ascii	"LPS 2 1\012\000"
 1380      3220310A 
 1380      00
 1381              		.section	.rodata.rx_check,"a",%progbits
 1382              		.align	2
 1383              		.set	.LANCHOR2,. + 0
 1386              	rx_check:
 1387 0000 52584348 		.ascii	"RXCHECK\012\000"
 1387      45434B0A 
 1387      00
 1388              		.text
 1389              	.Letext0:
 1390              		.file 3 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/lib/gcc/arm-none-eabi/7.3.1/include/std
 1391              		.file 4 "../system/include/cmsis/core_cm3.h"
 1392              		.file 5 "../system/include/cmsis/system_stm32f10x.h"
 1393              		.file 6 "../system/include/cmsis/stm32f10x.h"
 1394              		.file 7 "../system/include/drivers/serial.h"
 1395              		.file 8 "../system/include/davis_vantage/davis_qf_t.h"
 1396              		.file 9 "../system/include/davis_vantage/davis_loop_t.h"
 1397              		.file 10 "../system/include/davis_vantage/davis.h"
 1398              		.file 11 "../system/include/davis_vantage/davis_query_state_t.h"
 1399              		.file 12 "../system/include/davis_vantage/davis_global_state_t.h"
 1400              		.file 13 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/lock.h"
 1401              		.file 14 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/_types.h"
 1402              		.file 15 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/lib/gcc/arm-none-eabi/7.3.1/include/st
 1403              		.file 16 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/reent.h"
 1404              		.file 17 "../system/include/aprs/cfifo.h"
 1405              		.file 18 "../system/include/aprs/afsk.h"
 1406              		.file 19 "../system/include/aprs/ax25.h"
 1407              		.file 20 "../include/config_data.h"
 1408              		.file 21 "/usr/local/bin/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/string.h"
 1409              		.file 22 "../system/include/davis_vantage/davis_parsers.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 davis.c
     /tmp/cc11y9uf.s:16     .text.davis_init:0000000000000000 $t
     /tmp/cc11y9uf.s:23     .text.davis_init:0000000000000000 davis_init
     /tmp/cc11y9uf.s:69     .text.davis_init:0000000000000030 $d
                            *COM*:0000000000000004 davis_serial_context
                            *COM*:0000000000000001 davis_quality_factor
                            *COM*:0000000000000001 davis_loop_state
                            *COM*:0000000000000001 davis_wake_up_state
                            *COM*:0000000000000001 davis_rx_check_state
                            *COM*:0000000000000001 davis_global_state
                            *COM*:0000000000000001 davis_avaliable
     /tmp/cc11y9uf.s:80     .text.davis_wake_up:0000000000000000 $t
     /tmp/cc11y9uf.s:87     .text.davis_wake_up:0000000000000000 davis_wake_up
     /tmp/cc11y9uf.s:155    .text.davis_wake_up:0000000000000048 $d
     /tmp/cc11y9uf.s:161    .text.davis_wake_up:0000000000000060 $t
     /tmp/cc11y9uf.s:383    .text.davis_wake_up:00000000000001ac $d
     /tmp/cc11y9uf.s:394    .text.davis_rxcheck_packet_pooler:0000000000000000 $t
     /tmp/cc11y9uf.s:401    .text.davis_rxcheck_packet_pooler:0000000000000000 davis_rxcheck_packet_pooler
     /tmp/cc11y9uf.s:430    .text.davis_rxcheck_packet_pooler:000000000000001a $d
     /tmp/cc11y9uf.s:434    .text.davis_rxcheck_packet_pooler:000000000000001e $t
     /tmp/cc11y9uf.s:620    .text.davis_rxcheck_packet_pooler:0000000000000108 $d
     /tmp/cc11y9uf.s:637    .text.davis_loop_packet_pooler:0000000000000000 $t
     /tmp/cc11y9uf.s:644    .text.davis_loop_packet_pooler:0000000000000000 davis_loop_packet_pooler
     /tmp/cc11y9uf.s:674    .text.davis_loop_packet_pooler:000000000000001a $d
     /tmp/cc11y9uf.s:680    .text.davis_loop_packet_pooler:0000000000000020 $t
     /tmp/cc11y9uf.s:872    .text.davis_loop_packet_pooler:00000000000000f0 $d
     /tmp/cc11y9uf.s:883    .text.davis_trigger_rxcheck_packet:0000000000000000 $t
     /tmp/cc11y9uf.s:890    .text.davis_trigger_rxcheck_packet:0000000000000000 davis_trigger_rxcheck_packet
     /tmp/cc11y9uf.s:906    .text.davis_trigger_rxcheck_packet:0000000000000008 $d
     /tmp/cc11y9uf.s:911    .text.davis_trigger_loop_packet:0000000000000000 $t
     /tmp/cc11y9uf.s:918    .text.davis_trigger_loop_packet:0000000000000000 davis_trigger_loop_packet
     /tmp/cc11y9uf.s:935    .text.davis_trigger_loop_packet:0000000000000008 $d
     /tmp/cc11y9uf.s:940    .text.davis_leave_receiving_screen:0000000000000000 $t
     /tmp/cc11y9uf.s:947    .text.davis_leave_receiving_screen:0000000000000000 davis_leave_receiving_screen
     /tmp/cc11y9uf.s:1010   .text.davis_leave_receiving_screen:0000000000000044 $d
     /tmp/cc11y9uf.s:1016   .text.davis_control_backlight:0000000000000000 $t
     /tmp/cc11y9uf.s:1023   .text.davis_control_backlight:0000000000000000 davis_control_backlight
     /tmp/cc11y9uf.s:1111   .text.davis_control_backlight:000000000000005c $d
     /tmp/cc11y9uf.s:1122   .text.davis_get_temperature:0000000000000000 $t
     /tmp/cc11y9uf.s:1129   .text.davis_get_temperature:0000000000000000 davis_get_temperature
     /tmp/cc11y9uf.s:1167   .text.davis_get_temperature:0000000000000024 $d
     /tmp/cc11y9uf.s:1173   .text.davis_get_pressure:0000000000000000 $t
     /tmp/cc11y9uf.s:1180   .text.davis_get_pressure:0000000000000000 davis_get_pressure
     /tmp/cc11y9uf.s:1215   .text.davis_get_pressure:000000000000001c $d
     /tmp/cc11y9uf.s:1221   .text.davis_get_wind:0000000000000000 $t
     /tmp/cc11y9uf.s:1228   .text.davis_get_wind:0000000000000000 davis_get_wind
     /tmp/cc11y9uf.s:1272   .text.davis_get_wind:0000000000000030 $d
     /tmp/cc11y9uf.s:1337   .bss.davis_last_good_rxcheck:0000000000000000 davis_last_good_rxcheck
     /tmp/cc11y9uf.s:1330   .bss.davis_last_good_loop:0000000000000000 davis_last_good_loop
     /tmp/cc11y9uf.s:1295   .bss.davis_base_crc_errors:0000000000000000 davis_base_crc_errors
     /tmp/cc11y9uf.s:1302   .bss.davis_base_packets_in_the_row:0000000000000000 davis_base_packets_in_the_row
     /tmp/cc11y9uf.s:1309   .bss.davis_base_resynchronizations:0000000000000000 davis_base_resynchronizations
     /tmp/cc11y9uf.s:1316   .bss.davis_base_total_packet_missed:0000000000000000 davis_base_total_packet_missed
     /tmp/cc11y9uf.s:1323   .bss.davis_base_total_packet_received:0000000000000000 davis_base_total_packet_received
     /tmp/cc11y9uf.s:1291   .bss.davis_base_crc_errors:0000000000000000 $d
     /tmp/cc11y9uf.s:1298   .bss.davis_base_packets_in_the_row:0000000000000000 $d
     /tmp/cc11y9uf.s:1305   .bss.davis_base_resynchronizations:0000000000000000 $d
     /tmp/cc11y9uf.s:1312   .bss.davis_base_total_packet_missed:0000000000000000 $d
     /tmp/cc11y9uf.s:1319   .bss.davis_base_total_packet_received:0000000000000000 $d
     /tmp/cc11y9uf.s:1326   .bss.davis_last_good_loop:0000000000000000 $d
     /tmp/cc11y9uf.s:1333   .bss.davis_last_good_rxcheck:0000000000000000 $d
     /tmp/cc11y9uf.s:1340   .rodata.lamps_off:0000000000000000 $d
     /tmp/cc11y9uf.s:1344   .rodata.lamps_off:0000000000000000 lamps_off
     /tmp/cc11y9uf.s:1347   .rodata.lamps_on:0000000000000000 $d
     /tmp/cc11y9uf.s:1351   .rodata.lamps_on:0000000000000000 lamps_on
     /tmp/cc11y9uf.s:1354   .rodata.leave_rx_screen:0000000000000000 $d
     /tmp/cc11y9uf.s:1358   .rodata.leave_rx_screen:0000000000000000 leave_rx_screen
     /tmp/cc11y9uf.s:1364   .rodata.line_feed:0000000000000000 line_feed
     /tmp/cc11y9uf.s:1367   .rodata.line_feed_return:0000000000000000 $d
     /tmp/cc11y9uf.s:1371   .rodata.line_feed_return:0000000000000000 line_feed_return
     /tmp/cc11y9uf.s:1375   .rodata.loop_command:0000000000000000 $d
     /tmp/cc11y9uf.s:1379   .rodata.loop_command:0000000000000000 loop_command
     /tmp/cc11y9uf.s:1382   .rodata.rx_check:0000000000000000 $d
     /tmp/cc11y9uf.s:1386   .rodata.rx_check:0000000000000000 rx_check
                           .group:0000000000000000 wm4.0.879aed89c359f5856fe69c61b3590d34
                           .group:0000000000000000 wm4.stdintgcc.h.29.6d480f4ba0f60596e88234283d42444f
                           .group:0000000000000000 wm4.stm32f10x.h.51.c58ea26c5150470d52680f0bbaa7049c
                           .group:0000000000000000 wm4.core_cm3.h.42.c33bb1302bf53de0580fb6140a46f2eb
                           .group:0000000000000000 wm4.cmsis_gcc.h.36.67d2dcde6a14ff518eedc1d545d89a76
                           .group:0000000000000000 wm4.core_cm3.h.183.ecfd9c316d6f10b73648f6e579b02c8b
                           .group:0000000000000000 wm4.stm32f10x.h.522.a925aafc848b1f088438cf0e9b167b78
                           .group:0000000000000000 wm4.stm32f10x_adc.h.89.9f2b285fa0070185d48a05b61a05798c
                           .group:0000000000000000 wm4.stm32f10x_bkp.h.25.4622919f1e30efdad5eb44e12edd5513
                           .group:0000000000000000 wm4.stm32f10x_can.h.25.e5e43f6bbc8fc7c8aa30ef2bc5610ced
                           .group:0000000000000000 wm4.stm32f10x_cec.h.25.8f03450e7bbb704d96e7bc73ec0f66a7
                           .group:0000000000000000 wm4.stm32f10x_dac.h.25.d946244edf026333094657d55ea894b8
                           .group:0000000000000000 wm4.stm32f10x_dbgmcu.h.25.d3351200fc7f9c8615d1ae81d40db08a
                           .group:0000000000000000 wm4.stm32f10x_dma.h.25.94e36204daa98cae5dcc70a10a9694d5
                           .group:0000000000000000 wm4.stm32f10x_exti.h.25.f52c69aad7d1994be5b2c4e2b8f4c595
                           .group:0000000000000000 wm4.stm32f10x_flash.h.25.4be61fcb02863962a1e006449d310650
                           .group:0000000000000000 wm4.stm32f10x_fsmc.h.25.bca154da2699cdb6024c0c6c4fc5aa89
                           .group:0000000000000000 wm4.stm32f10x_gpio.h.25.80c981af0e637567395034c576cfb3ce
                           .group:0000000000000000 wm4.stm32f10x_i2c.h.25.b124ac2c620f8ebddd92b6d95ca62176
                           .group:0000000000000000 wm4.stm32f10x_iwdg.h.25.da9374ab9856795610487f312ccf3122
                           .group:0000000000000000 wm4.stm32f10x_pwr.h.25.37ef75009f751ef5fe27910e0bf00a62
                           .group:0000000000000000 wm4.stm32f10x_rcc.h.25.fe8897e7491f2eb0cff54551d08eb765
                           .group:0000000000000000 wm4.stm32f10x_rtc.h.25.361142606ba98ddcd10369f321f6e636
                           .group:0000000000000000 wm4.stm32f10x_sdio.h.25.fb0db079f5c1412c40f359319f7c40b0
                           .group:0000000000000000 wm4.stm32f10x_spi.h.25.3f6dfa4abe177efb3c6f5a717c06b323
                           .group:0000000000000000 wm4.stm32f10x_tim.h.25.f709106ba77b314e6b070693f89f3c56
                           .group:0000000000000000 wm4.stm32f10x_usart.h.25.2e65e396239d0cc41fd0bf6faa2a32cb
                           .group:0000000000000000 wm4.stm32f10x_wwdg.h.25.dde12201d86b5aa9ecaafb5eccdc6549
                           .group:0000000000000000 wm4.misc.h.25.068e106f368fa5369a681ef57c106f4b
                           .group:0000000000000000 wm4.stm32f10x.h.8317.9a8e476d96d33bb2df9a9ad0775bd4a7
                           .group:0000000000000000 wm4.serial.h.8.be81c40110fd9bb3b68e7ebdb6b30450
                           .group:0000000000000000 wm4.davis_retval_def.h.9.025968613fbef7aa10339676702cdb4e
                           .group:0000000000000000 wm4.davis.h.18.aa92228551d9a3484fe55d6024d1b87b
                           .group:0000000000000000 wm4.davis_parsers.h.15.1cf20b7725fbc6387ea18eb1ec35046c
                           .group:0000000000000000 wm4._newlib_version.h.4.875b979a44719054cd750d0952ad3fd6
                           .group:0000000000000000 wm4.newlib.h.18.5e5ca3429233af402d406a202f1fc1ac
                           .group:0000000000000000 wm4.ieeefp.h.77.220d9cccac42cd58761758bee2df4ce6
                           .group:0000000000000000 wm4.features.h.22.fad1cec3bc7ff06488171438dbdcfd02
                           .group:0000000000000000 wm4.config.h.220.6cac6a9685cfce5e83c17784171638d9
                           .group:0000000000000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:0000000000000000 wm4.stddef.h.39.a38874c8f8a57e66301090908ec2a69f
                           .group:0000000000000000 wm4._default_types.h.6.959254cf5f09734ea7516c89e8bb21bd
                           .group:0000000000000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:0000000000000000 wm4._types.h.125.5cf8a495f1f7ef36777ad868a1e32068
                           .group:0000000000000000 wm4.stddef.h.161.5349cb105733e8777bfb0cf53c4e3f34
                           .group:0000000000000000 wm4._types.h.184.03611d4f6b5bec9997bcf4279eceba07
                           .group:0000000000000000 wm4.reent.h.17.90c2574d4acdcfce933db5cb09ff35fe
                           .group:0000000000000000 wm4.cdefs.h.47.0bcdf94cb40e176393dd1404056825b4
                           .group:0000000000000000 wm4.string.h.15.dab3980bf35408a4c507182805e2de3a
                           .group:0000000000000000 wm4.stddef.h.161.19e15733342b50ead2919490b095303e
                           .group:0000000000000000 wm4.stdbool.h.29.07dce69c3b78884144b7f7bd19483461
                           .group:0000000000000000 wm4.macros.h.2.7a7a5ac48d4160b7481c806e80b68442
                           .group:0000000000000000 wm4.config.h.2.f5e96167cb26b0ce97c5e7513a95bc8b
                           .group:0000000000000000 wm4.afsk.h.17.cf8f922069680e152e1eddb76cd4cc82
                           .group:0000000000000000 wm4.ax25.h.18.077e42a4af9016476e34900472a8fe18
                           .group:0000000000000000 wm4.config_data.h.9.6026a38cd2f39158a8fd50707ba1bf90
                           .group:0000000000000000 wm4.main.h.8.3d6ad69e5f061008d8c5cc5f5c9dd15a

UNDEFINED SYMBOLS
srl_switch_timeout
srl_send_data
srl_wait_for_tx_completion
srl_receive_data_with_instant_timeout
srl_wait_for_rx_completion_or_timeout
srl_receive_data
srl_get_rx_buffer
memcmp
davis_parsers_rxcheck
master_time
strlen
__aeabi_ui2f
__aeabi_fdiv
__aeabi_fsub
__aeabi_fmul
